var xo=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Vf=xo(j=>{/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ta="173";function Yt(t,e,r){return Math.max(e,Math.min(r,t))}class Eo{constructor(e=0,r=0,a=0,n=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=a,this._w=n}static slerpFlat(e,r,a,n,i,o,s){let h=a[n+0],c=a[n+1],d=a[n+2],f=a[n+3];const g=i[o+0],y=i[o+1],_=i[o+2],m=i[o+3];if(s===0){e[r+0]=h,e[r+1]=c,e[r+2]=d,e[r+3]=f;return}if(s===1){e[r+0]=g,e[r+1]=y,e[r+2]=_,e[r+3]=m;return}if(f!==m||h!==g||c!==y||d!==_){let M=1-s;const E=h*g+c*y+d*_+f*m,b=E>=0?1:-1,C=1-E*E;if(C>Number.EPSILON){const T=Math.sqrt(C),k=Math.atan2(T,E*b);M=Math.sin(M*k)/T,s=Math.sin(s*k)/T}const N=s*b;if(h=h*M+g*N,c=c*M+y*N,d=d*M+_*N,f=f*M+m*N,M===1-s){const T=1/Math.sqrt(h*h+c*c+d*d+f*f);h*=T,c*=T,d*=T,f*=T}}e[r]=h,e[r+1]=c,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,a,n,i,o){const s=a[n],h=a[n+1],c=a[n+2],d=a[n+3],f=i[o],g=i[o+1],y=i[o+2],_=i[o+3];return e[r]=s*_+d*f+h*y-c*g,e[r+1]=h*_+d*g+c*f-s*y,e[r+2]=c*_+d*y+s*g-h*f,e[r+3]=d*_-s*f-h*g-c*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,a,n){return this._x=e,this._y=r,this._z=a,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const a=e._x,n=e._y,i=e._z,o=e._order,s=Math.cos,h=Math.sin,c=s(a/2),d=s(n/2),f=s(i/2),g=h(a/2),y=h(n/2),_=h(i/2);switch(o){case"XYZ":this._x=g*d*f+c*y*_,this._y=c*y*f-g*d*_,this._z=c*d*_+g*y*f,this._w=c*d*f-g*y*_;break;case"YXZ":this._x=g*d*f+c*y*_,this._y=c*y*f-g*d*_,this._z=c*d*_-g*y*f,this._w=c*d*f+g*y*_;break;case"ZXY":this._x=g*d*f-c*y*_,this._y=c*y*f+g*d*_,this._z=c*d*_+g*y*f,this._w=c*d*f-g*y*_;break;case"ZYX":this._x=g*d*f-c*y*_,this._y=c*y*f+g*d*_,this._z=c*d*_-g*y*f,this._w=c*d*f+g*y*_;break;case"YZX":this._x=g*d*f+c*y*_,this._y=c*y*f+g*d*_,this._z=c*d*_-g*y*f,this._w=c*d*f-g*y*_;break;case"XZY":this._x=g*d*f-c*y*_,this._y=c*y*f-g*d*_,this._z=c*d*_+g*y*f,this._w=c*d*f+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const a=r/2,n=Math.sin(a);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,a=r[0],n=r[4],i=r[8],o=r[1],s=r[5],h=r[9],c=r[2],d=r[6],f=r[10],g=a+s+f;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(d-h)*y,this._y=(i-c)*y,this._z=(o-n)*y}else if(a>s&&a>f){const y=2*Math.sqrt(1+a-s-f);this._w=(d-h)/y,this._x=.25*y,this._y=(n+o)/y,this._z=(i+c)/y}else if(s>f){const y=2*Math.sqrt(1+s-a-f);this._w=(i-c)/y,this._x=(n+o)/y,this._y=.25*y,this._z=(h+d)/y}else{const y=2*Math.sqrt(1+f-a-s);this._w=(o-n)/y,this._x=(i+c)/y,this._y=(h+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let a=e.dot(r)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yt(this.dot(e),-1,1)))}rotateTowards(e,r){const a=this.angleTo(e);if(a===0)return this;const n=Math.min(1,r/a);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const a=e._x,n=e._y,i=e._z,o=e._w,s=r._x,h=r._y,c=r._z,d=r._w;return this._x=a*d+o*s+n*c-i*h,this._y=n*d+o*h+i*s-a*c,this._z=i*d+o*c+a*h-n*s,this._w=o*d-a*s-n*h-i*c,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const a=this._x,n=this._y,i=this._z,o=this._w;let s=o*e._w+a*e._x+n*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=a,this._y=n,this._z=i,this;const h=1-s*s;if(h<=Number.EPSILON){const y=1-r;return this._w=y*o+r*this._w,this._x=y*a+r*this._x,this._y=y*n+r*this._y,this._z=y*i+r*this._z,this.normalize(),this}const c=Math.sqrt(h),d=Math.atan2(c,s),f=Math.sin((1-r)*d)/c,g=Math.sin(r*d)/c;return this._w=o*f+this._w*g,this._x=a*f+this._x*g,this._y=n*f+this._y*g,this._z=i*f+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,r,a){return this.copy(e).slerp(r,a)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),a=Math.random(),n=Math.sqrt(1-a),i=Math.sqrt(a);return this.set(n*Math.sin(e),n*Math.cos(e),i*Math.sin(r),i*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,r=0,a=0){ce.prototype.isVector3=!0,this.x=e,this.y=r,this.z=a}set(e,r,a){return a===void 0&&(a=this.z),this.x=e,this.y=r,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(en.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(en.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,a=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[3]*a+i[6]*n,this.y=i[1]*r+i[4]*a+i[7]*n,this.z=i[2]*r+i[5]*a+i[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,a=this.y,n=this.z,i=e.elements,o=1/(i[3]*r+i[7]*a+i[11]*n+i[15]);return this.x=(i[0]*r+i[4]*a+i[8]*n+i[12])*o,this.y=(i[1]*r+i[5]*a+i[9]*n+i[13])*o,this.z=(i[2]*r+i[6]*a+i[10]*n+i[14])*o,this}applyQuaternion(e){const r=this.x,a=this.y,n=this.z,i=e.x,o=e.y,s=e.z,h=e.w,c=2*(o*n-s*a),d=2*(s*r-i*n),f=2*(i*a-o*r);return this.x=r+h*c+o*f-s*d,this.y=a+h*d+s*c-i*f,this.z=n+h*f+i*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,a=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[4]*a+i[8]*n,this.y=i[1]*r+i[5]*a+i[9]*n,this.z=i[2]*r+i[6]*a+i[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Yt(this.x,e.x,r.x),this.y=Yt(this.y,e.y,r.y),this.z=Yt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Yt(this.x,e,r),this.y=Yt(this.y,e,r),this.z=Yt(this.z,e,r),this}clampLength(e,r){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Yt(a,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,a){return this.x=e.x+(r.x-e.x)*a,this.y=e.y+(r.y-e.y)*a,this.z=e.z+(r.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const a=e.x,n=e.y,i=e.z,o=r.x,s=r.y,h=r.z;return this.x=n*h-i*s,this.y=i*o-a*h,this.z=a*s-n*o,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const a=e.dot(this)/r;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return li.copy(this).projectOnVector(e),this.sub(li)}reflect(e){return this.sub(li.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const a=this.dot(e)/r;return Math.acos(Yt(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return r*r+a*a+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,a){const n=Math.sin(r)*e;return this.x=n*Math.sin(a),this.y=Math.cos(r)*e,this.z=n*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,a){return this.x=e*Math.sin(r),this.y=a,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=a,this.z=n,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,a=Math.sqrt(1-r*r);return this.x=a*Math.cos(e),this.y=r,this.z=a*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const li=new ce,en=new Eo;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ta}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ta);var Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}),r}var Ot={},se={},ui={},rn;function Po(){return rn||(rn=1,Object.defineProperty(ui,"__esModule",{value:!0})),ui}var ke={},nn;function So(){if(nn)return ke;nn=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.Hierarchy=void 0,ke.Hierarchy={parse:t};function t(e){return Object.entries(e).reduce((r,[a,n])=>(n===-1?r.pages[a]={}:n&&(r.nodes[a]={pointCount:n}),r),{nodes:{},pages:{}})}return ke}var an;function To(){return an||(an=1,function(t){var e=se&&se.__createBinding||(Object.create?function(a,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(a,o,s)}:function(a,n,i,o){o===void 0&&(o=i),a[o]=n[i]}),r=se&&se.__exportStar||function(a,n){for(var i in a)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&e(n,a,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Po(),t),r(So(),t)}(se)),se}var jt={},oe={},sn;function wi(){return sn||(sn=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.hierarchyItemLength=oe.infoLength=void 0,oe.infoLength=160,oe.hierarchyItemLength=32),oe}var It={},Gt={},Ht={},on;function xi(){return on||(on=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.evlrHeaderLength=Ht.vlrHeaderLength=Ht.minHeaderLength=void 0,Ht.minHeaderLength=375,Ht.vlrHeaderLength=54,Ht.evlrHeaderLength=60),Ht}var qe={},he={},le={},hn;function Ao(){if(hn)return le;hn=1,Object.defineProperty(le,"__esModule",{value:!0}),le.getBigUint64=le.parseBigInt=void 0;function t(r){if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(-Number.MAX_SAFE_INTEGER))throw new Error(`Cannot convert bigint to number: ${r}`);return Number(r)}le.parseBigInt=t;function e(r,a,n){if(r.getBigUint64)return r.getBigUint64(a,n);const[i,o]=n?[4,0]:[0,4],s=BigInt(r.getUint32(a+i,n)),h=BigInt(r.getUint32(a+o,n));return(s<<BigInt(32))+h}return le.getBigUint64=e,le}var Wt={},ln;function Oo(){if(ln)return Wt;ln=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.toCString=Wt.toDataView=Wt.Binary=void 0,Wt.Binary={toDataView:t,toCString:e};function t(r){return new DataView(r.buffer,r.byteOffset,r.length)}Wt.toDataView=t;function e(r){const a=t(r);let n="";for(let i=0;i<a.byteLength;++i){const o=a.getInt8(i);if(o===0)return n;n+=String.fromCharCode(o)}return n}return Wt.toCString=e,Wt}var je={},un;function Io(){if(un)return je;un=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Bounds=void 0,je.Bounds={min:t,max:e,mid:r,width:a,depth:n,height:i,cube:o,step:s,stepTo:h,intersection:c};function t(d){return[d[0],d[1],d[2]]}function e(d){return[d[3],d[4],d[5]]}function r([d,f,g,y,_,m]){return[d+(y-d)/2,f+(_-f)/2,g+(m-g)/2]}function a(d){return d[3]-d[0]}function n(d){return d[4]-d[1]}function i(d){return d[5]-d[2]}function o(d){const f=r(d),g=Math.max(a(d),n(d),i(d))/2;return[f[0]-g,f[1]-g,f[2]-g,f[0]+g,f[1]+g,f[2]+g]}function s(d,[f,g,y]){const[_,m,M,E,b,C]=d,[N,T,k]=r(d);return[f?N:_,g?T:m,y?k:M,f?E:N,g?b:T,y?C:k]}function h(d,[f,g,y,_]){for(let m=f-1;m>=0;--m)d=s(d,[g>>m&1,y>>m&1,_>>m&1]);return d}function c(d,f){return[Math.max(d[0],f[0]),Math.max(d[1],f[1]),Math.max(d[2],f[2]),Math.min(d[3],f[3]),Math.min(d[4],f[4]),Math.min(d[5],f[5])]}return je}var Ge={},cn;function Ro(){if(cn)return Ge;cn=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.Dimension=void 0;const t={int8:{type:"signed",size:1},int16:{type:"signed",size:2},int32:{type:"signed",size:4},int64:{type:"signed",size:8},uint8:{type:"unsigned",size:1},uint16:{type:"unsigned",size:2},uint32:{type:"unsigned",size:4},uint64:{type:"unsigned",size:8},float32:{type:"float",size:4},float64:{type:"float",size:8},float:{type:"float",size:4},double:{type:"float",size:8},bool:{type:"unsigned",size:1},boolean:{type:"unsigned",size:1}};Ge.Dimension={Type:t,ctype:e};function e({type:r,size:a}){switch(r){case"signed":switch(a){case 1:return"int8";case 2:return"int16";case 4:return"int32";case 8:return"int64"}case"unsigned":switch(a){case 1:return"uint8";case 2:return"uint16";case 4:return"uint32";case 8:return"uint64"}case"float":switch(a){case 4:return"float";case 8:return"double"}}throw new Error(`Invalid dimension type/size: ${r}/${a}`)}return Ge}var Et={},Ar={exports:{}},fn;function No(){return fn||(fn=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Tr<"u"&&Tr,a=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var s=typeof i<"u"&&i||typeof self<"u"&&self||typeof Tr<"u"&&Tr||{},h={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(w){return w&&DataView.prototype.isPrototypeOf(w)}if(h.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(w){return w&&d.indexOf(Object.prototype.toString.call(w))>-1};function g(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function y(w){return typeof w!="string"&&(w=String(w)),w}function _(w){var O={next:function(){var q=w.shift();return{done:q===void 0,value:q}}};return h.iterable&&(O[Symbol.iterator]=function(){return O}),O}function m(w){this.map={},w instanceof m?w.forEach(function(O,q){this.append(q,O)},this):Array.isArray(w)?w.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(O){this.append(O,w[O])},this)}m.prototype.append=function(w,O){w=g(w),O=y(O);var q=this.map[w];this.map[w]=q?q+", "+O:O},m.prototype.delete=function(w){delete this.map[g(w)]},m.prototype.get=function(w){return w=g(w),this.has(w)?this.map[w]:null},m.prototype.has=function(w){return this.map.hasOwnProperty(g(w))},m.prototype.set=function(w,O){this.map[g(w)]=y(O)},m.prototype.forEach=function(w,O){for(var q in this.map)this.map.hasOwnProperty(q)&&w.call(O,this.map[q],q,this)},m.prototype.keys=function(){var w=[];return this.forEach(function(O,q){w.push(q)}),_(w)},m.prototype.values=function(){var w=[];return this.forEach(function(O){w.push(O)}),_(w)},m.prototype.entries=function(){var w=[];return this.forEach(function(O,q){w.push([q,O])}),_(w)},h.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function M(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function E(w){return new Promise(function(O,q){w.onload=function(){O(w.result)},w.onerror=function(){q(w.error)}})}function b(w){var O=new FileReader,q=E(O);return O.readAsArrayBuffer(w),q}function C(w){var O=new FileReader,q=E(O),V=/charset=([A-Za-z0-9_-]+)/.exec(w.type),Z=V?V[1]:"utf-8";return O.readAsText(w,Z),q}function N(w){for(var O=new Uint8Array(w),q=new Array(O.length),V=0;V<O.length;V++)q[V]=String.fromCharCode(O[V]);return q.join("")}function T(w){if(w.slice)return w.slice(0);var O=new Uint8Array(w.byteLength);return O.set(new Uint8Array(w)),O.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:h.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:h.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():h.arrayBuffer&&h.blob&&c(w)?(this._bodyArrayBuffer=T(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||f(w))?this._bodyArrayBuffer=T(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var w=M(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=M(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=M(this);if(w)return w;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(ut)}),this.json=function(){return this.text().then(JSON.parse)},this}var K=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(w){var O=w.toUpperCase();return K.indexOf(O)>-1?O:w}function tt(w,O){if(!(this instanceof tt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var q=O.body;if(w instanceof tt){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,O.headers||(this.headers=new m(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!q&&w._bodyInit!=null&&(q=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new m(O.headers)),this.method=F(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in s){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var Z=/\?/;this.url+=(Z.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}tt.prototype.clone=function(){return new tt(this,{body:this._bodyInit})};function ut(w){var O=new FormData;return w.trim().split("&").forEach(function(q){if(q){var V=q.split("="),Z=V.shift().replace(/\+/g," "),B=V.join("=").replace(/\+/g," ");O.append(decodeURIComponent(Z),decodeURIComponent(B))}}),O}function _t(w){var O=new m,q=w.replace(/\r?\n[\t ]+/g," ");return q.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var Z=V.split(":"),B=Z.shift().trim();if(B){var Y=Z.join(":").trim();try{O.append(B,Y)}catch(ge){console.warn("Response "+ge.message)}}}),O}k.call(tt.prototype);function nt(w,O){if(!(this instanceof nt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new m(O.headers),this.url=O.url||"",this._initBody(w)}k.call(nt.prototype),nt.prototype.clone=function(){return new nt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},nt.error=function(){var w=new nt(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var Ie=[301,302,303,307,308];nt.redirect=function(w,O){if(Ie.indexOf(O)===-1)throw new RangeError("Invalid status code");return new nt(null,{status:O,headers:{location:w}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(O,q){this.message=O,this.name=q;var V=Error(O);this.stack=V.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ye(w,O){return new Promise(function(q,V){var Z=new tt(w,O);if(Z.signal&&Z.signal.aborted)return V(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function Y(){B.abort()}B.onload=function(){var it={statusText:B.statusText,headers:_t(B.getAllResponseHeaders()||"")};Z.url.indexOf("file://")===0&&(B.status<200||B.status>599)?it.status=200:it.status=B.status,it.url="responseURL"in B?B.responseURL:it.headers.get("X-Request-URL");var Tt="response"in B?B.response:B.responseText;setTimeout(function(){q(new nt(Tt,it))},0)},B.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){V(new o.DOMException("Aborted","AbortError"))},0)};function ge(it){try{return it===""&&s.location.href?s.location.href:it}catch{return it}}if(B.open(Z.method,ge(Z.url),!0),Z.credentials==="include"?B.withCredentials=!0:Z.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(h.blob?B.responseType="blob":h.arrayBuffer&&(B.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof m||s.Headers&&O.headers instanceof s.Headers)){var Re=[];Object.getOwnPropertyNames(O.headers).forEach(function(it){Re.push(g(it)),B.setRequestHeader(it,y(O.headers[it]))}),Z.headers.forEach(function(it,Tt){Re.indexOf(Tt)===-1&&B.setRequestHeader(Tt,it)})}else Z.headers.forEach(function(it,Tt){B.setRequestHeader(Tt,it)});Z.signal&&(Z.signal.addEventListener("abort",Y),B.onreadystatechange=function(){B.readyState===4&&Z.signal.removeEventListener("abort",Y)}),B.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return ye.polyfill=!0,s.fetch||(s.fetch=ye,s.Headers=m,s.Request=tt,s.Response=nt),o.Headers=m,o.Request=tt,o.Response=nt,o.fetch=ye,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(a),a.fetch.ponyfill=!0,delete a.fetch.polyfill;var n=r.fetch?r:a;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e}(Ar,Ar.exports)),Ar.exports}var Lo={},Fo=Object.freeze({__proto__:null,default:Lo}),Do=Co(Fo),dn;function zo(){if(dn)return Et;dn=1;var t=Et&&Et.__createBinding||(Object.create?function(c,d,f,g){g===void 0&&(g=f);var y=Object.getOwnPropertyDescriptor(d,f);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,g,y)}:function(c,d,f,g){g===void 0&&(g=f),c[g]=d[f]}),e=Et&&Et.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),r=Et&&Et.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&t(d,c,f);return e(d,c),d},a=Et&&Et.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Et,"__esModule",{value:!0}),Et.Getter=void 0;const n=a(No());Et.Getter={create:i,http:o,file:s};function i(c){return typeof c=="function"?c:c.startsWith("http://")||c.startsWith("https://")?o(c):s(c)}function o(c){return async function(f,g){if(f<0||g<0||f>g)throw new Error("Invalid range");const _=await(await(0,n.default)(c,{headers:{Range:`bytes=${f}-${g-1}`}})).arrayBuffer();return new Uint8Array(_)}}function s(c){return async function(f,g){const y=await Promise.resolve().then(()=>r(Do));async function _(m=0,M=1/0){if(m<0||M<0||m>M)throw new Error("Invalid range");await y.promises.access(c);const E=y.createReadStream(c,{start:m,end:M-1,autoClose:!0});return h(E)}return _(f,g)}}async function h(c){return await new Promise((d,f)=>{const g=[];c.on("data",y=>g.push(y)),c.on("error",f),c.on("end",()=>d(Buffer.concat(g)))})}return Et}var ci={},yn;function Uo(){return yn||(yn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Key=void 0,t.Key={create:e,parse:r,toString:a,step:n,up:i,compare:o,depth:s};function e(h,c=0,d=0,f=0){return typeof h!="number"?r(h):[h,c,d,f]}function r(h){if(typeof h!="string")return h;const[c,d,f,g,...y]=h.split("-").map(m=>parseInt(m,10)),_=[c,d,f,g];if(y.length!==0||_.some(m=>typeof m!="number"||Number.isNaN(m)))throw new Error(`Invalid key: ${h}`);return _}function a(h){return typeof h=="string"?h:h.join("-")}function n(h,[c,d,f]){const[g,y,_,m]=t.Key.create(h);return[g+1,y*2+c,_*2+d,m*2+f]}function i(h,c=1){const[d,f,g,y]=t.Key.create(h);return[d-c,f>>c,g>>c,y>>c]}function o(h,c){for(let d=0;d<h.length;++d){if(h[d]<c[d])return-1;if(h[d]>c[d])return 1}return 0}function s(h){return h[0]}}(ci)),ci}var He={},gn;function Bo(){return gn||(gn=1,Object.defineProperty(He,"__esModule",{value:!0}),He.Scale=void 0,He.Scale={apply:(t,e=1,r=0)=>(t-r)/e,unapply:(t,e=1,r=0)=>t*e+r}),He}var We={},vn;function $o(){if(vn)return We;vn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.Step=void 0,We.Step={fromIndex:t,list:e};function t(r){if(r<0||r>=8)throw new Error(`Invalid step index: ${r}`);const a=r>>0&1?1:0,n=r>>1&1?1:0,i=r>>2&1?1:0;return[a,n,i]}function e(){return[[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]]}return We}var _n;function Lt(){return _n||(_n=1,function(t){var e=he&&he.__createBinding||(Object.create?function(d,f,g,y){y===void 0&&(y=g);var _=Object.getOwnPropertyDescriptor(f,g);(!_||("get"in _?!f.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(d,y,_)}:function(d,f,g,y){y===void 0&&(y=g),d[y]=f[g]}),r=he&&he.__exportStar||function(d,f){for(var g in d)g!=="default"&&!Object.prototype.hasOwnProperty.call(f,g)&&e(f,d,g)};Object.defineProperty(t,"__esModule",{value:!0}),t.Step=t.Scale=t.Key=t.Getter=t.Dimension=t.Bounds=t.Binary=void 0,r(Ao(),t);var a=Oo();Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return a.Binary}});var n=Io();Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return n.Bounds}});var i=Ro();Object.defineProperty(t,"Dimension",{enumerable:!0,get:function(){return i.Dimension}});var o=zo();Object.defineProperty(t,"Getter",{enumerable:!0,get:function(){return o.Getter}});var s=Uo();Object.defineProperty(t,"Key",{enumerable:!0,get:function(){return s.Key}});var h=Bo();Object.defineProperty(t,"Scale",{enumerable:!0,get:function(){return h.Scale}});var c=$o();Object.defineProperty(t,"Step",{enumerable:!0,get:function(){return c.Step}})}(he)),he}var Ve={},mn;function ea(){if(mn)return Ve;mn=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.ExtraBytes=void 0;const t=Lt();Ve.ExtraBytes={getDimension:r,parse:a,parseOne:n};const e=192;function r({type:s,length:h}){switch(s){case"signed":case"unsigned":switch(h){case 1:case 2:case 4:case 8:return{type:s,size:h}}case"float":switch(h){case 4:case 8:return{type:s,size:h}}}}function a(s){if(s.byteLength%e!==0)throw new Error(`Invalid extra bytes VLR length: ${s.byteLength}`);const h=[];for(let c=0;c<s.byteLength;c+=e)h.push(n(s.slice(c,c+e)));return h}function n(s){if(s.byteLength!==e)throw new Error(`Invalid extra bytes entry length: ${s.byteLength}`);const h=t.Binary.toDataView(s),c=t.Binary.toCString(s.slice(4,36)),d=t.Binary.toCString(s.slice(60,192)),f=h.getUint8(2),g=h.getUint8(3);if(f>=11)throw new Error(`Invalid extra bytes "type" value: ${f}`);if(f===0)return{name:c,description:d,length:g};const y=o(g),_=i(f);if(!_)throw new Error(`Failed to extract dimension type: ${f}`);const{type:m,size:M}=_;function E(C){switch(m){case"signed":return(0,t.parseBigInt)(h.getBigInt64(C,!0));case"unsigned":return(0,t.parseBigInt)((0,t.getBigUint64)(h,C,!0));case"float":return h.getFloat64(C,!0)}}const b={name:c,description:d,type:m,length:M};return y.hasNodata&&(b.nodata=E(40)),y.hasMin&&(b.min=E(64)),y.hasMax&&(b.max=E(88)),y.hasScale&&(b.scale=h.getFloat64(112)),y.hasOffset&&(b.offset=h.getFloat64(136)),b}function i(s){switch(s){case 1:return t.Dimension.Type.uint8;case 2:return t.Dimension.Type.int8;case 3:return t.Dimension.Type.uint16;case 4:return t.Dimension.Type.int16;case 5:return t.Dimension.Type.uint32;case 6:return t.Dimension.Type.int32;case 7:return t.Dimension.Type.uint64;case 8:return t.Dimension.Type.int64;case 9:return t.Dimension.Type.float32;case 10:return t.Dimension.Type.float64}}function o(s){return{hasNodata:!!(s&1),hasMin:!!(s>>1&1),hasMax:!!(s>>2&1),hasScale:!!(s>>3&1),hasOffset:!!(s>>4&1)}}return Ve}var Mn;function ra(){if(Mn)return qe;Mn=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.Dimensions=void 0;const t=Lt(),e=ea();qe.Dimensions={create:n};const{Type:r}=t.Dimension,a={X:r.float64,Y:r.float64,Z:r.float64,Intensity:r.uint16,ReturnNumber:r.uint8,NumberOfReturns:r.uint8,ScanDirectionFlag:r.boolean,EdgeOfFlightLine:r.boolean,Classification:r.uint8,Synthetic:r.boolean,KeyPoint:r.boolean,Withheld:r.boolean,Overlap:r.boolean,ScanAngle:r.float32,UserData:r.uint8,PointSourceId:r.uint16,GpsTime:r.float64,Red:r.uint16,Green:r.uint16,Blue:r.uint16,ScannerChannel:r.uint8,Infrared:r.uint16};function n(i,o=[]){return Object.keys(i).reduce((s,h)=>{const c=a[h];if(c)return{...s,[h]:c};const d=o.find(g=>g.name===h),f=d&&e.ExtraBytes.getDimension(d);if(f)return{...s,[h]:f};throw new Error(`Failed to look up LAS type: ${h}`)},{})}return qe}var Ye={},pn;function ia(){if(pn)return Ye;pn=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Extractor=void 0;const t=Lt();Ye.Extractor={create:n};function e(y){switch(y){case 0:return 20;case 1:return 28;case 2:return 26;case 3:return 34;case 6:return 30;case 7:return 36;case 8:return 38;default:throw new Error(`Unsupported point data record format: ${y}`)}}function r(y,_,{type:m,length:M}){const E=g(y);switch(m){case"signed":switch(M){case 1:return(b,C)=>b.getInt8(E(C)+_);case 2:return(b,C)=>b.getInt16(E(C)+_,!0);case 4:return(b,C)=>b.getInt32(E(C)+_,!0);case 8:return(b,C)=>(0,t.parseBigInt)(b.getBigInt64(E(C)+_,!0))}case"unsigned":switch(M){case 1:return(b,C)=>b.getUint8(E(C)+_);case 2:return(b,C)=>b.getUint16(E(C)+_,!0);case 4:return(b,C)=>b.getUint32(E(C)+_,!0);case 8:return(b,C)=>(0,t.parseBigInt)((0,t.getBigUint64)(b,E(C)+_,!0))}case"float":switch(M){case 4:return(b,C)=>b.getFloat32(E(C)+_,!0);case 8:return(b,C)=>b.getFloat64(E(C)+_,!0)}}}function a(y,_){let M=e(y.pointDataRecordFormat);return _.reduce((E,b)=>{const C=M;M+=b.length;const N=r(y,C,b);if(!N)return E;const T=(k,K)=>t.Scale.unapply(N(k,K),b.scale,b.offset);return{...E,[b.name]:T}},{})}function n(y,_=[]){const m=a(y,_);return{...(()=>{const{pointDataRecordFormat:E}=y;switch(E){case 0:return i(y);case 1:return o(y);case 2:return s(y);case 3:return h(y);case 6:return c(y);case 7:return d(y);case 8:return f(y);default:throw new Error(`Unsupported point data record format: ${E}`)}})(),...m}}function i(y){const{scale:_,offset:m}=y,M=g(y);function E(N,T){return N.getUint8(M(T)+14)}function b(N,T){return N.getUint8(M(T)+15)}function C(N,T){return b(N,T)&31}return{X:(N,T)=>t.Scale.unapply(N.getInt32(M(T),!0),_[0],m[0]),Y:(N,T)=>t.Scale.unapply(N.getInt32(M(T)+4,!0),_[1],m[1]),Z:(N,T)=>t.Scale.unapply(N.getInt32(M(T)+8,!0),_[2],m[2]),Intensity:(N,T)=>N.getUint16(M(T)+12,!0),ReturnNumber:(N,T)=>E(N,T)&7,NumberOfReturns:(N,T)=>(E(N,T)&56)>>3,ScanDirectionFlag:(N,T)=>(E(N,T)&64)>>6,EdgeOfFlightLine:(N,T)=>(E(N,T)&128)>>7,Classification:(N,T)=>{const k=C(N,T);return k===12?0:k},Synthetic:(N,T)=>(b(N,T)&32)>>5,KeyPoint:(N,T)=>(b(N,T)&64)>>6,Withheld:(N,T)=>(b(N,T)&128)>>7,Overlap:(N,T)=>C(N,T)===12?1:0,ScanAngle:(N,T)=>N.getInt8(M(T)+16),UserData:(N,T)=>N.getUint8(M(T)+17),PointSourceId:(N,T)=>N.getUint16(M(T)+18,!0)}}function o(y){const _=g(y);return{...i(y),GpsTime:(m,M)=>m.getFloat64(_(M)+20,!0)}}function s(y){const _=g(y);return{...i(y),Red:(m,M)=>m.getUint16(_(M)+20,!0),Green:(m,M)=>m.getUint16(_(M)+22,!0),Blue:(m,M)=>m.getUint16(_(M)+24,!0)}}function h(y){const _=g(y);return{...i(y),GpsTime:(m,M)=>m.getFloat64(_(M)+20,!0),Red:(m,M)=>m.getUint16(_(M)+28,!0),Green:(m,M)=>m.getUint16(_(M)+30,!0),Blue:(m,M)=>m.getUint16(_(M)+32,!0)}}function c(y){const{scale:_,offset:m}=y,M=g(y);function E(b,C){return b.getUint8(M(C)+15)}return{X:(b,C)=>t.Scale.unapply(b.getInt32(M(C),!0),_[0],m[0]),Y:(b,C)=>t.Scale.unapply(b.getInt32(M(C)+4,!0),_[1],m[1]),Z:(b,C)=>t.Scale.unapply(b.getInt32(M(C)+8,!0),_[2],m[2]),Intensity:(b,C)=>b.getUint16(M(C)+12,!0),ReturnNumber:(b,C)=>b.getUint16(M(C)+14,!0)&15,NumberOfReturns:(b,C)=>(b.getUint16(M(C)+14,!0)&240)>>4,Synthetic:(b,C)=>E(b,C)&1,KeyPoint:(b,C)=>(E(b,C)&2)>>1,Withheld:(b,C)=>(E(b,C)&4)>>2,Overlap:(b,C)=>(E(b,C)&8)>>3,ScannerChannel:(b,C)=>(E(b,C)&48)>>4,ScanDirectionFlag:(b,C)=>(E(b,C)&64)>>6,EdgeOfFlightLine:(b,C)=>(E(b,C)&128)>>7,Classification:(b,C)=>b.getUint8(M(C)+16),UserData:(b,C)=>b.getUint8(M(C)+17),ScanAngle:(b,C)=>b.getInt16(M(C)+18,!0)*.006,PointSourceId:(b,C)=>b.getUint16(M(C)+20,!0),GpsTime:(b,C)=>b.getFloat64(M(C)+22,!0)}}function d(y){const _=g(y);return{...c(y),Red:(m,M)=>m.getUint16(_(M)+30,!0),Green:(m,M)=>m.getUint16(_(M)+32,!0),Blue:(m,M)=>m.getUint16(_(M)+34,!0)}}function f(y){const _=g(y);return{...d(y),Infrared:(m,M)=>m.getUint16(_(M)+36,!0)}}function g(y){const{pointDataRecordLength:_}=y;return function(M){return M*_}}return Ye}var Qe={},ue={},bn;function ko(){if(bn)return ue;bn=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.formatGuid=ue.parsePoint=void 0;const t=Lt();function e(a){const n=t.Binary.toDataView(a);if(n.byteLength!==24)throw new Error(`Invalid tuple buffer length: ${n.byteLength}`);return[n.getFloat64(0,!0),n.getFloat64(8,!0),n.getFloat64(16,!0)]}ue.parsePoint=e;function r(a){const n=t.Binary.toDataView(a);if(n.byteLength!==16)throw new Error(`Invalid GUID buffer length: ${n.byteLength}`);let i="";for(let o=0;o<n.byteLength;o+=4){const s=n.getUint32(o,!0);i+=s.toString(16).padStart(8,"0")}return[i.slice(0,8),i.slice(8,12),i.slice(12,16),i.slice(16,32)].join("-")}return ue.formatGuid=r,ue}var wn;function na(){if(wn)return Qe;wn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Header=void 0;const t=Lt(),e=xi(),r=ko();Qe.Header={parse:a};function a(o){if(o.byteLength<e.minHeaderLength)throw new Error(`Invalid header: must be at least ${e.minHeaderLength} bytes`);const s=t.Binary.toDataView(o),h=t.Binary.toCString(o.slice(0,4));if(h!=="LASF")throw new Error(`Invalid file signature: ${h}`);const c=s.getUint8(24),d=s.getUint8(25);if(c!==1||d!==2&&d!==4)throw new Error(`Invalid version (only 1.2 and 1.4 supported): ${c}.${d}`);const f={fileSignature:h,fileSourceId:s.getUint16(4,!0),globalEncoding:s.getUint16(6,!0),projectId:(0,r.formatGuid)(o.slice(8,24)),majorVersion:c,minorVersion:d,systemIdentifier:t.Binary.toCString(o.slice(26,58)),generatingSoftware:t.Binary.toCString(o.slice(58,90)),fileCreationDayOfYear:s.getUint16(90,!0),fileCreationYear:s.getUint16(92,!0),headerLength:s.getUint16(94,!0),pointDataOffset:s.getUint32(96,!0),vlrCount:s.getUint32(100,!0),pointDataRecordFormat:s.getUint8(104)&15,pointDataRecordLength:s.getUint16(105,!0),pointCount:s.getUint32(107,!0),pointCountByReturn:i(o.slice(111,131)),scale:(0,r.parsePoint)(o.slice(131,155)),offset:(0,r.parsePoint)(o.slice(155,179)),min:[s.getFloat64(187,!0),s.getFloat64(203,!0),s.getFloat64(219,!0)],max:[s.getFloat64(179,!0),s.getFloat64(195,!0),s.getFloat64(211,!0)],waveformDataOffset:0,evlrOffset:0,evlrCount:0};return d==2?f:{...f,pointCount:(0,t.parseBigInt)((0,t.getBigUint64)(s,247,!0)),pointCountByReturn:n(o.slice(255,375)),waveformDataOffset:(0,t.parseBigInt)((0,t.getBigUint64)(s,227,!0)),evlrOffset:(0,t.parseBigInt)((0,t.getBigUint64)(s,235,!0)),evlrCount:s.getUint32(243,!0)}}function n(o){const s=t.Binary.toDataView(o),h=[];for(let c=0;c<15*8;c+=8)h.push((0,t.getBigUint64)(s,c,!0));return h.map(c=>(0,t.parseBigInt)(c))}function i(o){const s=t.Binary.toDataView(o),h=[];for(let c=0;c<5*4;c+=4)h.push(s.getUint32(c,!0));return h}return Qe}var Vt={},Rt={},fi={exports:{}},xn;function qo(){return xn||(xn=1,function(t,e){var r=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n){n=n||{};var i=typeof n<"u"?n:{},o,s;i.ready=new Promise(function(l,u){o=l,s=u}),["_main","___getTypeName","__embind_initialize_bindings","_fflush","onRuntimeInitialized"].forEach(l=>{Object.getOwnPropertyDescriptor(i.ready,l)||Object.defineProperty(i.ready,l,{get:()=>mt("You are getting "+l+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>mt("You are setting "+l+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var h=Object.assign({},i),c="./this.program",d=!0;if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var f="";function g(l){return i.locateFile?i.locateFile(l,f):f+l}var y;if(typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var _=i.print||console.log.bind(console),m=i.printErr||console.warn.bind(console);Object.assign(i,h),h=null,_o(),i.arguments&&i.arguments,M("arguments","arguments_"),i.thisProgram&&(c=i.thisProgram),M("thisProgram","thisProgram"),i.quit&&i.quit,M("quit","quit_"),F(typeof i.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),F(typeof i.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),F(typeof i.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),F(typeof i.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),F(typeof i.read>"u","Module.read option was removed (modify read_ in JS)"),F(typeof i.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),F(typeof i.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),F(typeof i.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),F(typeof i.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),M("read","read_"),M("readAsync","readAsync"),M("readBinary","readBinary"),M("setWindowTitle","setWindowTitle"),F(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable."),F(!0,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),F(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");function M(l,u){Object.getOwnPropertyDescriptor(i,l)||Object.defineProperty(i,l,{configurable:!0,get:function(){mt("Module."+l+" has been replaced with plain "+u+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function E(l){Object.getOwnPropertyDescriptor(i,l)&&mt("`Module."+l+"` was supplied but `"+l+"` not included in INCOMING_MODULE_JS_API")}function b(l){return l==="FS_createPath"||l==="FS_createDataFile"||l==="FS_createPreloadedFile"||l==="FS_unlink"||l==="addRunDependency"||l==="FS_createLazyFile"||l==="FS_createDevice"||l==="removeRunDependency"}function C(l){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,l)&&Object.defineProperty(globalThis,l,{configurable:!0,get:function(){var u="`"+l+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";b(l)&&(u+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ne(u)}})}function N(l){Object.getOwnPropertyDescriptor(i,l)||Object.defineProperty(i,l,{configurable:!0,get:function(){var u="'"+l+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";b(l)&&(u+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),mt(u)}})}var T;i.wasmBinary&&(T=i.wasmBinary),M("wasmBinary","wasmBinary"),i.noExitRuntime,M("noExitRuntime","noExitRuntime"),typeof WebAssembly!="object"&&mt("no native wasm support detected");var k,K=!1;function F(l,u){l||mt("Assertion failed"+(u?": "+u:""))}var tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ut(l,u,v){for(var p=u+v,x=u;l[x]&&!(x>=p);)++x;if(x-u>16&&l.buffer&&tt)return tt.decode(l.subarray(u,x));for(var S="";u<x;){var A=l[u++];if(!(A&128)){S+=String.fromCharCode(A);continue}var P=l[u++]&63;if((A&224)==192){S+=String.fromCharCode((A&31)<<6|P);continue}var L=l[u++]&63;if((A&240)==224?A=(A&15)<<12|P<<6|L:((A&248)!=240&&ne("Invalid UTF-8 leading byte 0x"+A.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),A=(A&7)<<18|P<<12|L<<6|l[u++]&63),A<65536)S+=String.fromCharCode(A);else{var U=A-65536;S+=String.fromCharCode(55296|U>>10,56320|U&1023)}}return S}function _t(l,u){return l?ut(q,l,u):""}function nt(l,u,v,p){if(!(p>0))return 0;for(var x=v,S=v+p-1,A=0;A<l.length;++A){var P=l.charCodeAt(A);if(P>=55296&&P<=57343){var L=l.charCodeAt(++A);P=65536+((P&1023)<<10)|L&1023}if(P<=127){if(v>=S)break;u[v++]=P}else if(P<=2047){if(v+1>=S)break;u[v++]=192|P>>6,u[v++]=128|P&63}else if(P<=65535){if(v+2>=S)break;u[v++]=224|P>>12,u[v++]=128|P>>6&63,u[v++]=128|P&63}else{if(v+3>=S)break;P>1114111&&ne("Invalid Unicode code point 0x"+P.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),u[v++]=240|P>>18,u[v++]=128|P>>12&63,u[v++]=128|P>>6&63,u[v++]=128|P&63}}return u[v]=0,v-x}function Ie(l,u,v){return F(typeof v=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),nt(l,q,u,v)}function ye(l){for(var u=0,v=0;v<l.length;++v){var p=l.charCodeAt(v);p<=127?u++:p<=2047?u+=2:p>=55296&&p<=57343?(u+=4,++v):u+=3}return u}var w,O,q,V,Z,B,Y,ge,Re;function it(l){w=l,i.HEAP8=O=new Int8Array(l),i.HEAP16=V=new Int16Array(l),i.HEAP32=B=new Int32Array(l),i.HEAPU8=q=new Uint8Array(l),i.HEAPU16=Z=new Uint16Array(l),i.HEAPU32=Y=new Uint32Array(l),i.HEAPF32=ge=new Float32Array(l),i.HEAPF64=Re=new Float64Array(l)}var Tt=65536;i.TOTAL_STACK&&F(Tt===i.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Wr=i.INITIAL_MEMORY||262144;M("INITIAL_MEMORY","INITIAL_MEMORY"),F(Wr>=Tt,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Wr+"! (TOTAL_STACK="+Tt+")"),F(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),F(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),F(Wr==262144,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var Mr;function Ra(){var l=hi();F((l&3)==0),Y[l>>2]=34821223,Y[l+4>>2]=2310721022,Y[0]=1668509029}function Vr(){if(!K){var l=hi(),u=Y[l>>2],v=Y[l+4>>2];(u!=34821223||v!=2310721022)&&mt("Stack overflow! Stack cookie has been overwritten at 0x"+l.toString(16)+", expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+v.toString(16)+" 0x"+u.toString(16)),Y[0]!==1668509029&&mt("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var l=new Int16Array(1),u=new Int8Array(l.buffer);if(l[0]=25459,u[0]!==115||u[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})();var Ii=[],Ri=[],Ni=[],Yr=!1;function Na(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Da(i.preRun.shift());Qr(Ii)}function La(){F(!Yr),Yr=!0,Vr(),Qr(Ri)}function Fa(){if(Vr(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Ua(i.postRun.shift());Qr(Ni)}function Da(l){Ii.unshift(l)}function za(l){Ri.unshift(l)}function Ua(l){Ni.unshift(l)}F(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var re=0,ie=null,Ne=null,Le={};function Ba(l){re++,i.monitorRunDependencies&&i.monitorRunDependencies(re),F(!Le[l]),Le[l]=1,ie===null&&typeof setInterval<"u"&&(ie=setInterval(function(){if(K){clearInterval(ie),ie=null;return}var u=!1;for(var v in Le)u||(u=!0,m("still waiting on run dependencies:")),m("dependency: "+v);u&&m("(end of list)")},1e4))}function $a(l){if(re--,i.monitorRunDependencies&&i.monitorRunDependencies(re),F(Le[l]),delete Le[l],re==0&&(ie!==null&&(clearInterval(ie),ie=null),Ne)){var u=Ne;Ne=null,u()}}function mt(l){i.onAbort&&i.onAbort(l),l="Aborted("+l+")",m(l),K=!0;var u=new WebAssembly.RuntimeError(l);throw s(u),u}var Ct={error:function(){mt("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init:function(){Ct.error()},createDataFile:function(){Ct.error()},createPreloadedFile:function(){Ct.error()},createLazyFile:function(){Ct.error()},open:function(){Ct.error()},mkdev:function(){Ct.error()},registerDevice:function(){Ct.error()},analyzePath:function(){Ct.error()},loadFilesFromDB:function(){Ct.error()},ErrnoError:function(){Ct.error()}};i.FS_createDataFile=Ct.createDataFile,i.FS_createPreloadedFile=Ct.createPreloadedFile;var ka="data:application/octet-stream;base64,";function Li(l){return l.startsWith(ka)}function qa(l){return l.startsWith("file://")}function st(l,u){return function(){var v=l,p=u;return p=i.asm,F(Yr,"native function `"+v+"` called before runtime initialization"),p[l]||F(p[l],"exported native function `"+v+"` not found"),p[l].apply(null,arguments)}}var xt;xt="laz-perf.wasm",Li(xt)||(xt=g(xt));function Fi(l){try{if(l==xt&&T)return new Uint8Array(T);throw"both async and sync fetching of the wasm failed"}catch(u){mt(u)}}function ja(){return!T&&d&&typeof fetch=="function"?fetch(xt,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+xt+"'";return l.arrayBuffer()}).catch(function(){return Fi(xt)}):Promise.resolve().then(function(){return Fi(xt)})}function Ga(){var l={env:Ki,wasi_snapshot_preview1:Ki};function u(P,L){var U=P.exports;i.asm=U,k=i.asm.memory,F(k,"memory not found in wasm exports"),it(k.buffer),Mr=i.asm.__indirect_function_table,F(Mr,"table not found in wasm exports"),za(i.asm.__wasm_call_ctors),$a("wasm-instantiate")}Ba("wasm-instantiate");var v=i;function p(P){F(i===v,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),v=null,u(P.instance)}function x(P){return ja().then(function(L){return WebAssembly.instantiate(L,l)}).then(function(L){return L}).then(P,function(L){m("failed to asynchronously prepare wasm: "+L),qa(xt)&&m("warning: Loading from a file URI ("+xt+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),mt(L)})}function S(){return!T&&typeof WebAssembly.instantiateStreaming=="function"&&!Li(xt)&&typeof fetch=="function"?fetch(xt,{credentials:"same-origin"}).then(function(P){var L=WebAssembly.instantiateStreaming(P,l);return L.then(p,function(U){return m("wasm streaming compile failed: "+U),m("falling back to ArrayBuffer instantiation"),x(p)})}):x(p)}if(i.instantiateWasm)try{var A=i.instantiateWasm(l,u);return A}catch(P){return m("Module.instantiateWasm callback failed with error: "+P),!1}return S().catch(s),{}}function Qr(l){for(;l.length>0;)l.shift()(i)}function ne(l){ne.shown||(ne.shown={}),ne.shown[l]||(ne.shown[l]=1,m(l))}function Ha(l,u){F(l.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),O.set(l,u)}function Wa(l){return oi(l+24)+24}function Va(l){this.excPtr=l,this.ptr=l-24,this.set_type=function(u){Y[this.ptr+4>>2]=u},this.get_type=function(){return Y[this.ptr+4>>2]},this.set_destructor=function(u){Y[this.ptr+8>>2]=u},this.get_destructor=function(){return Y[this.ptr+8>>2]},this.set_refcount=function(u){B[this.ptr>>2]=u},this.set_caught=function(u){u=u?1:0,O[this.ptr+12>>0]=u},this.get_caught=function(){return O[this.ptr+12>>0]!=0},this.set_rethrown=function(u){u=u?1:0,O[this.ptr+13>>0]=u},this.get_rethrown=function(){return O[this.ptr+13>>0]!=0},this.init=function(u,v){this.set_adjusted_ptr(0),this.set_type(u),this.set_destructor(v),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var u=B[this.ptr>>2];B[this.ptr>>2]=u+1},this.release_ref=function(){var u=B[this.ptr>>2];return B[this.ptr>>2]=u-1,F(u>0),u===1},this.set_adjusted_ptr=function(u){Y[this.ptr+16>>2]=u},this.get_adjusted_ptr=function(){return Y[this.ptr+16>>2]},this.get_exception_ptr=function(){var u=Mo(this.get_type());if(u)return Y[this.excPtr>>2];var v=this.get_adjusted_ptr();return v!==0?v:this.excPtr}}function Ya(l,u,v){var p=new Va(l);throw p.init(u,v),l+" - Exception catching is disabled, this exception cannot be caught. Compile with -sNO_DISABLE_EXCEPTION_CATCHING or -sEXCEPTION_CATCHING_ALLOWED=[..] to catch."}function Qa(l,u,v,p,x){}function Xr(l){switch(l){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+l)}}function Xa(){for(var l=new Array(256),u=0;u<256;++u)l[u]=String.fromCharCode(u);Di=l}var Di=void 0;function Pt(l){for(var u="",v=l;q[v];)u+=Di[q[v++]];return u}var ve={},_e={},pr={},Ja=48,Ka=57;function zi(l){if(l===void 0)return"_unknown";l=l.replace(/[^a-zA-Z0-9_]/g,"$");var u=l.charCodeAt(0);return u>=Ja&&u<=Ka?"_"+l:l}function Ui(l,u){return l=zi(l),function(){return u.apply(this,arguments)}}function Jr(l,u){var v=Ui(u,function(p){this.name=u,this.message=p;var x=new Error(p).stack;x!==void 0&&(this.stack=this.toString()+`
`+x.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(l.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var me=void 0;function Q(l){throw new me(l)}var Bi=void 0;function br(l){throw new Bi(l)}function Fe(l,u,v){l.forEach(function(P){pr[P]=u});function p(P){var L=v(P);L.length!==l.length&&br("Mismatched type converter count");for(var U=0;U<l.length;++U)kt(l[U],L[U])}var x=new Array(u.length),S=[],A=0;u.forEach((P,L)=>{_e.hasOwnProperty(P)?x[L]=_e[P]:(S.push(P),ve.hasOwnProperty(P)||(ve[P]=[]),ve[P].push(()=>{x[L]=_e[P],++A,A===S.length&&p(x)}))}),S.length===0&&p(x)}function kt(l,u,v={}){if(!("argPackAdvance"in u))throw new TypeError("registerType registeredInstance requires argPackAdvance");var p=u.name;if(l||Q('type "'+p+'" must have a positive integer typeid pointer'),_e.hasOwnProperty(l)){if(v.ignoreDuplicateRegistrations)return;Q("Cannot register type '"+p+"' twice")}if(_e[l]=u,delete pr[l],ve.hasOwnProperty(l)){var x=ve[l];delete ve[l],x.forEach(S=>S())}}function Za(l,u,v,p,x){var S=Xr(v);u=Pt(u),kt(l,{name:u,fromWireType:function(A){return!!A},toWireType:function(A,P){return P?p:x},argPackAdvance:8,readValueFromPointer:function(A){var P;if(v===1)P=O;else if(v===2)P=V;else if(v===4)P=B;else throw new TypeError("Unknown boolean type size: "+u);return this.fromWireType(P[A>>S])},destructorFunction:null})}function ts(l){if(!(this instanceof Xt)||!(l instanceof Xt))return!1;for(var u=this.$$.ptrType.registeredClass,v=this.$$.ptr,p=l.$$.ptrType.registeredClass,x=l.$$.ptr;u.baseClass;)v=u.upcast(v),u=u.baseClass;for(;p.baseClass;)x=p.upcast(x),p=p.baseClass;return u===p&&v===x}function es(l){return{count:l.count,deleteScheduled:l.deleteScheduled,preservePointerOnDelete:l.preservePointerOnDelete,ptr:l.ptr,ptrType:l.ptrType,smartPtr:l.smartPtr,smartPtrType:l.smartPtrType}}function Kr(l){function u(v){return v.$$.ptrType.registeredClass.name}Q(u(l)+" instance already deleted")}var Zr=!1;function $i(l){}function rs(l){l.smartPtr?l.smartPtrType.rawDestructor(l.smartPtr):l.ptrType.registeredClass.rawDestructor(l.ptr)}function ki(l){l.count.value-=1;var u=l.count.value===0;u&&rs(l)}function qi(l,u,v){if(u===v)return l;if(v.baseClass===void 0)return null;var p=qi(l,u,v.baseClass);return p===null?null:v.downcast(p)}var ji={};function is(){return Object.keys(Ue).length}function ns(){var l=[];for(var u in Ue)Ue.hasOwnProperty(u)&&l.push(Ue[u]);return l}var De=[];function ti(){for(;De.length;){var l=De.pop();l.$$.deleteScheduled=!1,l.delete()}}var ze=void 0;function as(l){ze=l,De.length&&ze&&ze(ti)}function ss(){i.getInheritedInstanceCount=is,i.getLiveInheritedInstances=ns,i.flushPendingDeletes=ti,i.setDelayFunction=as}var Ue={};function os(l,u){for(u===void 0&&Q("ptr should not be undefined");l.baseClass;)u=l.upcast(u),l=l.baseClass;return u}function hs(l,u){return u=os(l,u),Ue[u]}function wr(l,u){(!u.ptrType||!u.ptr)&&br("makeClassHandle requires ptr and ptrType");var v=!!u.smartPtrType,p=!!u.smartPtr;return v!==p&&br("Both smartPtrType and smartPtr must be specified"),u.count={value:1},Be(Object.create(l,{$$:{value:u}}))}function Gi(l){var u=this.getPointee(l);if(!u)return this.destructor(l),null;var v=hs(this.registeredClass,u);if(v!==void 0){if(v.$$.count.value===0)return v.$$.ptr=u,v.$$.smartPtr=l,v.clone();var p=v.clone();return this.destructor(l),p}function x(){return this.isSmartPointer?wr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:u,smartPtrType:this,smartPtr:l}):wr(this.registeredClass.instancePrototype,{ptrType:this,ptr:l})}var S=this.registeredClass.getActualType(u),A=ji[S];if(!A)return x.call(this);var P;this.isConst?P=A.constPointerType:P=A.pointerType;var L=qi(u,this.registeredClass,P.registeredClass);return L===null?x.call(this):this.isSmartPointer?wr(P.registeredClass.instancePrototype,{ptrType:P,ptr:L,smartPtrType:this,smartPtr:l}):wr(P.registeredClass.instancePrototype,{ptrType:P,ptr:L})}function Be(l){return typeof FinalizationRegistry>"u"?(Be=u=>u,l):(Zr=new FinalizationRegistry(u=>{console.warn(u.leakWarning.stack.replace(/^Error: /,"")),ki(u.$$)}),Be=u=>{var v=u.$$,p=!!v.smartPtr;if(p){var x={$$:v},S=v.ptrType.registeredClass;x.leakWarning=new Error("Embind found a leaked C++ instance "+S.name+" <0x"+v.ptr.toString(16)+`>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`),"captureStackTrace"in Error&&Error.captureStackTrace(x.leakWarning,Gi),Zr.register(u,x,u)}return u},$i=u=>Zr.unregister(u),Be(l))}function ls(){if(this.$$.ptr||Kr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var l=Be(Object.create(Object.getPrototypeOf(this),{$$:{value:es(this.$$)}}));return l.$$.count.value+=1,l.$$.deleteScheduled=!1,l}function us(){this.$$.ptr||Kr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),$i(this),ki(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function cs(){return!this.$$.ptr}function fs(){return this.$$.ptr||Kr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),De.push(this),De.length===1&&ze&&ze(ti),this.$$.deleteScheduled=!0,this}function ds(){Xt.prototype.isAliasOf=ts,Xt.prototype.clone=ls,Xt.prototype.delete=us,Xt.prototype.isDeleted=cs,Xt.prototype.deleteLater=fs}function Xt(){}function Hi(l,u,v){if(l[u].overloadTable===void 0){var p=l[u];l[u]=function(){return l[u].overloadTable.hasOwnProperty(arguments.length)||Q("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+l[u].overloadTable+")!"),l[u].overloadTable[arguments.length].apply(this,arguments)},l[u].overloadTable=[],l[u].overloadTable[p.argCount]=p}}function ys(l,u,v){i.hasOwnProperty(l)?(Q("Cannot register public name '"+l+"' twice"),Hi(i,l,l),i.hasOwnProperty(v)&&Q("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),i[l].overloadTable[v]=u):i[l]=u}function gs(l,u,v,p,x,S,A,P){this.name=l,this.constructor=u,this.instancePrototype=v,this.rawDestructor=p,this.baseClass=x,this.getActualType=S,this.upcast=A,this.downcast=P,this.pureVirtualFunctions=[]}function ei(l,u,v){for(;u!==v;)u.upcast||Q("Expected null or instance of "+v.name+", got an instance of "+u.name),l=u.upcast(l),u=u.baseClass;return l}function vs(l,u){if(u===null)return this.isReference&&Q("null is not a valid "+this.name),0;u.$$||Q('Cannot pass "'+pe(u)+'" as a '+this.name),u.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);var v=u.$$.ptrType.registeredClass,p=ei(u.$$.ptr,v,this.registeredClass);return p}function _s(l,u){var v;if(u===null)return this.isReference&&Q("null is not a valid "+this.name),this.isSmartPointer?(v=this.rawConstructor(),l!==null&&l.push(this.rawDestructor,v),v):0;u.$$||Q('Cannot pass "'+pe(u)+'" as a '+this.name),u.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&u.$$.ptrType.isConst&&Q("Cannot convert argument of type "+(u.$$.smartPtrType?u.$$.smartPtrType.name:u.$$.ptrType.name)+" to parameter type "+this.name);var p=u.$$.ptrType.registeredClass;if(v=ei(u.$$.ptr,p,this.registeredClass),this.isSmartPointer)switch(u.$$.smartPtr===void 0&&Q("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:u.$$.smartPtrType===this?v=u.$$.smartPtr:Q("Cannot convert argument of type "+(u.$$.smartPtrType?u.$$.smartPtrType.name:u.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:v=u.$$.smartPtr;break;case 2:if(u.$$.smartPtrType===this)v=u.$$.smartPtr;else{var x=u.clone();v=this.rawShare(v,ai.toHandle(function(){x.delete()})),l!==null&&l.push(this.rawDestructor,v)}break;default:Q("Unsupporting sharing policy")}return v}function ms(l,u){if(u===null)return this.isReference&&Q("null is not a valid "+this.name),0;u.$$||Q('Cannot pass "'+pe(u)+'" as a '+this.name),u.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name),u.$$.ptrType.isConst&&Q("Cannot convert argument of type "+u.$$.ptrType.name+" to parameter type "+this.name);var v=u.$$.ptrType.registeredClass,p=ei(u.$$.ptr,v,this.registeredClass);return p}function xr(l){return this.fromWireType(B[l>>2])}function Ms(l){return this.rawGetPointee&&(l=this.rawGetPointee(l)),l}function ps(l){this.rawDestructor&&this.rawDestructor(l)}function bs(l){l!==null&&l.delete()}function ws(){qt.prototype.getPointee=Ms,qt.prototype.destructor=ps,qt.prototype.argPackAdvance=8,qt.prototype.readValueFromPointer=xr,qt.prototype.deleteObject=bs,qt.prototype.fromWireType=Gi}function qt(l,u,v,p,x,S,A,P,L,U,H){this.name=l,this.registeredClass=u,this.isReference=v,this.isConst=p,this.isSmartPointer=x,this.pointeeType=S,this.sharingPolicy=A,this.rawGetPointee=P,this.rawConstructor=L,this.rawShare=U,this.rawDestructor=H,!x&&u.baseClass===void 0?p?(this.toWireType=vs,this.destructorFunction=null):(this.toWireType=ms,this.destructorFunction=null):this.toWireType=_s}function xs(l,u,v){i.hasOwnProperty(l)||br("Replacing nonexistant public symbol"),i[l].overloadTable!==void 0&&v!==void 0||(i[l]=u,i[l].argCount=v)}function Es(l,u,v){F("dynCall_"+l in i,"bad function pointer type - no table for sig '"+l+"'"),v&&v.length?F(v.length===l.substring(1).replace(/j/g,"--").length):F(l.length==1);var p=i["dynCall_"+l];return v&&v.length?p.apply(null,[u].concat(v)):p.call(null,u)}var Er=[];function ri(l){var u=Er[l];return u||(l>=Er.length&&(Er.length=l+1),Er[l]=u=Mr.get(l)),F(Mr.get(l)==u,"JavaScript-side Wasm function table mirror is out of date!"),u}function Cs(l,u,v){if(l.includes("j"))return Es(l,u,v);F(ri(u),"missing table entry in dynCall: "+u);var p=ri(u).apply(null,v);return p}function Ps(l,u){F(l.includes("j")||l.includes("p"),"getDynCaller should only be called with i64 sigs");var v=[];return function(){return v.length=0,Object.assign(v,arguments),Cs(l,u,v)}}function Me(l,u){l=Pt(l);function v(){return l.includes("j")?Ps(l,u):ri(u)}var p=v();return typeof p!="function"&&Q("unknown function pointer with signature "+l+": "+u),p}var Wi=void 0;function Ss(l){var u=mo(l),v=Pt(u);return Jt(u),v}function ii(l,u){var v=[],p={};function x(S){if(!p[S]&&!_e[S]){if(pr[S]){pr[S].forEach(x);return}v.push(S),p[S]=!0}}throw u.forEach(x),new Wi(l+": "+v.map(Ss).join([", "]))}function Ts(l,u,v,p,x,S,A,P,L,U,H,W,G){H=Pt(H),S=Me(x,S),P&&(P=Me(A,P)),U&&(U=Me(L,U)),G=Me(W,G);var rt=zi(H);ys(rt,function(){ii("Cannot construct "+H+" due to unbound types",[p])}),Fe([l,u,v],p?[p]:[],function(ct){ct=ct[0];var at,At;p?(at=ct.registeredClass,At=at.instancePrototype):At=Xt.prototype;var Dt=Ui(rt,function(){if(Object.getPrototypeOf(this)!==R)throw new me("Use 'new' to construct "+H);if($.constructor_body===void 0)throw new me(H+" has no accessible constructor");var Sr=$.constructor_body[arguments.length];if(Sr===void 0)throw new me("Tried to invoke ctor of "+H+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys($.constructor_body).toString()+") parameters instead!");return Sr.apply(this,arguments)}),R=Object.create(At,{constructor:{value:Dt}});Dt.prototype=R;var $=new gs(H,Dt,R,G,at,S,P,U),ft=new qt(H,$,!0,!1,!1),ot=new qt(H+"*",$,!1,!1,!1),ae=new qt(H+" const*",$,!1,!0,!1);return ji[l]={pointerType:ot,constPointerType:ae},xs(rt,Dt),[ft,ot,ae]})}function Vi(l,u){for(var v=[],p=0;p<l;p++)v.push(Y[u+p*4>>2]);return v}function As(l){for(;l.length;){var u=l.pop(),v=l.pop();v(u)}}function Yi(l,u,v,p,x){var S=u.length;S<2&&Q("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var A=u[1]!==null&&v!==null,P=!1,L=1;L<u.length;++L)if(u[L]!==null&&u[L].destructorFunction===void 0){P=!0;break}var U=u[0].name!=="void",H=S-2,W=new Array(H),G=[],rt=[];return function(){arguments.length!==H&&Q("function "+l+" called with "+arguments.length+" arguments, expected "+H+" args!"),rt.length=0;var ct;G.length=A?2:1,G[0]=x,A&&(ct=u[1].toWireType(rt,this),G[1]=ct);for(var at=0;at<H;++at)W[at]=u[at+2].toWireType(rt,arguments[at]),G.push(W[at]);var At=p.apply(null,G);function Dt(R){if(P)As(rt);else for(var $=A?1:2;$<u.length;$++){var ft=$===1?ct:W[$-2];u[$].destructorFunction!==null&&u[$].destructorFunction(ft)}if(U)return u[0].fromWireType(R)}return Dt(At)}}function Os(l,u,v,p,x,S){F(u>0);var A=Vi(u,v);x=Me(p,x),Fe([],[l],function(P){P=P[0];var L="constructor "+P.name;if(P.registeredClass.constructor_body===void 0&&(P.registeredClass.constructor_body=[]),P.registeredClass.constructor_body[u-1]!==void 0)throw new me("Cannot register multiple constructors with identical number of parameters ("+(u-1)+") for class '"+P.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return P.registeredClass.constructor_body[u-1]=()=>{ii("Cannot construct "+P.name+" due to unbound types",A)},Fe([],A,function(U){return U.splice(1,0,null),P.registeredClass.constructor_body[u-1]=Yi(L,U,null,x,S),[]}),[]})}function Is(l,u,v,p,x,S,A,P){var L=Vi(v,p);u=Pt(u),S=Me(x,S),Fe([],[l],function(U){U=U[0];var H=U.name+"."+u;u.startsWith("@@")&&(u=Symbol[u.substring(2)]),P&&U.registeredClass.pureVirtualFunctions.push(u);function W(){ii("Cannot call "+H+" due to unbound types",L)}var G=U.registeredClass.instancePrototype,rt=G[u];return rt===void 0||rt.overloadTable===void 0&&rt.className!==U.name&&rt.argCount===v-2?(W.argCount=v-2,W.className=U.name,G[u]=W):(Hi(G,u,H),G[u].overloadTable[v-2]=W),Fe([],L,function(ct){var at=Yi(H,ct,U,S,A);return G[u].overloadTable===void 0?(at.argCount=v-2,G[u]=at):G[u].overloadTable[v-2]=at,[]}),[]})}var ni=[],Ft=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Rs(l){l>4&&--Ft[l].refcount===0&&(Ft[l]=void 0,ni.push(l))}function Ns(){for(var l=0,u=5;u<Ft.length;++u)Ft[u]!==void 0&&++l;return l}function Ls(){for(var l=5;l<Ft.length;++l)if(Ft[l]!==void 0)return Ft[l];return null}function Fs(){i.count_emval_handles=Ns,i.get_first_emval=Ls}var ai={toValue:l=>(l||Q("Cannot use deleted val. handle = "+l),Ft[l].value),toHandle:l=>{switch(l){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var u=ni.length?ni.pop():Ft.length;return Ft[u]={refcount:1,value:l},u}}}};function Ds(l,u){u=Pt(u),kt(l,{name:u,fromWireType:function(v){var p=ai.toValue(v);return Rs(v),p},toWireType:function(v,p){return ai.toHandle(p)},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:null})}function pe(l){if(l===null)return"null";var u=typeof l;return u==="object"||u==="array"||u==="function"?l.toString():""+l}function zs(l,u){switch(u){case 2:return function(v){return this.fromWireType(ge[v>>2])};case 3:return function(v){return this.fromWireType(Re[v>>3])};default:throw new TypeError("Unknown float type: "+l)}}function Us(l,u,v){var p=Xr(v);u=Pt(u),kt(l,{name:u,fromWireType:function(x){return x},toWireType:function(x,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+pe(S)+'" to '+this.name);return S},argPackAdvance:8,readValueFromPointer:zs(u,p),destructorFunction:null})}function Bs(l,u,v){switch(u){case 0:return v?function(x){return O[x]}:function(x){return q[x]};case 1:return v?function(x){return V[x>>1]}:function(x){return Z[x>>1]};case 2:return v?function(x){return B[x>>2]}:function(x){return Y[x>>2]};default:throw new TypeError("Unknown integer type: "+l)}}function $s(l,u,v,p,x){u=Pt(u),x===-1&&(x=4294967295);var S=Xr(v),A=W=>W;if(p===0){var P=32-8*v;A=W=>W<<P>>>P}var L=u.includes("unsigned"),U=(W,G)=>{if(typeof W!="number"&&typeof W!="boolean")throw new TypeError('Cannot convert "'+pe(W)+'" to '+G);if(W<p||W>x)throw new TypeError('Passing a number "'+pe(W)+'" from JS side to C/C++ side to an argument of type "'+u+'", which is outside the valid range ['+p+", "+x+"]!")},H;L?H=function(W,G){return U(G,this.name),G>>>0}:H=function(W,G){return U(G,this.name),G},kt(l,{name:u,fromWireType:A,toWireType:H,argPackAdvance:8,readValueFromPointer:Bs(u,S,p!==0),destructorFunction:null})}function ks(l,u,v){var p=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],x=p[u];function S(A){A=A>>2;var P=Y,L=P[A],U=P[A+1];return new x(w,U,L)}v=Pt(v),kt(l,{name:v,fromWireType:S,argPackAdvance:8,readValueFromPointer:S},{ignoreDuplicateRegistrations:!0})}function qs(l,u){u=Pt(u);var v=u==="std::string";kt(l,{name:u,fromWireType:function(p){var x=Y[p>>2],S=p+4,A;if(v)for(var P=S,L=0;L<=x;++L){var U=S+L;if(L==x||q[U]==0){var H=U-P,W=_t(P,H);A===void 0?A=W:(A+="\0",A+=W),P=U+1}}else{for(var G=new Array(x),L=0;L<x;++L)G[L]=String.fromCharCode(q[S+L]);A=G.join("")}return Jt(p),A},toWireType:function(p,x){x instanceof ArrayBuffer&&(x=new Uint8Array(x));var S,A=typeof x=="string";A||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int8Array||Q("Cannot pass non-string to std::string"),v&&A?S=ye(x):S=x.length;var P=oi(4+S+1),L=P+4;if(Y[P>>2]=S,v&&A)Ie(x,L,S+1);else if(A)for(var U=0;U<S;++U){var H=x.charCodeAt(U);H>255&&(Jt(L),Q("String has UTF-16 code units that do not fit in 8 bits")),q[L+U]=H}else for(var U=0;U<S;++U)q[L+U]=x[U];return p!==null&&p.push(Jt,P),P},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:function(p){Jt(p)}})}var Qi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function js(l,u){F(l%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var v=l,p=v>>1,x=p+u/2;!(p>=x)&&Z[p];)++p;if(v=p<<1,v-l>32&&Qi)return Qi.decode(q.subarray(l,v));for(var S="",A=0;!(A>=u/2);++A){var P=V[l+A*2>>1];if(P==0)break;S+=String.fromCharCode(P)}return S}function Gs(l,u,v){if(F(u%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),F(typeof v=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),v===void 0&&(v=2147483647),v<2)return 0;v-=2;for(var p=u,x=v<l.length*2?v/2:l.length,S=0;S<x;++S){var A=l.charCodeAt(S);V[u>>1]=A,u+=2}return V[u>>1]=0,u-p}function Hs(l){return l.length*2}function Ws(l,u){F(l%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var v=0,p="";!(v>=u/4);){var x=B[l+v*4>>2];if(x==0)break;if(++v,x>=65536){var S=x-65536;p+=String.fromCharCode(55296|S>>10,56320|S&1023)}else p+=String.fromCharCode(x)}return p}function Vs(l,u,v){if(F(u%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),F(typeof v=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),v===void 0&&(v=2147483647),v<4)return 0;for(var p=u,x=p+v-4,S=0;S<l.length;++S){var A=l.charCodeAt(S);if(A>=55296&&A<=57343){var P=l.charCodeAt(++S);A=65536+((A&1023)<<10)|P&1023}if(B[u>>2]=A,u+=4,u+4>x)break}return B[u>>2]=0,u-p}function Ys(l){for(var u=0,v=0;v<l.length;++v){var p=l.charCodeAt(v);p>=55296&&p<=57343&&++v,u+=4}return u}function Qs(l,u,v){v=Pt(v);var p,x,S,A,P;u===2?(p=js,x=Gs,A=Hs,S=()=>Z,P=1):u===4&&(p=Ws,x=Vs,A=Ys,S=()=>Y,P=2),kt(l,{name:v,fromWireType:function(L){for(var U=Y[L>>2],H=S(),W,G=L+4,rt=0;rt<=U;++rt){var ct=L+4+rt*u;if(rt==U||H[ct>>P]==0){var at=ct-G,At=p(G,at);W===void 0?W=At:(W+="\0",W+=At),G=ct+u}}return Jt(L),W},toWireType:function(L,U){typeof U!="string"&&Q("Cannot pass non-string to C++ string type "+v);var H=A(U),W=oi(4+H+u);return Y[W>>2]=H>>P,x(U,W+4,H+u),L!==null&&L.push(Jt,W),W},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:function(L){Jt(L)}})}function Xs(l,u){u=Pt(u),kt(l,{isVoid:!0,name:u,argPackAdvance:0,fromWireType:function(){},toWireType:function(v,p){}})}function Js(){mt("native code called abort()")}function Ks(l,u,v){q.copyWithin(l,u,u+v)}function Zs(){return 2147483648}function to(l){try{return k.grow(l-w.byteLength+65535>>>16),it(k.buffer),1}catch(u){m("emscripten_realloc_buffer: Attempted to grow heap from "+w.byteLength+" bytes to "+l+" bytes, but got error: "+u)}}function eo(l){var u=q.length;l=l>>>0,F(l>u);var v=Zs();if(l>v)return m("Cannot enlarge memory, asked to go up to "+l+" bytes, but the limit is "+v+" bytes!"),!1;let p=(L,U)=>L+(U-L%U)%U;for(var x=1;x<=4;x*=2){var S=u*(1+.2/x);S=Math.min(S,l+100663296);var A=Math.min(v,p(Math.max(l,S),65536)),P=to(A);if(P)return!0}return m("Failed to grow the heap from "+u+" bytes to "+A+" bytes, not enough memory!"),!1}var si={};function ro(){return c||"./this.program"}function $e(){if(!$e.strings){var l=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",u={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:l,_:ro()};for(var v in si)si[v]===void 0?delete u[v]:u[v]=si[v];var p=[];for(var v in u)p.push(v+"="+u[v]);$e.strings=p}return $e.strings}function io(l,u,v){for(var p=0;p<l.length;++p)F(l.charCodeAt(p)===(l.charCodeAt(p)&255)),O[u++>>0]=l.charCodeAt(p);O[u>>0]=0}function no(l,u){var v=0;return $e().forEach(function(p,x){var S=u+v;Y[l+x*4>>2]=S,io(p,S),v+=p.length+1}),0}function ao(l,u){var v=$e();Y[l>>2]=v.length;var p=0;return v.forEach(function(x){p+=x.length+1}),Y[u>>2]=p,0}function so(l){mt("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")}function oo(l,u,v,p,x){return 70}var ho=[null,[],[]];function lo(l,u){var v=ho[l];F(v),u===0||u===10?((l===1?_:m)(ut(v,0)),v.length=0):v.push(u)}function uo(l,u,v,p){for(var x=0,S=0;S<v;S++){var A=Y[u>>2],P=Y[u+4>>2];u+=8;for(var L=0;L<P;L++)lo(l,q[A+L]);x+=P}return Y[p>>2]=x,0}function Cr(l){return l%4===0&&(l%100!==0||l%400===0)}function co(l,u){for(var v=0,p=0;p<=u;v+=l[p++]);return v}var Xi=[31,29,31,30,31,30,31,31,30,31,30,31],Ji=[31,28,31,30,31,30,31,31,30,31,30,31];function fo(l,u){for(var v=new Date(l.getTime());u>0;){var p=Cr(v.getFullYear()),x=v.getMonth(),S=(p?Xi:Ji)[x];if(u>S-v.getDate())u-=S-v.getDate()+1,v.setDate(1),x<11?v.setMonth(x+1):(v.setMonth(0),v.setFullYear(v.getFullYear()+1));else return v.setDate(v.getDate()+u),v}return v}function yo(l,u,v){var p=ye(l)+1,x=new Array(p);return nt(l,x,0,x.length),x}function go(l,u,v,p){var x=B[p+40>>2],S={tm_sec:B[p>>2],tm_min:B[p+4>>2],tm_hour:B[p+8>>2],tm_mday:B[p+12>>2],tm_mon:B[p+16>>2],tm_year:B[p+20>>2],tm_wday:B[p+24>>2],tm_yday:B[p+28>>2],tm_isdst:B[p+32>>2],tm_gmtoff:B[p+36>>2],tm_zone:x?_t(x):""},A=_t(v),P={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var L in P)A=A.replace(new RegExp(L,"g"),P[L]);var U=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],H=["January","February","March","April","May","June","July","August","September","October","November","December"];function W(R,$,ft){for(var ot=typeof R=="number"?R.toString():R||"";ot.length<$;)ot=ft[0]+ot;return ot}function G(R,$){return W(R,$,"0")}function rt(R,$){function ft(ae){return ae<0?-1:ae>0?1:0}var ot;return(ot=ft(R.getFullYear()-$.getFullYear()))===0&&(ot=ft(R.getMonth()-$.getMonth()))===0&&(ot=ft(R.getDate()-$.getDate())),ot}function ct(R){switch(R.getDay()){case 0:return new Date(R.getFullYear()-1,11,29);case 1:return R;case 2:return new Date(R.getFullYear(),0,3);case 3:return new Date(R.getFullYear(),0,2);case 4:return new Date(R.getFullYear(),0,1);case 5:return new Date(R.getFullYear()-1,11,31);case 6:return new Date(R.getFullYear()-1,11,30)}}function at(R){var $=fo(new Date(R.tm_year+1900,0,1),R.tm_yday),ft=new Date($.getFullYear(),0,4),ot=new Date($.getFullYear()+1,0,4),ae=ct(ft),Sr=ct(ot);return rt(ae,$)<=0?rt(Sr,$)<=0?$.getFullYear()+1:$.getFullYear():$.getFullYear()-1}var At={"%a":function(R){return U[R.tm_wday].substring(0,3)},"%A":function(R){return U[R.tm_wday]},"%b":function(R){return H[R.tm_mon].substring(0,3)},"%B":function(R){return H[R.tm_mon]},"%C":function(R){var $=R.tm_year+1900;return G($/100|0,2)},"%d":function(R){return G(R.tm_mday,2)},"%e":function(R){return W(R.tm_mday,2," ")},"%g":function(R){return at(R).toString().substring(2)},"%G":function(R){return at(R)},"%H":function(R){return G(R.tm_hour,2)},"%I":function(R){var $=R.tm_hour;return $==0?$=12:$>12&&($-=12),G($,2)},"%j":function(R){return G(R.tm_mday+co(Cr(R.tm_year+1900)?Xi:Ji,R.tm_mon-1),3)},"%m":function(R){return G(R.tm_mon+1,2)},"%M":function(R){return G(R.tm_min,2)},"%n":function(){return`
`},"%p":function(R){return R.tm_hour>=0&&R.tm_hour<12?"AM":"PM"},"%S":function(R){return G(R.tm_sec,2)},"%t":function(){return"	"},"%u":function(R){return R.tm_wday||7},"%U":function(R){var $=R.tm_yday+7-R.tm_wday;return G(Math.floor($/7),2)},"%V":function(R){var $=Math.floor((R.tm_yday+7-(R.tm_wday+6)%7)/7);if((R.tm_wday+371-R.tm_yday-2)%7<=2&&$++,$){if($==53){var ot=(R.tm_wday+371-R.tm_yday)%7;ot!=4&&(ot!=3||!Cr(R.tm_year))&&($=1)}}else{$=52;var ft=(R.tm_wday+7-R.tm_yday-1)%7;(ft==4||ft==5&&Cr(R.tm_year%400-1))&&$++}return G($,2)},"%w":function(R){return R.tm_wday},"%W":function(R){var $=R.tm_yday+7-(R.tm_wday+6)%7;return G(Math.floor($/7),2)},"%y":function(R){return(R.tm_year+1900).toString().substring(2)},"%Y":function(R){return R.tm_year+1900},"%z":function(R){var $=R.tm_gmtoff,ft=$>=0;return $=Math.abs($)/60,$=$/60*100+$%60,(ft?"+":"-")+("0000"+$).slice(-4)},"%Z":function(R){return R.tm_zone},"%%":function(){return"%"}};A=A.replace(/%%/g,"\0\0");for(var L in At)A.includes(L)&&(A=A.replace(new RegExp(L,"g"),At[L](S)));A=A.replace(/\0\0/g,"%");var Dt=yo(A);return Dt.length>u?0:(Ha(Dt,l),Dt.length-1)}function vo(l,u,v,p){return go(l,u,v,p)}Xa(),me=i.BindingError=Jr(Error,"BindingError"),Bi=i.InternalError=Jr(Error,"InternalError"),ds(),ss(),ws(),Wi=i.UnboundTypeError=Jr(Error,"UnboundTypeError"),Fs();function _o(){E("fetchSettings")}var Ki={__cxa_allocate_exception:Wa,__cxa_throw:Ya,_embind_register_bigint:Qa,_embind_register_bool:Za,_embind_register_class:Ts,_embind_register_class_constructor:Os,_embind_register_class_function:Is,_embind_register_emval:Ds,_embind_register_float:Us,_embind_register_integer:$s,_embind_register_memory_view:ks,_embind_register_std_string:qs,_embind_register_std_wstring:Qs,_embind_register_void:Xs,abort:Js,emscripten_memcpy_big:Ks,emscripten_resize_heap:eo,environ_get:no,environ_sizes_get:ao,fd_close:so,fd_seek:oo,fd_write:uo,strftime_l:vo};Ga(),i.___wasm_call_ctors=st("__wasm_call_ctors");var oi=i._malloc=st("malloc"),Jt=i._free=st("free"),mo=i.___getTypeName=st("__getTypeName");i.__embind_initialize_bindings=st("_embind_initialize_bindings"),i.___errno_location=st("__errno_location"),i._fflush=st("fflush");var Zi=i._emscripten_stack_init=function(){return(Zi=i._emscripten_stack_init=i.asm.emscripten_stack_init).apply(null,arguments)};i._emscripten_stack_get_free=function(){return(i._emscripten_stack_get_free=i.asm.emscripten_stack_get_free).apply(null,arguments)},i._emscripten_stack_get_base=function(){return(i._emscripten_stack_get_base=i.asm.emscripten_stack_get_base).apply(null,arguments)};var hi=i._emscripten_stack_get_end=function(){return(hi=i._emscripten_stack_get_end=i.asm.emscripten_stack_get_end).apply(null,arguments)};i.stackSave=st("stackSave"),i.stackRestore=st("stackRestore"),i.stackAlloc=st("stackAlloc");var Mo=i.___cxa_is_pointer_type=st("__cxa_is_pointer_type");i.dynCall_viijii=st("dynCall_viijii"),i.dynCall_ji=st("dynCall_ji"),i.dynCall_jiji=st("dynCall_jiji"),i.dynCall_iiiiij=st("dynCall_iiiiij"),i.dynCall_iiiiijj=st("dynCall_iiiiijj"),i.dynCall_iiiiiijj=st("dynCall_iiiiiijj");var po=["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","print","printErr","callMain","abort","keepRuntimeAlive","wasmMemory","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readAsmConstArgsArray","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","ExitStatus","getEnvStrings","checkWasiClock","flush_NO_FILESYSTEM","dlopenMissingError","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","FS","MEMFS","TTY","PIPEFS","SOCKFS","_setNetworkCallback","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","InternalError","BindingError","UnboundTypeError","PureVirtualError","init_embind","throwInternalError","throwBindingError","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","registeredTypes","awaitingDependencies","typeDependencies","registeredPointers","registerType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","heap32VectorToArray","requireRegisteredType","getShiftFromSize","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","runDestructors","new_","craftInvokerFunction","embind__requireFunction","tupleRegistrations","structRegistrations","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","deletionQueue","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","delayFunction","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_handle_array","emval_free_list","emval_symbols","init_emval","count_emval_handles","get_first_emval","getStringOrSymbol","Emval","emval_newers","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_methodCallers","emval_addMethodCaller","emval_registeredMethods"];po.forEach(N);var bo=["ptrToString","zeroMemory","stringToNewUTF8","exitJS","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getRandomDevice","traverseStack","convertPCtoSourceLocation","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","listenOnce","autoResumeAudioContext","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","reallyNegative","unSign","strLen","reSign","formatString","getSocketFromFD","getSocketAddress","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","checkWasiClock","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","exception_addRef","exception_decRef","setMainLoop","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","registerInheritedInstance","unregisterInheritedInstance","requireRegisteredType","enumReadValueFromPointer","validateThis","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];bo.forEach(C);var Pr;Ne=function l(){Pr||tn(),Pr||(Ne=l)};function wo(){Zi(),Ra()}function tn(l){if(re>0||(wo(),Na(),re>0))return;function u(){Pr||(Pr=!0,i.calledRun=!0,!K&&(La(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),F(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Fa()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),u()},1)):u(),Vr()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return tn(),n.ready}})();t.exports=r}(fi)),fi.exports}var En;function jo(){if(En)return Rt;En=1;var t=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.LazPerf=Rt.create=Rt.createLazPerf=void 0;const e=t(qo());return Rt.createLazPerf=e.default,Rt.create=e.default,Rt.LazPerf={create:e.default},Rt}var Cn;function Go(){if(Cn)return Vt;Cn=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.decompressFile=Vt.decompressChunk=Vt.PointData=void 0;const t=jo(),e=na();Vt.PointData={createLazPerf:t.createLazPerf,decompressChunk:n,decompressFile:i};let r;async function a(o){return o||(r||(r=(0,t.createLazPerf)()),r)}async function n(o,{pointCount:s,pointDataRecordFormat:h,pointDataRecordLength:c},d){const f=await a(d),g=new Uint8Array(s*c),y=f._malloc(o.byteLength),_=f._malloc(c),m=new f.ChunkDecoder;try{f.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,o.byteLength),y),m.open(h,c,y);for(let M=0;M<s;++M)m.getPoint(_),g.set(new Uint8Array(f.HEAPU8.buffer,_,c),M*c)}finally{f._free(y),f._free(_),m.delete()}return g}Vt.decompressChunk=n;async function i(o,s){const h=await a(s),c=e.Header.parse(o),{pointCount:d,pointDataRecordLength:f}=c,g=new Uint8Array(d*f),y=h._malloc(o.byteLength),_=h._malloc(f),m=new h.LASZip;try{h.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,o.byteLength),y),m.open(y,o.byteLength);for(let M=0;M<d;++M)m.getPoint(_),g.set(new Uint8Array(h.HEAPU8.buffer,_,f),M*f)}finally{m.delete()}return g}return Vt.decompressFile=i,Vt}var Xe={},Pn;function Ho(){if(Pn)return Xe;Pn=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.View=void 0;const t=Lt(),e=ra(),r=ia();Xe.View={create:a};function a(n,i,o=[],s){let h=r.Extractor.create(i,o);if(s){const _=new Set([...s]);h=Object.entries(h).reduce((m,[M,E])=>(_.has(M)&&(m[M]=E),m),{})}const c=e.Dimensions.create(h,o),d=t.Binary.toDataView(n),f=i.pointDataRecordLength;if(d.byteLength%f!==0)throw new Error(`Invalid buffer length (${d.byteLength}) for point length ${f}`);const g=d.byteLength/i.pointDataRecordLength;function y(_){const m=h[_];if(!m)throw new Error(`No extractor for dimension: ${_}`);return function(M){if(M>=g)throw new RangeError(`View index (${M}) out of range: ${g}`);return m(d,M)}}return{pointCount:g,dimensions:c,getter:y}}return Xe}var Je={},Sn;function Wo(){if(Sn)return Je;Sn=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Vlr=void 0;const t=Lt(),e=xi();Je.Vlr={walk:i,parse:o,find:r,at:a,fetch:n};function r(d,f,g){return d.find(y=>y.userId===f&&y.recordId===g)}function a(d,f,g){const y=r(d,f,g);if(!y)throw new Error(`VLR not found: ${f}/${g}`);return y}function n(d,{contentOffset:f,contentLength:g}){return g===0?new Uint8Array:t.Getter.create(d)(f,f+g)}async function i(d,f){const g=t.Getter.create(d),y=await c({get:g,startOffset:f.headerLength,count:f.vlrCount,isExtended:!1}),_=await c({get:g,startOffset:f.evlrOffset,count:f.evlrCount,isExtended:!0});return[...y,..._]}function o(d,f){return(f?h:s)(d)}function s(d){const f=t.Binary.toDataView(d);if(f.byteLength!==e.vlrHeaderLength)throw new Error(`Invalid VLR header length (must be ${e.vlrHeaderLength}): ${f.byteLength}`);return{userId:t.Binary.toCString(d.slice(2,18)),recordId:f.getUint16(18,!0),contentLength:f.getUint16(20,!0),description:t.Binary.toCString(d.slice(22,54)),isExtended:!1}}function h(d){const f=t.Binary.toDataView(d);if(f.byteLength!==e.evlrHeaderLength)throw new Error(`Invalid EVLR header length (must be ${e.evlrHeaderLength}): ${f.byteLength}`);return{userId:t.Binary.toCString(d.slice(2,18)),recordId:f.getUint16(18,!0),contentLength:(0,t.parseBigInt)((0,t.getBigUint64)(f,20,!0)),description:t.Binary.toCString(d.slice(28,60)),isExtended:!0}}async function c({get:d,startOffset:f,count:g,isExtended:y}){const _=[];let m=f;const M=y?e.evlrHeaderLength:e.vlrHeaderLength;for(let E=0;E<g;++E){const b=M?await d(m,m+M):new Uint8Array,{userId:C,recordId:N,contentLength:T,description:k}=o(b,y);_.push({userId:C,recordId:N,contentOffset:m+M,contentLength:T,description:k,isExtended:y}),m+=M+T}return _}return Je}var Tn;function aa(){return Tn||(Tn=1,function(t){var e=Gt&&Gt.__createBinding||(Object.create?function(f,g,y,_){_===void 0&&(_=y);var m=Object.getOwnPropertyDescriptor(g,y);(!m||("get"in m?!g.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(f,_,m)}:function(f,g,y,_){_===void 0&&(_=y),f[_]=g[y]}),r=Gt&&Gt.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),a=Gt&&Gt.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var y in f)y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)&&e(g,f,y);return r(g,f),g};Object.defineProperty(t,"__esModule",{value:!0}),t.Vlr=t.View=t.PointData=t.Header=t.Extractor=t.ExtraBytes=t.Dimensions=t.Constants=void 0,t.Constants=a(xi());var n=ra();Object.defineProperty(t,"Dimensions",{enumerable:!0,get:function(){return n.Dimensions}});var i=ea();Object.defineProperty(t,"ExtraBytes",{enumerable:!0,get:function(){return i.ExtraBytes}});var o=ia();Object.defineProperty(t,"Extractor",{enumerable:!0,get:function(){return o.Extractor}});var s=na();Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return s.Header}});var h=Go();Object.defineProperty(t,"PointData",{enumerable:!0,get:function(){return h.PointData}});var c=Ho();Object.defineProperty(t,"View",{enumerable:!0,get:function(){return c.View}});var d=Wo();Object.defineProperty(t,"Vlr",{enumerable:!0,get:function(){return d.Vlr}})}(Gt)),Gt}var Ke={},An;function sa(){if(An)return Ke;An=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Hierarchy=void 0;const t=Lt(),e=wi();Ke.Hierarchy={parse:r,load:a};function r(n){const i=t.Binary.toDataView(n);if(i.byteLength%e.hierarchyItemLength!==0)throw new Error(`Invalid hierarchy page length: ${i.byteLength}`);const o={},s={};for(let h=0;h<i.byteLength;h+=e.hierarchyItemLength){const c=i.getInt32(h+0,!0),d=i.getInt32(h+4,!0),f=i.getInt32(h+8,!0),g=i.getInt32(h+12,!0),y=(0,t.parseBigInt)((0,t.getBigUint64)(i,h+16,!0)),_=i.getInt32(h+24,!0),m=i.getInt32(h+28,!0),M=t.Key.toString([c,d,f,g]);if(m<-1)throw new Error(`Invalid hierarchy point count at key: ${M}`);m===-1?s[M]={pageOffset:y,pageLength:_}:o[M]={pointCount:m,pointDataOffset:y,pointDataLength:_}}return{nodes:o,pages:s}}async function a(n,i){const o=t.Getter.create(n);return r(await o(i.pageOffset,i.pageOffset+i.pageLength))}return Ke}var Ze={},On;function oa(){if(On)return Ze;On=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Info=void 0;const t=Lt(),e=wi();Ze.Info={parse:r};function r(a){const n=t.Binary.toDataView(a);if(n.byteLength!==e.infoLength)throw new Error(`Invalid COPC info VLR length (should be ${e.infoLength}): ${n.byteLength}`);const i=[n.getFloat64(0,!0),n.getFloat64(8,!0),n.getFloat64(16,!0)],o=n.getFloat64(24,!0);return{cube:[i[0]-o,i[1]-o,i[2]-o,i[0]+o,i[1]+o,i[2]+o],spacing:n.getFloat64(32,!0),rootHierarchyPage:{pageOffset:(0,t.parseBigInt)((0,t.getBigUint64)(n,40,!0)),pageLength:(0,t.parseBigInt)((0,t.getBigUint64)(n,48,!0))},gpsTimeRange:[n.getFloat64(56,!0),n.getFloat64(64,!0)]}}return Ze}var In;function Vo(){if(In)return It;In=1;var t=It&&It.__createBinding||(Object.create?function(g,y,_,m){m===void 0&&(m=_);var M=Object.getOwnPropertyDescriptor(y,_);(!M||("get"in M?!y.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return y[_]}}),Object.defineProperty(g,m,M)}:function(g,y,_,m){m===void 0&&(m=_),g[m]=y[_]}),e=It&&It.__setModuleDefault||(Object.create?function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}:function(g,y){g.default=y}),r=It&&It.__importStar||function(g){if(g&&g.__esModule)return g;var y={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&t(y,g,_);return e(y,g),y};Object.defineProperty(It,"__esModule",{value:!0}),It.Copc=void 0;const a=r(aa()),n=Lt(),i=sa(),o=oa();It.Copc={create:s,loadHierarchyPage:h,loadCompressedPointDataBuffer:c,loadPointDataBuffer:d,loadPointDataView:f};async function s(g){const y=n.Getter.create(g),_=65536,m=y(0,_);async function M(tt,ut){return ut>=_?y(tt,ut):(await m).slice(tt,ut)}const E=a.Header.parse(await M(0,a.Constants.minHeaderLength)),b=await a.Vlr.walk(M,E),C=a.Vlr.find(b,"copc",1);if(!C)throw new Error("COPC info VLR is required");const N=o.Info.parse(await a.Vlr.fetch(M,C));let T;const k=a.Vlr.find(b,"LASF_Projection",2112);k&&k.contentLength&&(T=n.Binary.toCString(await a.Vlr.fetch(M,k)),T===""&&(T=void 0));let K=[];const F=a.Vlr.find(b,"LASF_Spec",4);return F&&(K=a.ExtraBytes.parse(await a.Vlr.fetch(M,F))),{header:E,vlrs:b,info:N,wkt:T,eb:K}}async function h(g,y){const _=n.Getter.create(g);return i.Hierarchy.load(_,y)}async function c(g,{pointDataOffset:y,pointDataLength:_}){return n.Getter.create(g)(y,y+_)}async function d(g,{pointDataRecordFormat:y,pointDataRecordLength:_},m,M){const E=await c(g,m),{pointCount:b}=m;return a.PointData.decompressChunk(E,{pointCount:b,pointDataRecordFormat:y,pointDataRecordLength:_},M)}async function f(g,y,_,{lazPerf:m,include:M}={}){const E=await d(g,y.header,_,m);return a.View.create(E,y.header,y.eb,M)}return It}var Rn;function Yo(){return Rn||(Rn=1,function(t){var e=jt&&jt.__createBinding||(Object.create?function(s,h,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(h,c);(!f||("get"in f?!h.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return h[c]}}),Object.defineProperty(s,d,f)}:function(s,h,c,d){d===void 0&&(d=c),s[d]=h[c]}),r=jt&&jt.__setModuleDefault||(Object.create?function(s,h){Object.defineProperty(s,"default",{enumerable:!0,value:h})}:function(s,h){s.default=h}),a=jt&&jt.__importStar||function(s){if(s&&s.__esModule)return s;var h={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&e(h,s,c);return r(h,s),h};Object.defineProperty(t,"__esModule",{value:!0}),t.Info=t.Hierarchy=t.Copc=t.Constants=void 0,t.Constants=a(wi());var n=Vo();Object.defineProperty(t,"Copc",{enumerable:!0,get:function(){return n.Copc}});var i=sa();Object.defineProperty(t,"Hierarchy",{enumerable:!0,get:function(){return i.Hierarchy}});var o=oa();Object.defineProperty(t,"Info",{enumerable:!0,get:function(){return o.Info}})}(jt)),jt}var Nn;function Qo(){return Nn||(Nn=1,function(t){var e=Ot&&Ot.__createBinding||(Object.create?function(i,o,s,h){h===void 0&&(h=s);var c=Object.getOwnPropertyDescriptor(o,s);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,h,c)}:function(i,o,s,h){h===void 0&&(h=s),i[h]=o[s]}),r=Ot&&Ot.__setModuleDefault||(Object.create?function(i,o){Object.defineProperty(i,"default",{enumerable:!0,value:o})}:function(i,o){i.default=o}),a=Ot&&Ot.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&e(o,i,s);return r(o,i),o},n=Ot&&Ot.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.Las=t.Ept=void 0,t.Ept=a(To()),n(Yo(),t),t.Las=a(aa()),n(Lt(),t)}(Ot)),Ot}var vi=Qo();function Xo(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var fe=1,de=2,Pe=3,Jo=4,_i=5,Ln=6378137,Ko=6356752314e-3,Fn=.0066943799901413165,ar=484813681109536e-20,I=Math.PI/2,Zo=.16666666666666666,th=.04722222222222222,eh=.022156084656084655,D=1e-10,ht=.017453292519943295,Ut=57.29577951308232,X=Math.PI/4,ur=Math.PI*2,lt=3.14159265359,wt={};wt.greenwich=0;wt.lisbon=-9.131906111111;wt.paris=2.337229166667;wt.bogota=-74.080916666667;wt.madrid=-3.687938888889;wt.rome=12.452333333333;wt.bern=7.439583333333;wt.jakarta=106.807719444444;wt.ferro=-17.666666666667;wt.brussels=4.367975;wt.stockholm=18.058277777778;wt.athens=23.7163375;wt.oslo=10.722916666667;var rh={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},Dn=/[\s_\-\/\(\)]/g;function Zt(t,e){if(t[e])return t[e];for(var r=Object.keys(t),a=e.toLowerCase().replace(Dn,""),n=-1,i,o;++n<r.length;)if(i=r[n],o=i.toLowerCase().replace(Dn,""),o===a)return t[i]}function mi(t){var e={},r=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,h){var c=h.split("=");return c.push(!0),s[c[0].toLowerCase()]=c[1],s},{}),a,n,i,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*ht},lat_1:function(s){e.lat1=s*ht},lat_2:function(s){e.lat2=s*ht},lat_ts:function(s){e.lat_ts=s*ht},lon_0:function(s){e.long0=s*ht},lon_1:function(s){e.long1=s*ht},lon_2:function(s){e.long2=s*ht},alpha:function(s){e.alpha=parseFloat(s)*ht},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*ht},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r:function(s){e.a=e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(h){return parseFloat(h)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var h=Zt(rh,s);h&&(e.to_meter=h.to_meter)},from_greenwich:function(s){e.from_greenwich=s*ht},pm:function(s){var h=Zt(wt,s);e.from_greenwich=(h||parseFloat(s))*ht},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var h="ewnsud";s.length===3&&h.indexOf(s.substr(0,1))!==-1&&h.indexOf(s.substr(1,1))!==-1&&h.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(a in r)n=r[a],a in o?(i=o[a],typeof i=="function"?i(n):e[i]=n):e[a]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var cr=1,ha=2,la=3,zr=4,ua=5,Ei=-1,ih=/\s/,nh=/[A-Za-z]/,ah=/[A-Za-z84_]/,Hr=/[,\]]/,ca=/[\d\.E\-\+]/;function Qt(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=cr}Qt.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==zr)for(;ih.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case cr:return this.neutral(t);case ha:return this.keyword(t);case zr:return this.quoted(t);case ua:return this.afterquote(t);case la:return this.number(t);case Ei:return}};Qt.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=zr;return}if(Hr.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Qt.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=cr;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=cr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Ei);return}};Qt.prototype.number=function(t){if(ca.test(t)){this.word+=t;return}if(Hr.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Qt.prototype.quoted=function(t){if(t==='"'){this.state=ua;return}this.word+=t};Qt.prototype.keyword=function(t){if(ah.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=cr;return}if(Hr.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Qt.prototype.neutral=function(t){if(nh.test(t)){this.word=t,this.state=ha;return}if(t==='"'){this.word="",this.state=zr;return}if(ca.test(t)){this.word=t,this.state=la;return}if(Hr.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Qt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ei)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function sh(t){var e=new Qt(t);return e.output()}function di(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var a=e?{}:t,n=r.reduce(function(i,o){return we(o,i),i},a);e&&(t[e]=n)}function we(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},we(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var a;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&we(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&we(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],di(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],di(e,r,t),e[r].type=r;return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return we(t,e[r]);return di(e,r,t)}}var oh=.017453292519943295,hh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function lh(t,e){var r=e[0],a=e[1];!(r in t)&&a in t&&(t[r]=t[a],e.length===3&&(t[r]=e[2](t[r])))}function zt(t){return t*oh}function fa(t){for(var e=Object.keys(t),r=0,a=e.length;r<a;++r){var n=e[r];hh.indexOf(n)!==-1&&uh(t[n]),typeof t[n]=="object"&&fa(t[n])}}function uh(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",a=0,n=t.AXIS.length;a<n;++a){var i=[t.AXIS[a][0].toLowerCase(),t.AXIS[a][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?r+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?r+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?r+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function s(d){var f=t.to_meter||1;return d*f}var h=function(d){return lh(t,d)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",zt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",zt],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",zt],["lat0","latitude_of_origin",zt],["lat0","standard_parallel_1",zt],["lat1","standard_parallel_1",zt],["lat2","standard_parallel_2",zt],["azimuth","Azimuth"],["alpha","azimuth",zt],["srsCode","name"]];c.forEach(h),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=zt(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=zt(t.lat0>0?90:-90))}function da(t){var e=sh(t),r=e[0],a={};return we(e,a),fa(a),a[r]}function yt(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?yt[t]=mi(arguments[1]):yt[t]=da(arguments[1]):yt[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?yt.apply(e,a):yt(a)});if(typeof t=="string"){if(t in yt)return yt[t]}else"EPSG"in t?yt["EPSG:"+t.EPSG]=t:"ESRI"in t?yt["ESRI:"+t.ESRI]=t:"IAU2000"in t?yt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Xo(yt);function ch(t){return typeof t=="string"}function fh(t){return t in yt}var dh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function yh(t){return dh.some(function(e){return t.indexOf(e)>-1})}var gh=["3857","900913","3785","102113"];function vh(t){var e=Zt(t,"authority");if(e){var r=Zt(e,"epsg");return r&&gh.indexOf(r)>-1}}function _h(t){var e=Zt(t,"extension");if(e)return Zt(e,"proj4")}function mh(t){return t[0]==="+"}function Mh(t){if(ch(t)){if(fh(t))return yt[t];if(yh(t)){var e=da(t);if(vh(e))return yt["EPSG:3857"];var r=_h(e);return r?mi(r):e}if(mh(t))return mi(t)}else return t}function zn(t,e){t=t||{};var r,a;if(!e)return t;for(a in e)r=e[a],r!==void 0&&(t[a]=r);return t}function $t(t,e,r){var a=t*e;return r/Math.sqrt(1-a*a)}function yr(t){return t<0?-1:1}function z(t){return Math.abs(t)<=lt?t:t-yr(t)*ur}function Nt(t,e,r){var a=t*r,n=.5*t;return a=Math.pow((1-a)/(1+a),n),Math.tan(.5*(I-e))/a}function fr(t,e){for(var r=.5*t,a,n,i=I-2*Math.atan(e),o=0;o<=15;o++)if(a=t*Math.sin(i),n=I-2*Math.atan(e*Math.pow((1-a)/(1+a),r))-i,i+=n,Math.abs(n)<=1e-10)return i;return-9999}function ph(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function bh(t){var e=t.x,r=t.y;if(r*Ut>90&&r*Ut<-90&&e*Ut>180&&e*Ut<-180)return null;var a,n;if(Math.abs(Math.abs(r)-I)<=D)return null;if(this.sphere)a=this.x0+this.a*this.k0*z(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(X+.5*r));else{var i=Math.sin(r),o=Nt(this.e,r,i);a=this.x0+this.a*this.k0*z(e-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=a,t.y=n,t}function wh(t){var e=t.x-this.x0,r=t.y-this.y0,a,n;if(this.sphere)n=I-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var i=Math.exp(-r/(this.a*this.k0));if(n=fr(this.e,i),n===-9999)return null}return a=z(this.long0+e/(this.a*this.k0)),t.x=a,t.y=n,t}var xh=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Eh={init:ph,forward:bh,inverse:wh,names:xh};function Ch(){}function Un(t){return t}var Ph=["longlat","identity"],Sh={init:Ch,forward:Un,inverse:Un,names:Ph},Th=[Eh,Sh],Rr={},Ur=[];function ya(t,e){var r=Ur.length;return t.names?(Ur[r]=t,t.names.forEach(function(a){Rr[a.toLowerCase()]=r}),this):(console.log(e),!0)}function Ah(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Rr[e]<"u"&&Ur[Rr[e]])return Ur[Rr[e]]}function Oh(){Th.forEach(ya)}var Ih={start:Oh,add:ya,get:Ah},j={};j.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};j.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};j.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};j.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};j.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};j.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};j.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};j.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};j.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};j.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};j.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};j.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};j.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};j.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};j.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};j.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};j.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};j.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};j.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};j.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};j.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};j.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};j.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};j.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};j.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};j.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};j.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};j.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};j.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};j.hough={a:6378270,rf:297,ellipseName:"Hough"};j.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};j.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};j.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};j.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};j.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};j.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};j.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};j.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};j.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};j.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};j.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};j.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Rh=j.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};j.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Nh(t,e,r,a){var n=t*t,i=e*e,o=(n-i)/n,s=0;a?(t*=1-o*(Zo+o*(th+o*eh)),n=t*t,o=0):s=Math.sqrt(o);var h=(n-i)/i;return{es:o,e:s,ep2:h}}function Lh(t,e,r,a,n){if(!t){var i=Zt(j,a);i||(i=Rh),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<D)&&(n=!0,e=t),{a:t,b:e,rf:r,sphere:n}}var Nr={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var Fh in Nr){var Bn=Nr[Fh];Nr[Bn.datumName]=Bn}function Dh(t,e,r,a,n,i,o){var s={};return t===void 0||t==="none"?s.datum_type=_i:s.datum_type=Jo,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=fe),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=de,s.datum_params[3]*=ar,s.datum_params[4]*=ar,s.datum_params[5]*=ar,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=Pe,s.grids=o),s.a=r,s.b=a,s.es=n,s.ep2=i,s}var ga={};function zh(t,e){var r=new DataView(e),a=$h(r),n=kh(r,a),i=qh(r,n,a),o={header:n,subgrids:i};return ga[t]=o,o}function Uh(t){if(t===void 0)return null;var e=t.split(",");return e.map(Bh)}function Bh(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:ga[t]||null,isNull:!1}}function xe(t){return t/3600*Math.PI/180}function $h(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function kh(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Mi(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Mi(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function qh(t,e,r){for(var a=176,n=[],i=0;i<e.nSubgrids;i++){var o=Gh(t,a,r),s=Hh(t,a,o,r),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[xe(o.lowerLongitude),xe(o.lowerLatitude)],del:[xe(o.longitudeInterval),xe(o.latitudeInterval)],lim:[h,c],count:o.gridNodeCount,cvs:jh(s)}),a+=176+o.gridNodeCount*16}return n}function jh(t){return t.map(function(e){return[xe(e.longitudeShift),xe(e.latitudeShift)]})}function Gh(t,e,r){return{name:Mi(t,e+8,e+16).trim(),parent:Mi(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function Hh(t,e,r,a){for(var n=e+176,i=16,o=[],s=0;s<r.gridNodeCount;s++){var h={latitudeShift:t.getFloat32(n+s*i,a),longitudeShift:t.getFloat32(n+s*i+4,a),latitudeAccuracy:t.getFloat32(n+s*i+8,a),longitudeAccuracy:t.getFloat32(n+s*i+12,a)};o.push(h)}return o}function Bt(t,e){if(!(this instanceof Bt))return new Bt(t);e=e||function(c){if(c)throw c};var r=Mh(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var a=Bt.projections.get(r.projName);if(!a){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var n=Zt(Nr,r.datumCode);n&&(r.datum_params=r.datum_params||(n.towgs84?n.towgs84.split(","):null),r.ellps=n.ellipse,r.datumName=n.datumName?n.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i=Lh(r.a,r.b,r.rf,r.ellps,r.sphere),o=Nh(i.a,i.b,i.rf,r.R_A),s=Uh(r.nadgrids),h=r.datum||Dh(r.datumCode,r.datum_params,i.a,i.b,o.es,o.ep2,s);zn(this,r),zn(this,a),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),e(null,this)}Bt.projections=Ih;Bt.projections.start();function Wh(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===fe?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===de?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function va(t,e,r){var a=t.x,n=t.y,i=t.z?t.z:0,o,s,h,c;if(n<-I&&n>-1.001*I)n=-I;else if(n>I&&n<1.001*I)n=I;else{if(n<-I)return{x:-1/0,y:-1/0,z:t.z};if(n>I)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(n),c=Math.cos(n),h=s*s,o=r/Math.sqrt(1-e*h),{x:(o+i)*c*Math.cos(a),y:(o+i)*c*Math.sin(a),z:(o*(1-e)+i)*s}}function _a(t,e,r,a){var n=1e-12,i=n*n,o=30,s,h,c,d,f,g,y,_,m,M,E,b,C,N=t.x,T=t.y,k=t.z?t.z:0,K,F,tt;if(s=Math.sqrt(N*N+T*T),h=Math.sqrt(N*N+T*T+k*k),s/r<n){if(K=0,h/r<n)return F=I,tt=-a,{x:t.x,y:t.y,z:t.z}}else K=Math.atan2(T,N);c=k/h,d=s/h,f=1/Math.sqrt(1-e*(2-e)*d*d),_=d*(1-e)*f,m=c*f,C=0;do C++,y=r/Math.sqrt(1-e*m*m),tt=s*_+k*m-y*(1-e*m*m),g=e*y/(y+tt),f=1/Math.sqrt(1-g*(2-g)*d*d),M=d*(1-g)*f,E=c*f,b=E*_-M*m,_=M,m=E;while(b*b>i&&C<o);return F=Math.atan(E/Math.abs(M)),{x:K,y:F,z:tt}}function Vh(t,e,r){if(e===fe)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===de){var a=r[0],n=r[1],i=r[2],o=r[3],s=r[4],h=r[5],c=r[6];return{x:c*(t.x-h*t.y+s*t.z)+a,y:c*(h*t.x+t.y-o*t.z)+n,z:c*(-s*t.x+o*t.y+t.z)+i}}}function Yh(t,e,r){if(e===fe)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===de){var a=r[0],n=r[1],i=r[2],o=r[3],s=r[4],h=r[5],c=r[6],d=(t.x-a)/c,f=(t.y-n)/c,g=(t.z-i)/c;return{x:d+h*f-s*g,y:-h*d+f+o*g,z:s*d-o*f+g}}}function Or(t){return t===fe||t===de}function Qh(t,e,r){if(Wh(t,e)||t.datum_type===_i||e.datum_type===_i)return r;var a=t.a,n=t.es;if(t.datum_type===Pe){var i=$n(t,!1,r);if(i!==0)return;a=Ln,n=Fn}var o=e.a,s=e.b,h=e.es;if(e.datum_type===Pe&&(o=Ln,s=Ko,h=Fn),n===h&&a===o&&!Or(t.datum_type)&&!Or(e.datum_type))return r;if(r=va(r,n,a),Or(t.datum_type)&&(r=Vh(r,t.datum_type,t.datum_params)),Or(e.datum_type)&&(r=Yh(r,e.datum_type,e.datum_params)),r=_a(r,h,o,s),e.datum_type===Pe){var c=$n(e,!0,r);if(c!==0)return}return r}function $n(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-r.x,y:r.y},n={x:Number.NaN,y:Number.NaN},i=[];t:for(var o=0;o<t.grids.length;o++){var s=t.grids[o];if(i.push(s.name),s.isNull){n=a;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var h=s.grid.subgrids,c=0,d=h.length;c<d;c++){var f=h[c],g=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,y=f.ll[0]-g,_=f.ll[1]-g,m=f.ll[0]+(f.lim[0]-1)*f.del[0]+g,M=f.ll[1]+(f.lim[1]-1)*f.del[1]+g;if(!(_>a.y||y>a.x||M<a.y||m<a.x)&&(n=Xh(a,e,f),!isNaN(n.x)))break t}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*Ut+" "+a.y*Ut+" tried: '"+i+"'"),-1):(r.x=-n.x,r.y=n.y,0)}function Xh(t,e,r){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var n={x:t.x,y:t.y};n.x-=r.ll[0],n.y-=r.ll[1],n.x=z(n.x-Math.PI)+Math.PI;var i=kn(n,r);if(e){if(isNaN(i.x))return a;i.x=n.x-i.x,i.y=n.y-i.y;var o=9,s=1e-12,h,c;do{if(c=kn(i,r),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:n.x-(c.x+i.x),y:n.y-(c.y+i.y)},i.x+=h.x,i.y+=h.y}while(o--&&Math.abs(h.x)>s&&Math.abs(h.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=z(i.x+r.ll[0]),a.y=i.y+r.ll[1]}else isNaN(i.x)||(a.x=t.x+i.x,a.y=t.y+i.y);return a}function kn(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(r.x),y:Math.floor(r.y)},n={x:r.x-1*a.x,y:r.y-1*a.y},i={x:Number.NaN,y:Number.NaN},o;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return i;o=a.y*e.lim[0]+a.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var h={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var d={x:e.cvs[o][0],y:e.cvs[o][1]},f=n.x*n.y,g=n.x*(1-n.y),y=(1-n.x)*(1-n.y),_=(1-n.x)*n.y;return i.x=y*s.x+g*h.x+_*d.x+f*c.x,i.y=y*s.y+g*h.y+_*d.y+f*c.y,i}function qn(t,e,r){var a=r.x,n=r.y,i=r.z||0,o,s,h,c={};for(h=0;h<3;h++)if(!(e&&h===2&&r.z===void 0))switch(h===0?(o=a,"ew".indexOf(t.axis[h])!==-1?s="x":s="y"):h===1?(o=n,"ns".indexOf(t.axis[h])!==-1?s="y":s="x"):(o=i,s="z"),t.axis[h]){case"e":c[s]=o;break;case"w":c[s]=-o;break;case"n":c[s]=o;break;case"s":c[s]=-o;break;case"u":r[s]!==void 0&&(c.z=o);break;case"d":r[s]!==void 0&&(c.z=-o);break;default:return null}return c}function ma(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Jh(t){jn(t.x),jn(t.y)}function jn(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Kh(t,e){return(t.datum.datum_type===fe||t.datum.datum_type===de||t.datum.datum_type===Pe)&&e.datumCode!=="WGS84"||(e.datum.datum_type===fe||e.datum.datum_type===de||e.datum.datum_type===Pe)&&t.datumCode!=="WGS84"}function Br(t,e,r,a){var n;Array.isArray(r)?r=ma(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var i=r.z!==void 0;if(Jh(r),t.datum&&e.datum&&Kh(t,e)&&(n=new Bt("WGS84"),r=Br(t,n,r,a),t=n),a&&t.axis!=="enu"&&(r=qn(t,!1,r)),t.projName==="longlat")r={x:r.x*ht,y:r.y*ht,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=Qh(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*Ut,y:r.y*Ut,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),a&&e.axis!=="enu"?qn(e,!0,r):(r&&!i&&delete r.z,r)}var Gn=Bt("WGS84");function yi(t,e,r,a){var n,i,o;return Array.isArray(r)?(n=Br(t,e,r,a)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(r.slice(3)):[n.x,n.y,r[2]].concat(r.slice(3)):[n.x,n.y].concat(r.slice(2)):[n.x,n.y]):(i=Br(t,e,r,a),o=Object.keys(r),o.length===2||o.forEach(function(s){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;i[s]=r[s]}),i)}function Hn(t){return t instanceof Bt?t:t.oProj?t.oProj:Bt(t)}function vt(t,e,r){t=Hn(t);var a=!1,n;return typeof e>"u"?(e=t,t=Gn,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=Gn,a=!0),e=Hn(e),r?yi(t,e,r):(n={forward:function(i,o){return yi(t,e,i,o)},inverse:function(i,o){return yi(e,t,i,o)}},a&&(n.oProj=e),n)}var Wn=6,Ma="AJSAJS",pa="AFAFAF",Ee=65,Mt=73,St=79,er=86,rr=90,Zh={forward:ba,inverse:tl,toPoint:wa};function ba(t,e){return e=e||5,il(el({lat:t[1],lon:t[0]}),e)}function tl(t){var e=Ci(Ea(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function wa(t){var e=Ci(Ea(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function gi(t){return t*(Math.PI/180)}function Vn(t){return 180*(t/Math.PI)}function el(t){var e=t.lat,r=t.lon,a=6378137,n=.00669438,i=.9996,o,s,h,c,d,f,g,y=gi(e),_=gi(r),m,M;M=Math.floor((r+180)/6)+1,r===180&&(M=60),e>=56&&e<64&&r>=3&&r<12&&(M=32),e>=72&&e<84&&(r>=0&&r<9?M=31:r>=9&&r<21?M=33:r>=21&&r<33?M=35:r>=33&&r<42&&(M=37)),o=(M-1)*6-180+3,m=gi(o),s=n/(1-n),h=a/Math.sqrt(1-n*Math.sin(y)*Math.sin(y)),c=Math.tan(y)*Math.tan(y),d=s*Math.cos(y)*Math.cos(y),f=Math.cos(y)*(_-m),g=a*((1-n/4-3*n*n/64-5*n*n*n/256)*y-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*y)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*y)-35*n*n*n/3072*Math.sin(6*y));var E=i*h*(f+(1-c+d)*f*f*f/6+(5-18*c+c*c+72*d-58*s)*f*f*f*f*f/120)+5e5,b=i*(g+h*Math.tan(y)*(f*f/2+(5-c+9*d+4*d*d)*f*f*f*f/24+(61-58*c+c*c+600*d-330*s)*f*f*f*f*f*f/720));return e<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(E),zoneNumber:M,zoneLetter:rl(e)}}function Ci(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var i=.9996,o=6378137,s=.00669438,h,c=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),d,f,g,y,_,m,M,E,b,C=r-5e5,N=e;a<"N"&&(N-=1e7),M=(n-1)*6-180+3,h=s/(1-s),m=N/i,E=m/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),b=E+(3*c/2-27*c*c*c/32)*Math.sin(2*E)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*E)+151*c*c*c/96*Math.sin(6*E),d=o/Math.sqrt(1-s*Math.sin(b)*Math.sin(b)),f=Math.tan(b)*Math.tan(b),g=h*Math.cos(b)*Math.cos(b),y=o*(1-s)/Math.pow(1-s*Math.sin(b)*Math.sin(b),1.5),_=C/(d*i);var T=b-d*Math.tan(b)/y*(_*_/2-(5+3*f+10*g-4*g*g-9*h)*_*_*_*_/24+(61+90*f+298*g+45*f*f-252*h-3*g*g)*_*_*_*_*_*_/720);T=Vn(T);var k=(_-(1+2*f+g)*_*_*_/6+(5-2*g+28*f-3*g*g+8*h+24*f*f)*_*_*_*_*_/120)/Math.cos(b);k=M+Vn(k);var K;if(t.accuracy){var F=Ci({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});K={top:F.lat,right:F.lon,bottom:T,left:k}}else K={lat:T,lon:k};return K}function rl(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function il(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+nl(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function nl(t,e,r){var a=xa(r),n=Math.floor(t/1e5),i=Math.floor(e/1e5)%20;return al(n,i,a)}function xa(t){var e=t%Wn;return e===0&&(e=Wn),e}function al(t,e,r){var a=r-1,n=Ma.charCodeAt(a),i=pa.charCodeAt(a),o=n+t-1,s=i+e,h=!1;o>rr&&(o=o-rr+Ee-1,h=!0),(o===Mt||n<Mt&&o>Mt||(o>Mt||n<Mt)&&h)&&o++,(o===St||n<St&&o>St||(o>St||n<St)&&h)&&(o++,o===Mt&&o++),o>rr&&(o=o-rr+Ee-1),s>er?(s=s-er+Ee-1,h=!0):h=!1,(s===Mt||i<Mt&&s>Mt||(s>Mt||i<Mt)&&h)&&s++,(s===St||i<St&&s>St||(s>St||i<St)&&h)&&(s++,s===Mt&&s++),s>er&&(s=s-er+Ee-1);var c=String.fromCharCode(o)+String.fromCharCode(s);return c}function Ea(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,a="",n,i=0;!/[A-Z]/.test(n=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;a+=n,i++}var o=parseInt(a,10);if(i===0||i+3>e)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(i,i+=2);for(var h=xa(o),c=sl(r.charAt(0),h),d=ol(r.charAt(1),h);d<hl(s);)d+=2e6;var f=e-i;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var g=f/2,y=0,_=0,m,M,E,b,C;return g>0&&(m=1e5/Math.pow(10,g),M=t.substring(i,i+g),y=parseFloat(M)*m,E=t.substring(i+g),_=parseFloat(E)*m),b=y+c,C=_+d,{easting:b,northing:C,zoneLetter:s,zoneNumber:o,accuracy:m}}function sl(t,e){for(var r=Ma.charCodeAt(e-1),a=1e5,n=!1;r!==t.charCodeAt(0);){if(r++,r===Mt&&r++,r===St&&r++,r>rr){if(n)throw"Bad character: "+t;r=Ee,n=!0}a+=1e5}return a}function ol(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=pa.charCodeAt(e-1),a=0,n=!1;r!==t.charCodeAt(0);){if(r++,r===Mt&&r++,r===St&&r++,r>er){if(n)throw"Bad character: "+t;r=Ee,n=!0}a+=1e5}return a}function hl(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Te(t,e,r){if(!(this instanceof Te))return new Te(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Te.fromMGRS=function(t){return new Te(wa(t))};Te.prototype.toMGRS=function(t){return ba([this.x,this.y],t)};var ll=1,ul=.25,Yn=.046875,Qn=.01953125,Xn=.01068115234375,cl=.75,fl=.46875,dl=.013020833333333334,yl=.007120768229166667,gl=.3645833333333333,vl=.005696614583333333,_l=.3076171875;function Pi(t){var e=[];e[0]=ll-t*(ul+t*(Yn+t*(Qn+t*Xn))),e[1]=t*(cl-t*(Yn+t*(Qn+t*Xn)));var r=t*t;return e[2]=r*(fl-t*(dl+t*yl)),r*=t,e[3]=r*(gl-t*vl),e[4]=r*t*_l,e}function Oe(t,e,r,a){return r*=e,e*=e,a[0]*t-r*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var ml=20;function Si(t,e,r){for(var a=1/(1-e),n=t,i=ml;i;--i){var o=Math.sin(n),s=1-e*o*o;if(s=(Oe(n,o,Math.cos(n),r)-t)*(s*Math.sqrt(s))*a,n-=s,Math.abs(s)<D)return n}return n}function Ml(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Pi(this.es),this.ml0=Oe(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function pl(t){var e=t.x,r=t.y,a=z(e-this.long0),n,i,o,s=Math.sin(r),h=Math.cos(r);if(this.es){var d=h*a,f=Math.pow(d,2),g=this.ep2*Math.pow(h,2),y=Math.pow(g,2),_=Math.abs(h)>D?Math.tan(r):0,m=Math.pow(_,2),M=Math.pow(m,2);n=1-this.es*Math.pow(s,2),d=d/Math.sqrt(n);var E=Oe(r,s,h,this.en);i=this.a*(this.k0*d*(1+f/6*(1-m+g+f/20*(5-18*m+M+14*g-58*m*g+f/42*(61+179*M-M*m-479*m)))))+this.x0,o=this.a*(this.k0*(E-this.ml0+s*a*d/2*(1+f/12*(5-m+9*g+4*y+f/30*(61+M-58*m+270*g-330*m*g+f/56*(1385+543*M-M*m-3111*m))))))+this.y0}else{var c=h*Math.sin(a);if(Math.abs(Math.abs(c)-1)<D)return 93;if(i=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=h*Math.cos(a)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>D)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=i,t.y=o,t}function bl(t){var e,r,a,n,i=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,r=Si(e,this.es,this.en),Math.abs(r)<I){var f=Math.sin(r),g=Math.cos(r),y=Math.abs(g)>D?Math.tan(r):0,_=this.ep2*Math.pow(g,2),m=Math.pow(_,2),M=Math.pow(y,2),E=Math.pow(M,2);e=1-this.es*Math.pow(f,2);var b=i*Math.sqrt(e)/this.k0,C=Math.pow(b,2);e=e*y,a=r-e*C/(1-this.es)*.5*(1-C/12*(5+3*M-9*_*M+_-4*m-C/30*(61+90*M-252*_*M+45*E+46*_-C/56*(1385+3633*M+4095*E+1574*E*M)))),n=z(this.long0+b*(1-C/6*(1+2*M+_-C/20*(5+28*M+24*E+8*_*M+6*_-C/42*(61+662*M+1320*E+720*E*M))))/g)}else a=I*yr(o),n=0;else{var s=Math.exp(i/this.k0),h=.5*(s-1/s),c=this.lat0+o/this.k0,d=Math.cos(c);e=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(h,2))),a=Math.asin(e),o<0&&(a=-a),h===0&&d===0?n=0:n=z(Math.atan2(h,d)+this.long0)}return t.x=n,t.y=a,t}var wl=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Lr={init:Ml,forward:pl,inverse:bl,names:wl};function Ca(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function bt(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),a=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(a,2))}function xl(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function El(t){var e=Math.abs(t);return e=xl(e*(1+e/(bt(1,e)+1))),t<0?-e:e}function Ti(t,e){for(var r=2*Math.cos(2*e),a=t.length-1,n=t[a],i=0,o;--a>=0;)o=-i+r*n+t[a],i=n,n=o;return e+o*Math.sin(2*e)}function Cl(t,e){for(var r=2*Math.cos(e),a=t.length-1,n=t[a],i=0,o;--a>=0;)o=-i+r*n+t[a],i=n,n=o;return Math.sin(e)*o}function Pl(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Pa(t,e,r){for(var a=Math.sin(e),n=Math.cos(e),i=Ca(r),o=Pl(r),s=2*n*o,h=-2*a*i,c=t.length-1,d=t[c],f=0,g=0,y=0,_,m;--c>=0;)_=g,m=f,g=d,f=y,d=-_+s*g-h*f+t[c],y=-m+h*g+s*f;return s=a*o,h=n*i,[s*d-h*y,s*y+h*d]}function Sl(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Lr.init.apply(this),this.forward=Lr.forward,this.inverse=Lr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var a=Ti(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Cl(this.gtu,2*a))}function Tl(t){var e=z(t.x-this.long0),r=t.y;r=Ti(this.cbg,r);var a=Math.sin(r),n=Math.cos(r),i=Math.sin(e),o=Math.cos(e);r=Math.atan2(a,o*n),e=Math.atan2(i*n,bt(a,n*o)),e=El(Math.tan(e));var s=Pa(this.gtu,2*r,2*e);r=r+s[0],e=e+s[1];var h,c;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*r+this.Zb)+this.y0):(h=1/0,c=1/0),t.x=h,t.y=c,t}function Al(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var a,n;if(Math.abs(e)<=2.623395162778){var i=Pa(this.utg,2*r,2*e);r=r+i[0],e=e+i[1],e=Math.atan(Ca(e));var o=Math.sin(r),s=Math.cos(r),h=Math.sin(e),c=Math.cos(e);r=Math.atan2(o*c,bt(h,c*s)),e=Math.atan2(h,c*s),a=z(e+this.long0),n=Ti(this.cgb,r)}else a=1/0,n=1/0;return t.x=a,t.y=n,t}var Ol=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],Fr={init:Sl,forward:Tl,inverse:Al,names:Ol};function Il(t,e){if(t===void 0){if(t=Math.floor((z(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Rl="etmerc";function Nl(){var t=Il(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*ht,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Fr.init.apply(this),this.forward=Fr.forward,this.inverse=Fr.inverse}var Ll=["Universal Transverse Mercator System","utm"],Fl={init:Nl,names:Ll,dependsOn:Rl};function Ai(t,e){return Math.pow((1-t)/(1+t),e)}var Dl=20;function zl(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+X)/(Math.pow(Math.tan(.5*this.lat0+X),this.C)*Ai(this.e*t,this.ratexp))}function Ul(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+X),this.C)*Ai(this.e*Math.sin(r),this.ratexp))-I,t.x=this.C*e,t}function Bl(t){for(var e=1e-14,r=t.x/this.C,a=t.y,n=Math.pow(Math.tan(.5*a+X)/this.K,1/this.C),i=Dl;i>0&&(a=2*Math.atan(n*Ai(this.e*Math.sin(t.y),-.5*this.e))-I,!(Math.abs(a-t.y)<e));--i)t.y=a;return i?(t.x=r,t.y=a,t):null}var Oi={init:zl,forward:Ul,inverse:Bl};function $l(){Oi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function kl(t){var e,r,a,n;return t.x=z(t.x-this.long0),Oi.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*a),t.x=n*r*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*r*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function ql(t){var e,r,a,n,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=bt(t.x,t.y)){var o=2*Math.atan2(i,this.R2);e=Math.sin(o),r=Math.cos(o),n=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),a=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else n=this.phic0,a=0;return t.x=a,t.y=n,Oi.inverse.apply(this,[t]),t.x=z(t.x+this.long0),t}var jl=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Gl={init:$l,forward:kl,inverse:ql,names:jl};function Hl(t,e,r){return e*=r,Math.tan(.5*(I+t))*Math.pow((1-e)/(1+e),.5*r)}function Wl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&(this.k0=.5*(1+yr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=D&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&Math.abs(Math.cos(this.lat_ts))>D&&(this.k0=.5*this.cons*$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Nt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=$t(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-I,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Vl(t){var e=t.x,r=t.y,a=Math.sin(r),n=Math.cos(r),i,o,s,h,c,d,f=z(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=D&&Math.abs(r+this.lat0)<=D?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*a+this.coslat0*n*Math.cos(f)),t.x=this.a*i*n*Math.sin(f)+this.x0,t.y=this.a*i*(this.coslat0*a-this.sinlat0*n*Math.cos(f))+this.y0,t):(o=2*Math.atan(this.ssfn_(r,a,this.e))-I,h=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=D?(c=Nt(this.e,r*this.con,this.con*a),d=2*this.a*this.k0*c/this.cons,t.x=this.x0+d*Math.sin(e-this.long0),t.y=this.y0-this.con*d*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<D?(i=2*this.a*this.k0/(1+h*Math.cos(f)),t.y=i*s):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*h*Math.cos(f))),t.y=i*(this.cosX0*s-this.sinX0*h*Math.cos(f))+this.y0),t.x=i*h*Math.sin(f)+this.x0,t))}function Yl(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,n,i,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,r=this.lat0,o<=D?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<D?this.lat0>0?e=z(this.long0+Math.atan2(t.x,-1*t.y)):e=z(this.long0+Math.atan2(t.x,t.y)):e=z(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=D){if(o<=D)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,a=o*this.cons/(2*this.a*this.k0),r=this.con*fr(this.e,a),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=D?i=this.X0:(i=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/o),e=z(this.long0+Math.atan2(t.x*Math.sin(n),o*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),r=-1*fr(this.e,Math.tan(.5*(I+i)));return t.x=e,t.y=r,t}var Ql=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],Xl={init:Wl,forward:Vl,inverse:Yl,names:Ql,ssfn_:Hl};function Jl(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,a=this.rf,n=1/a,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*h+this.alpha*o/2*c}function Kl(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+r)+this.K,n=2*(Math.atan(Math.exp(a))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t}function Zl(t){for(var e=t.x-this.x0,r=t.y-this.y0,a=e/this.R,n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(a)),o=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(n))),s=this.lambda0+o/this.alpha,h=0,c=i,d=-1e3,f=0;Math.abs(c-d)>1e-7;){if(++f>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),d=c,c=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=s,t.y=c,t}var tu=["somerc"],eu={init:Jl,forward:Kl,inverse:Zl,names:tu},be=1e-7;function ru(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function iu(){var t,e,r,a,n,i,o,s,h,c,d=0,f,g=0,y=0,_=0,m=0,M=0,E=0;this.no_off=ru(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),b&&(E=this.alpha),C&&(d=this.rectified_grid_angle*ht),b||C)g=this.longc;else if(y=this.long1,m=this.lat1,_=this.long2,M=this.lat2,Math.abs(m-M)<=be||(t=Math.abs(m))<=be||Math.abs(t-I)<=be||Math.abs(Math.abs(this.lat0)-I)<=be||Math.abs(Math.abs(M)-I)<=be)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>D?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/t,a=this.B*e/(r*Math.sqrt(t)),n=a*a-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=a,this.E*=Math.pow(Nt(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=n=1),b||C?(b?(f=Math.asin(Math.sin(E)/a),C||(d=E)):(f=d,E=Math.asin(a*Math.sin(f))),this.lam0=g-Math.asin(.5*(n-1/n)*Math.tan(f))/this.B):(i=Math.pow(Nt(this.e,m,Math.sin(m)),this.B),o=Math.pow(Nt(this.e,M,Math.sin(M)),this.B),n=this.E/i,h=(o-i)/(o+i),c=this.E*this.E,c=(c-o*i)/(c+o*i),t=y-_,t<-Math.pi?_-=ur:t>Math.pi&&(_+=ur),this.lam0=z(.5*(y+_)-Math.atan(c*Math.tan(.5*this.B*(y-_))/h)/this.B),f=Math.atan(2*Math.sin(this.B*z(y-this.lam0))/(n-1/n)),d=E=Math.asin(a*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(E))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(X-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(X+n))}function nu(t){var e={},r,a,n,i,o,s,h,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-I)>D){if(o=this.E/Math.pow(Nt(this.e,t.y,Math.sin(t.y)),this.B),s=1/o,r=.5*(o-s),a=.5*(o+s),i=Math.sin(this.B*t.x),n=(r*this.singam-i*this.cosgam)/a,Math.abs(Math.abs(n)-1)<D)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),s=Math.cos(this.B*t.x),Math.abs(s)<be?h=this.A*t.x:h=this.ArB*Math.atan2(r*this.cosgam+i*this.singam,s)}else c=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(e.x=h,e.y=c):(h-=this.u_0,e.x=c*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function au(t){var e,r,a,n,i,o,s,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*r),n=.5*(a-1/a),i=.5*(a+1/a),o=Math.sin(this.BrA*e),s=(o*this.cosgam+n*this.singam)/i,Math.abs(Math.abs(s)-1)<D)h.x=0,h.y=s<0?-I:I;else{if(h.y=this.E/Math.sqrt((1+s)/(1-s)),h.y=fr(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var su=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],ou={init:iu,forward:nu,inverse:au,names:su};function hu(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<D)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),a=$t(this.e,e,r),n=Nt(this.e,this.lat1,e),i=Math.sin(this.lat2),o=Math.cos(this.lat2),s=$t(this.e,i,o),h=Nt(this.e,this.lat2,i),c=Nt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>D?this.ns=Math.log(a/s)/Math.log(n/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function lu(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=D&&(r=yr(r)*(I-2*D));var a=Math.abs(Math.abs(r)-I),n,i;if(a>D)n=Nt(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if(a=r*this.ns,a<=0)return null;i=0}var o=this.ns*z(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t}function uu(t){var e,r,a,n,i,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),r=1):(e=-Math.sqrt(o*o+s*s),r=-1);var h=0;if(e!==0&&(h=Math.atan2(r*o,r*s)),e!==0||this.ns>0){if(r=1/this.ns,a=Math.pow(e/(this.a*this.f0),r),n=fr(this.e,a),n===-9999)return null}else n=-I;return i=z(h/this.ns+this.long0),t.x=i,t.y=n,t}var cu=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],fu={init:hu,forward:lu,inverse:uu,names:cu};function du(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function yu(t){var e,r,a,n,i,o,s,h=t.x,c=t.y,d=z(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),a=-d*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(a)),i=Math.asin(Math.cos(r)*Math.sin(a)/Math.cos(n)),o=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function gu(t){var e,r,a,n,i,o,s,h,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x),n=i/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(n)),r=Math.asin(Math.cos(a)*Math.sin(n)/Math.cos(e)),t.x=this.long0-r/this.alfa,s=e,h=0;var d=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(h=1),s=t.y,d+=1;while(h===0&&d<15);return d>=15?null:t}var vu=["Krovak","krovak"],_u={init:du,forward:yu,inverse:gu,names:vu};function gt(t,e,r,a,n){return t*n-e*Math.sin(2*n)+r*Math.sin(4*n)-a*Math.sin(6*n)}function gr(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function vr(t){return .375*t*(1+.25*t*(1+.46875*t))}function _r(t){return .05859375*t*t*(1+.75*t)}function mr(t){return t*t*t*(35/3072)}function Ae(t,e,r){var a=e*r;return t/Math.sqrt(1-a*a)}function ee(t){return Math.abs(t)<I?t:t-yr(t)*Math.PI}function $r(t,e,r,a,n){var i,o;i=t/e;for(var s=0;s<15;s++)if(o=(t-(e*i-r*Math.sin(2*i)+a*Math.sin(4*i)-n*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*a*Math.cos(4*i)-6*n*Math.cos(6*i)),i+=o,Math.abs(o)<=1e-10)return i;return NaN}function mu(){this.sphere||(this.e0=gr(this.es),this.e1=vr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.ml0=this.a*gt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Mu(t){var e,r,a=t.x,n=t.y;if(a=z(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(a)),r=this.a*(Math.atan2(Math.tan(n),Math.cos(a))-this.lat0);else{var i=Math.sin(n),o=Math.cos(n),s=Ae(this.a,this.e,i),h=Math.tan(n)*Math.tan(n),c=a*Math.cos(n),d=c*c,f=this.es*o*o/(1-this.es),g=this.a*gt(this.e0,this.e1,this.e2,this.e3,n);e=s*c*(1-d*h*(1/6-(8-h+8*f)*d/120)),r=g-this.ml0+s*i/o*d*(.5+(5-h+6*f)*d/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function pu(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,n;if(this.sphere){var i=r+this.lat0;a=Math.asin(Math.sin(i)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(i))}else{var o=this.ml0/this.a+r,s=$r(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-I)<=D)return t.x=this.long0,t.y=I,r<0&&(t.y*=-1),t;var h=Ae(this.a,this.e,Math.sin(s)),c=h*h*h/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(s),2),f=e*this.a/h,g=f*f;a=s-h*Math.tan(s)/c*f*f*(.5-(1+3*d)*f*f/24),n=f*(1-g*(d/3+(1+3*d)*d*g/15))/Math.cos(s)}return t.x=z(n+this.long0),t.y=ee(a),t}var bu=["Cassini","Cassini_Soldner","cass"],wu={init:mu,forward:Mu,inverse:pu,names:bu};function Kt(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var xu=1,Eu=2,Cu=3,Pu=4;function Su(){var t=Math.abs(this.lat0);if(Math.abs(t-I)<D?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<D?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Kt(this.e,1),this.mmf=.5/(1-this.es),this.apa=Du(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Kt(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Tu(t){var e,r,a,n,i,o,s,h,c,d,f=t.x,g=t.y;if(f=z(f-this.long0),this.sphere){if(i=Math.sin(g),d=Math.cos(g),a=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+d*a:1+this.sinph0*i+this.cosph0*d*a,r<=D)return null;r=Math.sqrt(2/r),e=r*d*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(g+this.lat0)<D)return null;r=X-g*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(f),r*=a}}else{switch(s=0,h=0,c=0,a=Math.cos(f),n=Math.sin(f),i=Math.sin(g),o=Kt(this.e,i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,h=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*h*a;break;case this.EQUIT:c=1+h*a;break;case this.N_POLE:c=I+g,o=this.qp-o;break;case this.S_POLE:c=g-I,o=this.qp+o;break}if(Math.abs(c)<D)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?r=this.ymf*c*(this.cosb1*s-this.sinb1*h*a):r=(c=Math.sqrt(2/(1+h*a)))*s*this.ymf,e=this.xmf*c*h*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*n,r=a*(this.mode===this.S_POLE?c:-c)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function Au(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,n,i,o,s,h,c;if(this.sphere){var d=0,f,g=0;if(f=Math.sqrt(e*e+r*r),n=f*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=D?0:Math.asin(r*g/f),e*=g,r=d*f;break;case this.OBLIQ:n=Math.abs(f)<=D?this.lat0:Math.asin(d*this.sinph0+r*g*this.cosph0/f),e*=g*this.cosph0,r=(d-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:r=-r,n=I-n;break;case this.S_POLE:n-=I;break}a=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,h=Math.sqrt(e*e+r*r),h<D)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*h/this.rq),i=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=i*this.sinb1+r*o*this.cosb1/h,s=this.qp*c,r=h*this.cosb1*i-r*this.sinb1*o):(c=r*o/h,s=this.qp*c,r=h*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),s=e*e+r*r,!s)return t.x=this.long0,t.y=this.lat0,t;c=1-s/this.qp,this.mode===this.S_POLE&&(c=-c)}a=Math.atan2(e,r),n=zu(Math.asin(c),this.apa)}return t.x=z(this.long0+a),t.y=n,t}var Ou=.3333333333333333,Iu=.17222222222222222,Ru=.10257936507936508,Nu=.06388888888888888,Lu=.0664021164021164,Fu=.016415012942191543;function Du(t){var e,r=[];return r[0]=t*Ou,e=t*t,r[0]+=e*Iu,r[1]=e*Nu,e*=t,r[0]+=e*Ru,r[1]+=e*Lu,r[2]=e*Fu,r}function zu(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var Uu=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Bu={init:Su,forward:Tu,inverse:Au,names:Uu,S_POLE:xu,N_POLE:Eu,EQUIT:Cu,OBLIQ:Pu};function te(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function $u(){Math.abs(this.lat1+this.lat2)<D||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=$t(this.e3,this.sin_po,this.cos_po),this.qs1=Kt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=$t(this.e3,this.sin_po,this.cos_po),this.qs2=Kt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Kt(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>D?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function ku(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var a=Kt(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,i=this.ns0*z(e-this.long0),o=n*Math.sin(i)+this.x0,s=this.rh-n*Math.cos(i)+this.y0;return t.x=o,t.y=s,t}function qu(t){var e,r,a,n,i,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),n=0,e!==0&&(n=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(r=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,r)),i=z(n/this.ns0+this.long0),t.x=i,t.y=o,t}function ju(t,e){var r,a,n,i,o,s=te(.5*e);if(t<D)return s;for(var h=t*t,c=1;c<=25;c++)if(r=Math.sin(s),a=Math.cos(s),n=t*r,i=1-n*n,o=.5*i*i/a*(e/(1-h)-r/i+.5/t*Math.log((1-n)/(1+n))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var Gu=["Albers_Conic_Equal_Area","Albers","aea"],Hu={init:$u,forward:ku,inverse:qu,names:Gu,phi1z:ju};function Wu(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Vu(t){var e,r,a,n,i,o,s,h,c=t.x,d=t.y;return a=z(c-this.long0),e=Math.sin(d),r=Math.cos(d),n=Math.cos(a),o=this.sin_p14*e+this.cos_p14*r*n,i=1,o>0||Math.abs(o)<=D?(s=this.x0+this.a*i*r*Math.sin(a)/o,h=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*n)/o):(s=this.x0+this.infinity_dist*r*Math.sin(a),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*n)),t.x=s,t.y=h,t}function Yu(t){var e,r,a,n,i,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),r=Math.sin(n),a=Math.cos(n),o=te(a*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*a-t.y*this.sin_p14*r),i=z(this.long0+i)):(o=this.phic0,i=0),t.x=i,t.y=o,t}var Qu=["gnom"],Xu={init:Wu,forward:Vu,inverse:Yu,names:Qu};function Ju(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*I:I;for(var a=Math.asin(.5*e),n,i,o,s,h=0;h<30;h++)if(i=Math.sin(a),o=Math.cos(a),s=t*i,n=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),a+=n,Math.abs(n)<=1e-10)return a;return NaN}function Ku(){this.sphere||(this.k0=$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Zu(t){var e=t.x,r=t.y,a,n,i=z(e-this.long0);if(this.sphere)a=this.x0+this.a*i*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Kt(this.e,Math.sin(r));a=this.x0+this.a*this.k0*i,n=this.y0+this.a*o*.5/this.k0}return t.x=a,t.y=n,t}function tc(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=Ju(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var ec=["cea"],rc={init:Ku,forward:Zu,inverse:tc,names:ec};function ic(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function nc(t){var e=t.x,r=t.y,a=z(e-this.long0),n=ee(r-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*n,t}function ac(t){var e=t.x,r=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ee(this.lat0+(r-this.y0)/this.a),t}var sc=["Equirectangular","Equidistant_Cylindrical","eqc"],oc={init:ic,forward:nc,inverse:ac,names:sc},Jn=20;function hc(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gr(this.es),this.e1=vr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.ml0=this.a*gt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function lc(t){var e=t.x,r=t.y,a,n,i,o=z(e-this.long0);if(i=o*Math.sin(r),this.sphere)Math.abs(r)<=D?(a=this.a*o,n=-1*this.a*this.lat0):(a=this.a*Math.sin(i)/Math.tan(r),n=this.a*(ee(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=D)a=this.a*o,n=-1*this.ml0;else{var s=Ae(this.a,this.e,Math.sin(r))/Math.tan(r);a=s*Math.sin(i),n=this.a*gt(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(i))}return t.x=a+this.x0,t.y=n+this.y0,t}function uc(t){var e,r,a,n,i,o,s,h,c;if(a=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=D)e=z(a/this.a+this.long0),r=0;else{o=this.lat0+n/this.a,s=a*a/this.a/this.a+o*o,h=o;var d;for(i=Jn;i;--i)if(d=Math.tan(h),c=-1*(o*(h*d+1)-h-.5*(h*h+s)*d)/((h-o)/d-1),h+=c,Math.abs(c)<=D){r=h;break}e=z(this.long0+Math.asin(a*Math.tan(h)/this.a)/Math.sin(r))}else if(Math.abs(n+this.ml0)<=D)r=0,e=z(this.long0+a/this.a);else{o=(this.ml0+n)/this.a,s=a*a/this.a/this.a+o*o,h=o;var f,g,y,_,m;for(i=Jn;i;--i)if(m=this.e*Math.sin(h),f=Math.sqrt(1-m*m)*Math.tan(h),g=this.a*gt(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),_=g/this.a,c=(o*(f*_+1)-_-.5*f*(_*_+s))/(this.es*Math.sin(2*h)*(_*_+s-2*o*_)/(4*f)+(o-_)*(f*y-2/Math.sin(2*h))-y),h-=c,Math.abs(c)<=D){r=h;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=z(this.long0+Math.asin(a*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var cc=["Polyconic","poly"],fc={init:hc,forward:lc,inverse:uc,names:cc};function dc(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function yc(t){var e,r=t.x,a=t.y,n=a-this.lat0,i=r-this.long0,o=n/ar*1e-5,s=i,h=1,c=0;for(e=1;e<=10;e++)h=h*o,c=c+this.A[e]*h;var d=c,f=s,g=1,y=0,_,m,M=0,E=0;for(e=1;e<=6;e++)_=g*d-y*f,m=y*d+g*f,g=_,y=m,M=M+this.B_re[e]*g-this.B_im[e]*y,E=E+this.B_im[e]*g+this.B_re[e]*y;return t.x=E*this.a+this.x0,t.y=M*this.a+this.y0,t}function gc(t){var e,r=t.x,a=t.y,n=r-this.x0,i=a-this.y0,o=i/this.a,s=n/this.a,h=1,c=0,d,f,g=0,y=0;for(e=1;e<=6;e++)d=h*o-c*s,f=c*o+h*s,h=d,c=f,g=g+this.C_re[e]*h-this.C_im[e]*c,y=y+this.C_im[e]*h+this.C_re[e]*c;for(var _=0;_<this.iterations;_++){var m=g,M=y,E,b,C=o,N=s;for(e=2;e<=6;e++)E=m*g-M*y,b=M*g+m*y,m=E,M=b,C=C+(e-1)*(this.B_re[e]*m-this.B_im[e]*M),N=N+(e-1)*(this.B_im[e]*m+this.B_re[e]*M);m=1,M=0;var T=this.B_re[1],k=this.B_im[1];for(e=2;e<=6;e++)E=m*g-M*y,b=M*g+m*y,m=E,M=b,T=T+e*(this.B_re[e]*m-this.B_im[e]*M),k=k+e*(this.B_im[e]*m+this.B_re[e]*M);var K=T*T+k*k;g=(C*T+N*k)/K,y=(N*T-C*k)/K}var F=g,tt=y,ut=1,_t=0;for(e=1;e<=9;e++)ut=ut*F,_t=_t+this.D[e]*ut;var nt=this.lat0+_t*ar*1e5,Ie=this.long0+tt;return t.x=Ie,t.y=nt,t}var vc=["New_Zealand_Map_Grid","nzmg"],_c={init:dc,forward:yc,inverse:gc,names:vc};function mc(){}function Mc(t){var e=t.x,r=t.y,a=z(e-this.long0),n=this.x0+this.a*a,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=n,t.y=i,t}function pc(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var bc=["Miller_Cylindrical","mill"],wc={init:mc,forward:Mc,inverse:pc,names:bc},xc=20;function Ec(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Pi(this.es)}function Cc(t){var e,r,a=t.x,n=t.y;if(a=z(a-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var i=this.n*Math.sin(n),o=xc;o;--o){var s=(this.m*n+Math.sin(n)-i)/(this.m+Math.cos(n));if(n-=s,Math.abs(s)<D)break}e=this.a*this.C_x*a*(this.m+Math.cos(n)),r=this.a*this.C_y*n}else{var h=Math.sin(n),c=Math.cos(n);r=this.a*Oe(n,h,c,this.en),e=this.a*a*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=r,t}function Pc(t){var e,r,a,n;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=te((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=te(Math.sin(e)/this.n)),a=z(a+this.long0),e=ee(e)):(e=Si(t.y/this.a,this.es,this.en),n=Math.abs(e),n<I?(n=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),a=z(r)):n-D<I&&(a=this.long0)),t.x=a,t.y=e,t}var Sc=["Sinusoidal","sinu"],Tc={init:Ec,forward:Cc,inverse:Pc,names:Sc};function Ac(){}function Oc(t){for(var e=t.x,r=t.y,a=z(e-this.long0),n=r,i=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-i)/(1+Math.cos(n));if(n+=o,Math.abs(o)<D)break}n/=2,Math.PI/2-Math.abs(r)<D&&(a=0);var s=.900316316158*this.a*a*Math.cos(n)+this.x0,h=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=s,t.y=h,t}function Ic(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var a=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var n=Math.asin(r);return t.x=a,t.y=n,t}var Rc=["Mollweide","moll"],Nc={init:Ac,forward:Oc,inverse:Ic,names:Rc};function Lc(){Math.abs(this.lat1+this.lat2)<D||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gr(this.es),this.e1=vr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=$t(this.e,this.sinphi,this.cosphi),this.ml1=gt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<D?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=$t(this.e,this.sinphi,this.cosphi),this.ml2=gt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Fc(t){var e=t.x,r=t.y,a;if(this.sphere)a=this.a*(this.g-r);else{var n=gt(this.e0,this.e1,this.e2,this.e3,r);a=this.a*(this.g-n)}var i=this.ns*z(e-this.long0),o=this.x0+a*Math.sin(i),s=this.y0+this.rh-a*Math.cos(i);return t.x=o,t.y=s,t}function Dc(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,a,n;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;if(r!==0&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere)return n=z(this.long0+i/this.ns),a=ee(this.g-r/this.a),t.x=n,t.y=a,t;var o=this.g-r/this.a;return a=$r(o,this.e0,this.e1,this.e2,this.e3),n=z(this.long0+i/this.ns),t.x=n,t.y=a,t}var zc=["Equidistant_Conic","eqdc"],Uc={init:Lc,forward:Fc,inverse:Dc,names:zc};function Bc(){this.R=this.a}function $c(t){var e=t.x,r=t.y,a=z(e-this.long0),n,i;Math.abs(r)<=D&&(n=this.x0+this.R*a,i=this.y0);var o=te(2*Math.abs(r/Math.PI));(Math.abs(a)<=D||Math.abs(Math.abs(r)-I)<=D)&&(n=this.x0,r>=0?i=this.y0+Math.PI*this.R*Math.tan(.5*o):i=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),h=s*s,c=Math.sin(o),d=Math.cos(o),f=d/(c+d-1),g=f*f,y=f*(2/c-1),_=y*y,m=Math.PI*this.R*(s*(f-_)+Math.sqrt(h*(f-_)*(f-_)-(_+h)*(g-_)))/(_+h);a<0&&(m=-m),n=this.x0+m;var M=h+f;return m=Math.PI*this.R*(y*M-s*Math.sqrt((_+h)*(h+1)-M*M))/(_+h),r>=0?i=this.y0+m:i=this.y0-m,t.x=n,t.y=i,t}function kc(t){var e,r,a,n,i,o,s,h,c,d,f,g,y;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,a=t.x/f,n=t.y/f,i=a*a+n*n,o=-Math.abs(n)*(1+i),s=o-2*n*n+a*a,h=-2*o+1+2*n*n+i*i,y=n*n/h+(2*s*s*s/h/h/h-9*o*s/h/h)/27,c=(o-s*s/3/h)/h,d=2*Math.sqrt(-c/3),f=3*y/c/d,Math.abs(f)>1&&(f>=0?f=1:f=-1),g=Math.acos(f)/3,t.y>=0?r=(-d*Math.cos(g+Math.PI/3)-s/3/h)*Math.PI:r=-(-d*Math.cos(g+Math.PI/3)-s/3/h)*Math.PI,Math.abs(a)<D?e=this.long0:e=z(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(a*a-n*n)+i*i))/2/a),t.x=e,t.y=r,t}var qc=["Van_der_Grinten_I","VanDerGrinten","vandg"],jc={init:Bc,forward:$c,inverse:kc,names:qc};function Gc(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Hc(t){var e=t.x,r=t.y,a=Math.sin(t.y),n=Math.cos(t.y),i=z(e-this.long0),o,s,h,c,d,f,g,y,_,m,M,E,b,C,N,T,k,K,F,tt,ut,_t,nt;return this.sphere?Math.abs(this.sin_p12-1)<=D?(t.x=this.x0+this.a*(I-r)*Math.sin(i),t.y=this.y0-this.a*(I-r)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=D?(t.x=this.x0+this.a*(I+r)*Math.sin(i),t.y=this.y0+this.a*(I+r)*Math.cos(i),t):(K=this.sin_p12*a+this.cos_p12*n*Math.cos(i),T=Math.acos(K),k=T?T/Math.sin(T):1,t.x=this.x0+this.a*k*n*Math.sin(i),t.y=this.y0+this.a*k*(this.cos_p12*a-this.sin_p12*n*Math.cos(i)),t):(o=gr(this.es),s=vr(this.es),h=_r(this.es),c=mr(this.es),Math.abs(this.sin_p12-1)<=D?(d=this.a*gt(o,s,h,c,I),f=this.a*gt(o,s,h,c,r),t.x=this.x0+(d-f)*Math.sin(i),t.y=this.y0-(d-f)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=D?(d=this.a*gt(o,s,h,c,I),f=this.a*gt(o,s,h,c,r),t.x=this.x0+(d+f)*Math.sin(i),t.y=this.y0+(d+f)*Math.cos(i),t):(g=a/n,y=Ae(this.a,this.e,this.sin_p12),_=Ae(this.a,this.e,a),m=Math.atan((1-this.es)*g+this.es*y*this.sin_p12/(_*n)),M=Math.atan2(Math.sin(i),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(i)),M===0?F=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(M)-Math.PI)<=D?F=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):F=Math.asin(Math.sin(i)*Math.cos(m)/Math.sin(M)),E=this.e*this.sin_p12/Math.sqrt(1-this.es),b=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),C=E*b,N=b*b,tt=F*F,ut=tt*F,_t=ut*F,nt=_t*F,T=y*F*(1-tt*N*(1-N)/6+ut/8*C*(1-2*N)+_t/120*(N*(4-7*N)-3*E*E*(1-7*N))-nt/48*C),t.x=this.x0+T*Math.sin(M),t.y=this.y0+T*Math.cos(M),t))}function Wc(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,n,i,o,s,h,c,d,f,g,y,_,m,M,E,b,C,N,T,k,K,F;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*I*this.a?void 0:(r=e/this.a,a=Math.sin(r),n=Math.cos(r),i=this.long0,Math.abs(e)<=D?o=this.lat0:(o=te(n*this.sin_p12+t.y*a*this.cos_p12/e),s=Math.abs(this.lat0)-I,Math.abs(s)<=D?this.lat0>=0?i=z(this.long0+Math.atan2(t.x,-t.y)):i=z(this.long0-Math.atan2(-t.x,t.y)):i=z(this.long0+Math.atan2(t.x*a,e*this.cos_p12*n-t.y*this.sin_p12*a))),t.x=i,t.y=o,t)):(h=gr(this.es),c=vr(this.es),d=_r(this.es),f=mr(this.es),Math.abs(this.sin_p12-1)<=D?(g=this.a*gt(h,c,d,f,I),e=Math.sqrt(t.x*t.x+t.y*t.y),y=g-e,o=$r(y/this.a,h,c,d,f),i=z(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=o,t):Math.abs(this.sin_p12+1)<=D?(g=this.a*gt(h,c,d,f,I),e=Math.sqrt(t.x*t.x+t.y*t.y),y=e-g,o=$r(y/this.a,h,c,d,f),i=z(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),M=Math.atan2(t.x,t.y),_=Ae(this.a,this.e,this.sin_p12),E=Math.cos(M),b=this.e*this.cos_p12*E,C=-b*b/(1-this.es),N=3*this.es*(1-C)*this.sin_p12*this.cos_p12*E/(1-this.es),T=e/_,k=T-C*(1+C)*Math.pow(T,3)/6-N*(1+3*C)*Math.pow(T,4)/24,K=1-C*k*k/2-T*k*k*k/6,m=Math.asin(this.sin_p12*Math.cos(k)+this.cos_p12*Math.sin(k)*E),i=z(this.long0+Math.asin(Math.sin(M)*Math.sin(k)/Math.cos(m))),F=Math.sin(m),o=Math.atan2((F-this.es*K*this.sin_p12)*Math.tan(m),F*(1-this.es)),t.x=i,t.y=o,t))}var Vc=["Azimuthal_Equidistant","aeqd"],Yc={init:Gc,forward:Hc,inverse:Wc,names:Vc};function Qc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Xc(t){var e,r,a,n,i,o,s,h,c=t.x,d=t.y;return a=z(c-this.long0),e=Math.sin(d),r=Math.cos(d),n=Math.cos(a),o=this.sin_p14*e+this.cos_p14*r*n,i=1,(o>0||Math.abs(o)<=D)&&(s=this.a*i*r*Math.sin(a),h=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*n)),t.x=s,t.y=h,t}function Jc(t){var e,r,a,n,i,o,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=te(e/this.a),a=Math.sin(r),n=Math.cos(r),o=this.long0,Math.abs(e)<=D?(s=this.lat0,t.x=o,t.y=s,t):(s=te(n*this.sin_p14+t.y*a*this.cos_p14/e),i=Math.abs(this.lat0)-I,Math.abs(i)<=D?(this.lat0>=0?o=z(this.long0+Math.atan2(t.x,-t.y)):o=z(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=z(this.long0+Math.atan2(t.x*a,e*this.cos_p14*n-t.y*this.sin_p14*a)),t.x=o,t.y=s,t))}var Kc=["ortho"],Zc={init:Qc,forward:Xc,inverse:Jc,names:Kc},et={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},J={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function tf(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=I-X/2?this.face=et.TOP:this.lat0<=-(I-X/2)?this.face=et.BOTTOM:Math.abs(this.long0)<=X?this.face=et.FRONT:Math.abs(this.long0)<=I+X?this.face=this.long0>0?et.RIGHT:et.LEFT:this.face=et.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function ef(t){var e={x:0,y:0},r,a,n,i,o,s,h={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,a=t.x,this.face===et.TOP)i=I-r,a>=X&&a<=I+X?(h.value=J.AREA_0,n=a-I):a>I+X||a<=-(I+X)?(h.value=J.AREA_1,n=a>0?a-lt:a+lt):a>-(I+X)&&a<=-X?(h.value=J.AREA_2,n=a+I):(h.value=J.AREA_3,n=a);else if(this.face===et.BOTTOM)i=I+r,a>=X&&a<=I+X?(h.value=J.AREA_0,n=-a+I):a<X&&a>=-X?(h.value=J.AREA_1,n=-a):a<-X&&a>=-(I+X)?(h.value=J.AREA_2,n=-a-I):(h.value=J.AREA_3,n=a>0?-a+lt:-a-lt);else{var c,d,f,g,y,_,m;this.face===et.RIGHT?a=Se(a,+I):this.face===et.BACK?a=Se(a,3.14159265359):this.face===et.LEFT&&(a=Se(a,-I)),g=Math.sin(r),y=Math.cos(r),_=Math.sin(a),m=Math.cos(a),c=y*m,d=y*_,f=g,this.face===et.FRONT?(i=Math.acos(c),n=Ir(i,f,d,h)):this.face===et.RIGHT?(i=Math.acos(d),n=Ir(i,f,-c,h)):this.face===et.BACK?(i=Math.acos(-c),n=Ir(i,f,-d,h)):this.face===et.LEFT?(i=Math.acos(-d),n=Ir(i,f,c,h)):(i=n=0,h.value=J.AREA_0)}return s=Math.atan(12/lt*(n+Math.acos(Math.sin(n)*Math.cos(X))-I)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n))))),h.value===J.AREA_1?s+=I:h.value===J.AREA_2?s+=lt:h.value===J.AREA_3&&(s+=1.5*lt),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function rf(t){var e={lam:0,phi:0},r,a,n,i,o,s,h,c,d,f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=J.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=J.AREA_1,r-=I):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=J.AREA_2,r=r<0?r+lt:r-lt):(f.value=J.AREA_3,r+=I),d=lt/12*Math.tan(r),o=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),s=Math.atan(o),n=Math.cos(r),i=Math.tan(a),h=1-n*n*i*i*(1-Math.cos(Math.atan(1/Math.cos(s)))),h<-1?h=-1:h>1&&(h=1),this.face===et.TOP)c=Math.acos(h),e.phi=I-c,f.value===J.AREA_0?e.lam=s+I:f.value===J.AREA_1?e.lam=s<0?s+lt:s-lt:f.value===J.AREA_2?e.lam=s-I:e.lam=s;else if(this.face===et.BOTTOM)c=Math.acos(h),e.phi=c-I,f.value===J.AREA_0?e.lam=-s+I:f.value===J.AREA_1?e.lam=-s:f.value===J.AREA_2?e.lam=-s-I:e.lam=s<0?-s-lt:-s+lt;else{var g,y,_;g=h,d=g*g,d>=1?_=0:_=Math.sqrt(1-d)*Math.sin(s),d+=_*_,d>=1?y=0:y=Math.sqrt(1-d),f.value===J.AREA_1?(d=y,y=-_,_=d):f.value===J.AREA_2?(y=-y,_=-_):f.value===J.AREA_3&&(d=y,y=_,_=-d),this.face===et.RIGHT?(d=g,g=-y,y=d):this.face===et.BACK?(g=-g,y=-y):this.face===et.LEFT&&(d=g,g=y,y=-d),e.phi=Math.acos(-_)-I,e.lam=Math.atan2(y,g),this.face===et.RIGHT?e.lam=Se(e.lam,-I):this.face===et.BACK?e.lam=Se(e.lam,-3.14159265359):this.face===et.LEFT&&(e.lam=Se(e.lam,+I))}if(this.es!==0){var m,M,E;m=e.phi<0?1:0,M=Math.tan(e.phi),E=this.b/Math.sqrt(M*M+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-E*E)/(this.one_minus_f*E)),m&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Ir(t,e,r,a){var n;return t<D?(a.value=J.AREA_0,n=0):(n=Math.atan2(e,r),Math.abs(n)<=X?a.value=J.AREA_0:n>X&&n<=I+X?(a.value=J.AREA_1,n-=I):n>I+X||n<=-(I+X)?(a.value=J.AREA_2,n=n>=0?n-lt:n+lt):(a.value=J.AREA_3,n+=I)),n}function Se(t,e){var r=t+e;return r<-3.14159265359?r+=ur:r>3.14159265359&&(r-=ur),r}var nf=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],af={init:tf,forward:ef,inverse:rf,names:nf},pi=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ir=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Sa=.8487,Ta=1.3523,Aa=Ut/5,sf=1/Aa,Ce=18,kr=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},of=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function hf(t,e,r,a){for(var n=e;a;--a){var i=t(n);if(n-=i,Math.abs(i)<r)break}return n}function lf(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function uf(t){var e=z(t.x-this.long0),r=Math.abs(t.y),a=Math.floor(r*Aa);a<0?a=0:a>=Ce&&(a=Ce-1),r=Ut*(r-sf*a);var n={x:kr(pi[a],r)*e,y:kr(ir[a],r)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*Sa+this.x0,n.y=n.y*this.a*Ta+this.y0,n}function cf(t){var e={x:(t.x-this.x0)/(this.a*Sa),y:Math.abs(t.y-this.y0)/(this.a*Ta)};if(e.y>=1)e.x/=pi[Ce][0],e.y=t.y<0?-I:I;else{var r=Math.floor(e.y*Ce);for(r<0?r=0:r>=Ce&&(r=Ce-1);;)if(ir[r][0]>e.y)--r;else if(ir[r+1][0]<=e.y)++r;else break;var a=ir[r],n=5*(e.y-a[0])/(ir[r+1][0]-a[0]);n=hf(function(i){return(kr(a,i)-e.y)/of(a,i)},n,D,100),e.x/=kr(pi[r],n),e.y=(5*r+n)*ht,t.y<0&&(e.y=-e.y)}return e.x=z(e.x+this.long0),e}var ff=["Robinson","robin"],df={init:lf,forward:uf,inverse:cf,names:ff};function yf(){this.name="geocent"}function gf(t){var e=va(t,this.es,this.a);return e}function vf(t){var e=_a(t,this.es,this.a,this.b);return e}var _f=["Geocentric","geocentric","geocent","Geocent"],mf={init:yf,forward:gf,inverse:vf,names:_f},dt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},tr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Mf(){if(Object.keys(tr).forEach((function(r){if(typeof this[r]>"u")this[r]=tr[r].def;else{if(tr[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);tr[r].num&&(this[r]=parseFloat(this[r]))}tr[r].degrees&&(this[r]=this[r]*ht)}).bind(this)),Math.abs(Math.abs(this.lat0)-I)<D?this.mode=this.lat0<0?dt.S_POLE:dt.N_POLE:Math.abs(this.lat0)<D?this.mode=dt.EQUIT:(this.mode=dt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function pf(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),n,i;switch(this.mode){case dt.OBLIQ:i=this.sinph0*e+this.cosph0*r*a;break;case dt.EQUIT:i=r*a;break;case dt.S_POLE:i=-e;break;case dt.N_POLE:i=e;break}switch(i=this.pn1/(this.p-i),n=i*r*Math.sin(t.x),this.mode){case dt.OBLIQ:i*=this.cosph0*e-this.sinph0*r*a;break;case dt.EQUIT:i*=e;break;case dt.N_POLE:i*=-(r*a);break;case dt.S_POLE:i*=r*a;break}var o,s;return o=i*this.cg+n*this.sg,s=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-i*this.sg)*this.cw*s,i=o*s,t.x=n*this.a,t.y=i*this.a,t}function bf(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,a,n;n=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*n,a=this.pn1*t.y*this.cw*n,t.x=r*this.cg+a*this.sg,t.y=a*this.cg-r*this.sg;var i=bt(t.x,t.y);if(Math.abs(i)<D)e.x=0,e.y=t.y;else{var o,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),o=Math.sqrt(1-s*s),this.mode){case dt.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/i),t.y=(o-this.sinph0*Math.sin(e.y))*i,t.x*=s*this.cosph0;break;case dt.EQUIT:e.y=Math.asin(t.y*s/i),t.y=o*i,t.x*=s;break;case dt.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case dt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var wf=["Tilted_Perspective","tpers"],xf={init:Mf,forward:pf,inverse:bf,names:wf};function Ef(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Cf(t){var e=t.x,r=t.y,a,n,i,o;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var s=this.radius_p/bt(this.radius_p*Math.cos(r),Math.sin(r));if(n=s*Math.cos(e)*Math.cos(r),i=s*Math.sin(e)*Math.cos(r),o=s*Math.sin(r),(this.radius_g-n)*n-i*i-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/bt(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(i/a),t.y=this.radius_g_1*Math.atan(o/bt(i,a)))}else this.shape==="sphere"&&(a=Math.cos(r),n=Math.cos(e)*a,i=Math.sin(e)*a,o=Math.sin(r),a=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/bt(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(i/a),t.y=this.radius_g_1*Math.atan(o/bt(i,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Pf(t){var e=-1,r=0,a=0,n,i,o,s;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*bt(1,a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*bt(1,r));var h=a/this.radius_p;if(n=r*r+h*h+e*e,i=2*this.radius_g*e,o=i*i-4*n*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(o))/(2*n),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),n=r*r+a*a+e*e,i=2*this.radius_g*e,o=i*i-4*n*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(o))/(2*n),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Sf=["Geostationary Satellite View","Geostationary_Satellite","geos"],Tf={init:Ef,forward:Cf,inverse:Pf,names:Sf},sr=1.340264,or=-.081106,hr=893e-6,lr=.003796,qr=Math.sqrt(3)/2;function Af(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Of(t){var e=z(t.x-this.long0),r=t.y,a=Math.asin(qr*Math.sin(r)),n=a*a,i=n*n*n;return t.x=e*Math.cos(a)/(qr*(sr+3*or*n+i*(7*hr+9*lr*n))),t.y=a*(sr+or*n+i*(hr+lr*n)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function If(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,a=t.y,n,i,o,s,h,c;for(c=0;c<r&&(n=a*a,i=n*n*n,o=a*(sr+or*n+i*(hr+lr*n))-t.y,s=sr+3*or*n+i*(7*hr+9*lr*n),a-=h=o/s,!(Math.abs(h)<e));++c);return n=a*a,i=n*n*n,t.x=qr*t.x*(sr+3*or*n+i*(7*hr+9*lr*n))/Math.cos(a),t.y=Math.asin(Math.sin(a)/qr),t.x=z(t.x+this.long0),t}var Rf=["eqearth","Equal Earth","Equal_Earth"],Nf={init:Af,forward:Of,inverse:If,names:Rf},dr=1e-10;function Lf(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<dr)throw new Error;this.es?(this.en=Pi(this.es),this.m1=Oe(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Df,this.forward=Ff):(Math.abs(this.phi1)+dr>=I?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Uf,this.forward=zf)}function Ff(t){var e=z(t.x-(this.long0||0)),r=t.y,a,n,i;return a=this.am1+this.m1-Oe(r,n=Math.sin(r),i=Math.cos(r),this.en),n=i*e/(a*Math.sqrt(1-this.es*n*n)),t.x=a*Math.sin(n),t.y=this.am1-a*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Df(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a,n;if(r=bt(t.x,t.y=this.am1-t.y),n=Si(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(n))<I)e=Math.sin(n),a=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-I)<=dr)a=0;else throw new Error;return t.x=z(a+(this.long0||0)),t.y=ee(n),t}function zf(t){var e=z(t.x-(this.long0||0)),r=t.y,a,n;return n=this.cphi1+this.phi1-r,Math.abs(n)>dr?(t.x=n*Math.sin(a=e*Math.cos(r)/n),t.y=this.cphi1-n*Math.cos(a)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Uf(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a=bt(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-a,Math.abs(r)>I)throw new Error;return Math.abs(Math.abs(r)-I)<=dr?e=0:e=a*Math.atan2(t.x,t.y)/Math.cos(r),t.x=z(e+(this.long0||0)),t.y=ee(r),t}var Bf=["bonne","Bonne (Werner lat_1=90)"],$f={init:Lf,names:Bf};function kf(t){t.Proj.projections.add(Lr),t.Proj.projections.add(Fr),t.Proj.projections.add(Fl),t.Proj.projections.add(Gl),t.Proj.projections.add(Xl),t.Proj.projections.add(eu),t.Proj.projections.add(ou),t.Proj.projections.add(fu),t.Proj.projections.add(_u),t.Proj.projections.add(wu),t.Proj.projections.add(Bu),t.Proj.projections.add(Hu),t.Proj.projections.add(Xu),t.Proj.projections.add(rc),t.Proj.projections.add(oc),t.Proj.projections.add(fc),t.Proj.projections.add(_c),t.Proj.projections.add(wc),t.Proj.projections.add(Tc),t.Proj.projections.add(Nc),t.Proj.projections.add(Uc),t.Proj.projections.add(jc),t.Proj.projections.add(Yc),t.Proj.projections.add(Zc),t.Proj.projections.add(af),t.Proj.projections.add(df),t.Proj.projections.add(mf),t.Proj.projections.add(xf),t.Proj.projections.add(Tf),t.Proj.projections.add(Nf),t.Proj.projections.add($f)}vt.defaultDatum="WGS84";vt.Proj=Bt;vt.WGS84=new vt.Proj("WGS84");vt.Point=Te;vt.toPoint=ma;vt.defs=yt;vt.nadgrid=zh;vt.transform=Br;vt.mgrs=Zh;vt.version="__VERSION__";kf(vt);function qf(t,e,r,a,n,i=1){const o=t.distanceTo(e),s=r*(Math.PI/180);let h=a*n/(2*o*Math.tan(s/2));if(i!==1){const y=1-Math.min(1,o/1e3)*(1-i);h*=y}const c=new ce().subVectors(e,t).normalize(),d=new ce(0,0,-1),f=c.dot(d);return f<0&&(h*=Math.max(0,1+f)),h}vt.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs");let pt=null,jr,Gr=null,Dr={},bi={},Oa,Ia="rgb",nr=new Set;function jf(t,e){const r=e.split("-").map(i=>parseInt(i)),a=[t[3]-t[0],t[4]-t[1],t[5]-t[2]].map(i=>i/Math.pow(2,r[0]));return[t[0]+a[0]*r[1]+a[0]/2,t[1]+a[1]*r[2]+a[1]/2,t[2]+a[2]*r[3]+a[2]/2]}function Kn(t,e){return t.map(r=>r(e))}async function Gf(t){try{if(pt=await vi.Copc.create(t),!pt||!pt.wkt){self.postMessage({type:"error",message:"Failed to initialize COPC or WKT is missing"});return}jr=vt(pt.wkt);try{Gr=vt(pt.wkt,"EPSG:3857")}catch{console.warn("Direct projection to Web Mercator failed, using two-step transformation"),Gr=null}const{nodes:e}=await vi.Copc.loadHierarchyPage(t,pt.info.rootHierarchyPage);Dr=e,bi=Object.entries(Dr).reduce((n,[i,o])=>{const s=jf(pt.info.cube,i);return{...n,[i]:s}},{});const r=bi["0-0-0-0"],a=jr.inverse([r[0],r[1]]);self.postMessage({type:"initialized",center:a,nodeCount:Object.keys(Dr).length})}catch(e){self.postMessage({type:"error",message:`Error initializing COPC: ${e instanceof Error?e.message:String(e)}`})}}async function Hf(t){if(!pt){self.postMessage({type:"error",message:"COPC not initialized"});return}if(nr.has(t)){nr.delete(t);return}try{const e=Dr[t];if(!e){self.postMessage({type:"error",message:`Node ${t} not found`});return}const r=await vi.Copc.loadPointDataView(Oa,pt,e);if(nr.has(t)){nr.delete(t);return}const a=new Float32Array(e.pointCount*3),n=new Float32Array(e.pointCount*3),i=r.dimensions.Red&&r.dimensions.Green&&r.dimensions.Blue,o=r.dimensions.Intensity,h=2*Math.PI*6378137,c=Math.PI/180;for(let d=0;d<e.pointCount;d++){const f=["X","Y","Z"].map(r.getter),g=Kn(f,d);let y,_,m;if(Gr){const[M,E]=Gr.forward([g[0],g[1]]);y=(M+h/2)/h,_=(E+h/2)/h,m=g[2]/h}else{const[M,E]=jr.inverse([g[0],g[1]]),b=M*c,C=E*c;y=.5+b/(2*Math.PI);const N=Math.sin(C),T=(1+N)/(1-N);_=.5-Math.log(T)/(4*Math.PI),m=g[2]/h}switch(a[d*3]=y,a[d*3+1]=_,a[d*3+2]=m,Ia){case"rgb":if(i){const E=["Red","Green","Blue"].map(r.getter),b=Kn(E,d);n[d*3]=b[0]/65535,n[d*3+1]=b[1]/65535,n[d*3+2]=b[2]/65535}else n[d*3]=n[d*3+1]=n[d*3+2]=1;break;case"height":const M=(g[2]-pt.info.cube[2])/(pt.info.cube[5]-pt.info.cube[2]);n[d*3]=Math.min(1,Math.max(0,M*2)),n[d*3+1]=Math.min(1,Math.max(0,M>.5?2-M*2:M*2)),n[d*3+2]=Math.min(1,Math.max(0,1-M*2));break;case"intensity":if(o){const b=r.getter("Intensity")(d)/65535;n[d*3]=n[d*3+1]=n[d*3+2]=b}else n[d*3]=n[d*3+1]=n[d*3+2]=1;break;case"white":default:n[d*3]=n[d*3+1]=n[d*3+2]=1;break}}self.postMessage({type:"nodeLoaded",node:t,positions:a.buffer,colors:n.buffer,pointCount:e.pointCount},{transfer:[a.buffer,n.buffer]})}catch(e){self.postMessage({type:"error",message:`Error loading node ${t}: ${e instanceof Error?e.message:String(e)}`})}}let Zn=0;function Wf(t,e,r,a){if(!(Zn++<10)){if(Zn=0,!pt){self.postMessage({type:"error",message:"COPC not initialized"});return}try{const n=new ce(...jr.forward([t[0],t[1]]),t[2]),i=[];Object.entries(bi).forEach(([o,s])=>{const h=parseInt(o.split("-")[0]),c=new ce(...s),d=Math.max(.5,1-h*.1);qf(n,c,r,pt.info.spacing*Math.pow(.5,h),e,d)>a&&i.push(o)}),i.length===0&&i.push("0-0-0-0"),self.postMessage({type:"nodesToLoad",nodes:i,cameraPosition:t,sseThreshold:a})}catch(n){self.postMessage({type:"error",message:`Error updating points: ${n instanceof Error?n.message:String(n)}`})}}}self.onmessage=async t=>{const e=t.data;try{switch(e.type){case"init":Oa=e.url,e.options&&(Ia=e.options.colorMode||"rgb"),await Gf(e.url);break;case"loadNode":await Hf(e.node);break;case"updatePoints":Wf(e.cameraPosition,e.mapHeight,e.fov,e.sseThreshold);break;case"cancelRequests":e.nodes.forEach(r=>{nr.add(r)});break;default:self.postMessage({type:"error",message:`Unknown message type: ${e.type}`})}}catch(r){self.postMessage({type:"error",message:`Error processing message: ${r instanceof Error?r.message:String(r)}`})}}});export default Vf();
