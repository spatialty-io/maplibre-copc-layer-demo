var wo=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Wf=wo(j=>{/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Zn="173";function Yt(t,e,r){return Math.max(e,Math.min(r,t))}class xo{constructor(e=0,r=0,a=0,n=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=a,this._w=n}static slerpFlat(e,r,a,n,i,o,s){let h=a[n+0],c=a[n+1],d=a[n+2],f=a[n+3];const v=i[o+0],y=i[o+1],_=i[o+2],m=i[o+3];if(s===0){e[r+0]=h,e[r+1]=c,e[r+2]=d,e[r+3]=f;return}if(s===1){e[r+0]=v,e[r+1]=y,e[r+2]=_,e[r+3]=m;return}if(f!==m||h!==v||c!==y||d!==_){let M=1-s;const P=h*v+c*y+d*_+f*m,b=P>=0?1:-1,E=1-P*P;if(E>Number.EPSILON){const T=Math.sqrt(E),B=Math.atan2(T,P*b);M=Math.sin(M*B)/T,s=Math.sin(s*B)/T}const N=s*b;if(h=h*M+v*N,c=c*M+y*N,d=d*M+_*N,f=f*M+m*N,M===1-s){const T=1/Math.sqrt(h*h+c*c+d*d+f*f);h*=T,c*=T,d*=T,f*=T}}e[r]=h,e[r+1]=c,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,a,n,i,o){const s=a[n],h=a[n+1],c=a[n+2],d=a[n+3],f=i[o],v=i[o+1],y=i[o+2],_=i[o+3];return e[r]=s*_+d*f+h*y-c*v,e[r+1]=h*_+d*v+c*f-s*y,e[r+2]=c*_+d*y+s*v-h*f,e[r+3]=d*_-s*f-h*v-c*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,a,n){return this._x=e,this._y=r,this._z=a,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const a=e._x,n=e._y,i=e._z,o=e._order,s=Math.cos,h=Math.sin,c=s(a/2),d=s(n/2),f=s(i/2),v=h(a/2),y=h(n/2),_=h(i/2);switch(o){case"XYZ":this._x=v*d*f+c*y*_,this._y=c*y*f-v*d*_,this._z=c*d*_+v*y*f,this._w=c*d*f-v*y*_;break;case"YXZ":this._x=v*d*f+c*y*_,this._y=c*y*f-v*d*_,this._z=c*d*_-v*y*f,this._w=c*d*f+v*y*_;break;case"ZXY":this._x=v*d*f-c*y*_,this._y=c*y*f+v*d*_,this._z=c*d*_+v*y*f,this._w=c*d*f-v*y*_;break;case"ZYX":this._x=v*d*f-c*y*_,this._y=c*y*f+v*d*_,this._z=c*d*_-v*y*f,this._w=c*d*f+v*y*_;break;case"YZX":this._x=v*d*f+c*y*_,this._y=c*y*f+v*d*_,this._z=c*d*_-v*y*f,this._w=c*d*f-v*y*_;break;case"XZY":this._x=v*d*f-c*y*_,this._y=c*y*f-v*d*_,this._z=c*d*_+v*y*f,this._w=c*d*f+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const a=r/2,n=Math.sin(a);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,a=r[0],n=r[4],i=r[8],o=r[1],s=r[5],h=r[9],c=r[2],d=r[6],f=r[10],v=a+s+f;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-h)*y,this._y=(i-c)*y,this._z=(o-n)*y}else if(a>s&&a>f){const y=2*Math.sqrt(1+a-s-f);this._w=(d-h)/y,this._x=.25*y,this._y=(n+o)/y,this._z=(i+c)/y}else if(s>f){const y=2*Math.sqrt(1+s-a-f);this._w=(i-c)/y,this._x=(n+o)/y,this._y=.25*y,this._z=(h+d)/y}else{const y=2*Math.sqrt(1+f-a-s);this._w=(o-n)/y,this._x=(i+c)/y,this._y=(h+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let a=e.dot(r)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yt(this.dot(e),-1,1)))}rotateTowards(e,r){const a=this.angleTo(e);if(a===0)return this;const n=Math.min(1,r/a);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const a=e._x,n=e._y,i=e._z,o=e._w,s=r._x,h=r._y,c=r._z,d=r._w;return this._x=a*d+o*s+n*c-i*h,this._y=n*d+o*h+i*s-a*c,this._z=i*d+o*c+a*h-n*s,this._w=o*d-a*s-n*h-i*c,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const a=this._x,n=this._y,i=this._z,o=this._w;let s=o*e._w+a*e._x+n*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=a,this._y=n,this._z=i,this;const h=1-s*s;if(h<=Number.EPSILON){const y=1-r;return this._w=y*o+r*this._w,this._x=y*a+r*this._x,this._y=y*n+r*this._y,this._z=y*i+r*this._z,this.normalize(),this}const c=Math.sqrt(h),d=Math.atan2(c,s),f=Math.sin((1-r)*d)/c,v=Math.sin(r*d)/c;return this._w=o*f+this._w*v,this._x=a*f+this._x*v,this._y=n*f+this._y*v,this._z=i*f+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,r,a){return this.copy(e).slerp(r,a)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),a=Math.random(),n=Math.sqrt(1-a),i=Math.sqrt(a);return this.set(n*Math.sin(e),n*Math.cos(e),i*Math.sin(r),i*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,r=0,a=0){ce.prototype.isVector3=!0,this.x=e,this.y=r,this.z=a}set(e,r,a){return a===void 0&&(a=this.z),this.x=e,this.y=r,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(tn.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(tn.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,a=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[3]*a+i[6]*n,this.y=i[1]*r+i[4]*a+i[7]*n,this.z=i[2]*r+i[5]*a+i[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,a=this.y,n=this.z,i=e.elements,o=1/(i[3]*r+i[7]*a+i[11]*n+i[15]);return this.x=(i[0]*r+i[4]*a+i[8]*n+i[12])*o,this.y=(i[1]*r+i[5]*a+i[9]*n+i[13])*o,this.z=(i[2]*r+i[6]*a+i[10]*n+i[14])*o,this}applyQuaternion(e){const r=this.x,a=this.y,n=this.z,i=e.x,o=e.y,s=e.z,h=e.w,c=2*(o*n-s*a),d=2*(s*r-i*n),f=2*(i*a-o*r);return this.x=r+h*c+o*f-s*d,this.y=a+h*d+s*c-i*f,this.z=n+h*f+i*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,a=this.y,n=this.z,i=e.elements;return this.x=i[0]*r+i[4]*a+i[8]*n,this.y=i[1]*r+i[5]*a+i[9]*n,this.z=i[2]*r+i[6]*a+i[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Yt(this.x,e.x,r.x),this.y=Yt(this.y,e.y,r.y),this.z=Yt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Yt(this.x,e,r),this.y=Yt(this.y,e,r),this.z=Yt(this.z,e,r),this}clampLength(e,r){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Yt(a,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,a){return this.x=e.x+(r.x-e.x)*a,this.y=e.y+(r.y-e.y)*a,this.z=e.z+(r.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const a=e.x,n=e.y,i=e.z,o=r.x,s=r.y,h=r.z;return this.x=n*h-i*s,this.y=i*o-a*h,this.z=a*s-n*o,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const a=e.dot(this)/r;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return hi.copy(this).projectOnVector(e),this.sub(hi)}reflect(e){return this.sub(hi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const a=this.dot(e)/r;return Math.acos(Yt(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return r*r+a*a+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,a){const n=Math.sin(r)*e;return this.x=n*Math.sin(a),this.y=Math.cos(r)*e,this.z=n*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,a){return this.x=e*Math.sin(r),this.y=a,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=a,this.z=n,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,a=Math.sqrt(1-r*r);return this.x=a*Math.cos(e),this.y=r,this.z=a*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hi=new ce,tn=new xo;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Zn}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Zn);var Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}),r}var Ot={},se={},ui={},en;function Co(){return en||(en=1,Object.defineProperty(ui,"__esModule",{value:!0})),ui}var ke={},rn;function Po(){if(rn)return ke;rn=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.Hierarchy=void 0,ke.Hierarchy={parse:t};function t(e){return Object.entries(e).reduce((r,[a,n])=>(n===-1?r.pages[a]={}:n&&(r.nodes[a]={pointCount:n}),r),{nodes:{},pages:{}})}return ke}var nn;function So(){return nn||(nn=1,function(t){var e=se&&se.__createBinding||(Object.create?function(a,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(a,o,s)}:function(a,n,i,o){o===void 0&&(o=i),a[o]=n[i]}),r=se&&se.__exportStar||function(a,n){for(var i in a)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&e(n,a,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Co(),t),r(Po(),t)}(se)),se}var jt={},oe={},an;function bi(){return an||(an=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.hierarchyItemLength=oe.infoLength=void 0,oe.infoLength=160,oe.hierarchyItemLength=32),oe}var It={},Gt={},Ht={},sn;function wi(){return sn||(sn=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.evlrHeaderLength=Ht.vlrHeaderLength=Ht.minHeaderLength=void 0,Ht.minHeaderLength=375,Ht.vlrHeaderLength=54,Ht.evlrHeaderLength=60),Ht}var qe={},he={},ue={},on;function To(){if(on)return ue;on=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.getBigUint64=ue.parseBigInt=void 0;function t(r){if(r>BigInt(Number.MAX_SAFE_INTEGER)||r<BigInt(-Number.MAX_SAFE_INTEGER))throw new Error(`Cannot convert bigint to number: ${r}`);return Number(r)}ue.parseBigInt=t;function e(r,a,n){if(r.getBigUint64)return r.getBigUint64(a,n);const[i,o]=n?[4,0]:[0,4],s=BigInt(r.getUint32(a+i,n)),h=BigInt(r.getUint32(a+o,n));return(s<<BigInt(32))+h}return ue.getBigUint64=e,ue}var Wt={},hn;function Ao(){if(hn)return Wt;hn=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.toCString=Wt.toDataView=Wt.Binary=void 0,Wt.Binary={toDataView:t,toCString:e};function t(r){return new DataView(r.buffer,r.byteOffset,r.length)}Wt.toDataView=t;function e(r){const a=t(r);let n="";for(let i=0;i<a.byteLength;++i){const o=a.getInt8(i);if(o===0)return n;n+=String.fromCharCode(o)}return n}return Wt.toCString=e,Wt}var je={},un;function Oo(){if(un)return je;un=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Bounds=void 0,je.Bounds={min:t,max:e,mid:r,width:a,depth:n,height:i,cube:o,step:s,stepTo:h,intersection:c};function t(d){return[d[0],d[1],d[2]]}function e(d){return[d[3],d[4],d[5]]}function r([d,f,v,y,_,m]){return[d+(y-d)/2,f+(_-f)/2,v+(m-v)/2]}function a(d){return d[3]-d[0]}function n(d){return d[4]-d[1]}function i(d){return d[5]-d[2]}function o(d){const f=r(d),v=Math.max(a(d),n(d),i(d))/2;return[f[0]-v,f[1]-v,f[2]-v,f[0]+v,f[1]+v,f[2]+v]}function s(d,[f,v,y]){const[_,m,M,P,b,E]=d,[N,T,B]=r(d);return[f?N:_,v?T:m,y?B:M,f?P:N,v?b:T,y?E:B]}function h(d,[f,v,y,_]){for(let m=f-1;m>=0;--m)d=s(d,[v>>m&1,y>>m&1,_>>m&1]);return d}function c(d,f){return[Math.max(d[0],f[0]),Math.max(d[1],f[1]),Math.max(d[2],f[2]),Math.min(d[3],f[3]),Math.min(d[4],f[4]),Math.min(d[5],f[5])]}return je}var Ge={},ln;function Io(){if(ln)return Ge;ln=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.Dimension=void 0;const t={int8:{type:"signed",size:1},int16:{type:"signed",size:2},int32:{type:"signed",size:4},int64:{type:"signed",size:8},uint8:{type:"unsigned",size:1},uint16:{type:"unsigned",size:2},uint32:{type:"unsigned",size:4},uint64:{type:"unsigned",size:8},float32:{type:"float",size:4},float64:{type:"float",size:8},float:{type:"float",size:4},double:{type:"float",size:8},bool:{type:"unsigned",size:1},boolean:{type:"unsigned",size:1}};Ge.Dimension={Type:t,ctype:e};function e({type:r,size:a}){switch(r){case"signed":switch(a){case 1:return"int8";case 2:return"int16";case 4:return"int32";case 8:return"int64"}case"unsigned":switch(a){case 1:return"uint8";case 2:return"uint16";case 4:return"uint32";case 8:return"uint64"}case"float":switch(a){case 4:return"float";case 8:return"double"}}throw new Error(`Invalid dimension type/size: ${r}/${a}`)}return Ge}var wt={},Ar={exports:{}},cn;function Ro(){return cn||(cn=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Tr<"u"&&Tr,a=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var s=typeof i<"u"&&i||typeof self<"u"&&self||typeof Tr<"u"&&Tr||{},h={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(w){return w&&DataView.prototype.isPrototypeOf(w)}if(h.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(w){return w&&d.indexOf(Object.prototype.toString.call(w))>-1};function v(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function y(w){return typeof w!="string"&&(w=String(w)),w}function _(w){var O={next:function(){var q=w.shift();return{done:q===void 0,value:q}}};return h.iterable&&(O[Symbol.iterator]=function(){return O}),O}function m(w){this.map={},w instanceof m?w.forEach(function(O,q){this.append(q,O)},this):Array.isArray(w)?w.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(O){this.append(O,w[O])},this)}m.prototype.append=function(w,O){w=v(w),O=y(O);var q=this.map[w];this.map[w]=q?q+", "+O:O},m.prototype.delete=function(w){delete this.map[v(w)]},m.prototype.get=function(w){return w=v(w),this.has(w)?this.map[w]:null},m.prototype.has=function(w){return this.map.hasOwnProperty(v(w))},m.prototype.set=function(w,O){this.map[v(w)]=y(O)},m.prototype.forEach=function(w,O){for(var q in this.map)this.map.hasOwnProperty(q)&&w.call(O,this.map[q],q,this)},m.prototype.keys=function(){var w=[];return this.forEach(function(O,q){w.push(q)}),_(w)},m.prototype.values=function(){var w=[];return this.forEach(function(O){w.push(O)}),_(w)},m.prototype.entries=function(){var w=[];return this.forEach(function(O,q){w.push([q,O])}),_(w)},h.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function M(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function P(w){return new Promise(function(O,q){w.onload=function(){O(w.result)},w.onerror=function(){q(w.error)}})}function b(w){var O=new FileReader,q=P(O);return O.readAsArrayBuffer(w),q}function E(w){var O=new FileReader,q=P(O),V=/charset=([A-Za-z0-9_-]+)/.exec(w.type),Z=V?V[1]:"utf-8";return O.readAsText(w,Z),q}function N(w){for(var O=new Uint8Array(w),q=new Array(O.length),V=0;V<O.length;V++)q[V]=String.fromCharCode(O[V]);return q.join("")}function T(w){if(w.slice)return w.slice(0);var O=new Uint8Array(w.byteLength);return O.set(new Uint8Array(w)),O.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:h.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:h.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():h.arrayBuffer&&h.blob&&c(w)?(this._bodyArrayBuffer=T(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||f(w))?this._bodyArrayBuffer=T(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var w=M(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=M(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(h.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=M(this);if(w)return w;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(lt)}),this.json=function(){return this.text().then(JSON.parse)},this}var Q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(w){var O=w.toUpperCase();return Q.indexOf(O)>-1?O:w}function tt(w,O){if(!(this instanceof tt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');O=O||{};var q=O.body;if(w instanceof tt){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,O.headers||(this.headers=new m(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!q&&w._bodyInit!=null&&(q=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new m(O.headers)),this.method=L(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in s){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),(this.method==="GET"||this.method==="HEAD")&&(O.cache==="no-store"||O.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var Z=/\?/;this.url+=(Z.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}tt.prototype.clone=function(){return new tt(this,{body:this._bodyInit})};function lt(w){var O=new FormData;return w.trim().split("&").forEach(function(q){if(q){var V=q.split("="),Z=V.shift().replace(/\+/g," "),$=V.join("=").replace(/\+/g," ");O.append(decodeURIComponent(Z),decodeURIComponent($))}}),O}function gt(w){var O=new m,q=w.replace(/\r?\n[\t ]+/g," ");return q.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var Z=V.split(":"),$=Z.shift().trim();if($){var Y=Z.join(":").trim();try{O.append($,Y)}catch(ve){console.warn("Response "+ve.message)}}}),O}B.call(tt.prototype);function nt(w,O){if(!(this instanceof nt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new m(O.headers),this.url=O.url||"",this._initBody(w)}B.call(nt.prototype),nt.prototype.clone=function(){return new nt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},nt.error=function(){var w=new nt(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var Ie=[301,302,303,307,308];nt.redirect=function(w,O){if(Ie.indexOf(O)===-1)throw new RangeError("Invalid status code");return new nt(null,{status:O,headers:{location:w}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(O,q){this.message=O,this.name=q;var V=Error(O);this.stack=V.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ye(w,O){return new Promise(function(q,V){var Z=new tt(w,O);if(Z.signal&&Z.signal.aborted)return V(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function Y(){$.abort()}$.onload=function(){var it={statusText:$.statusText,headers:gt($.getAllResponseHeaders()||"")};Z.url.indexOf("file://")===0&&($.status<200||$.status>599)?it.status=200:it.status=$.status,it.url="responseURL"in $?$.responseURL:it.headers.get("X-Request-URL");var Tt="response"in $?$.response:$.responseText;setTimeout(function(){q(new nt(Tt,it))},0)},$.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){V(new o.DOMException("Aborted","AbortError"))},0)};function ve(it){try{return it===""&&s.location.href?s.location.href:it}catch{return it}}if($.open(Z.method,ve(Z.url),!0),Z.credentials==="include"?$.withCredentials=!0:Z.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(h.blob?$.responseType="blob":h.arrayBuffer&&($.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof m||s.Headers&&O.headers instanceof s.Headers)){var Re=[];Object.getOwnPropertyNames(O.headers).forEach(function(it){Re.push(v(it)),$.setRequestHeader(it,y(O.headers[it]))}),Z.headers.forEach(function(it,Tt){Re.indexOf(Tt)===-1&&$.setRequestHeader(Tt,it)})}else Z.headers.forEach(function(it,Tt){$.setRequestHeader(Tt,it)});Z.signal&&(Z.signal.addEventListener("abort",Y),$.onreadystatechange=function(){$.readyState===4&&Z.signal.removeEventListener("abort",Y)}),$.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return ye.polyfill=!0,s.fetch||(s.fetch=ye,s.Headers=m,s.Request=tt,s.Response=nt),o.Headers=m,o.Request=tt,o.Response=nt,o.fetch=ye,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(a),a.fetch.ponyfill=!0,delete a.fetch.polyfill;var n=r.fetch?r:a;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e}(Ar,Ar.exports)),Ar.exports}var No={},Lo=Object.freeze({__proto__:null,default:No}),Fo=Eo(Lo),fn;function Do(){if(fn)return wt;fn=1;var t=wt&&wt.__createBinding||(Object.create?function(c,d,f,v){v===void 0&&(v=f);var y=Object.getOwnPropertyDescriptor(d,f);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,v,y)}:function(c,d,f,v){v===void 0&&(v=f),c[v]=d[f]}),e=wt&&wt.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),r=wt&&wt.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&t(d,c,f);return e(d,c),d},a=wt&&wt.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(wt,"__esModule",{value:!0}),wt.Getter=void 0;const n=a(Ro());wt.Getter={create:i,http:o,file:s};function i(c){return typeof c=="function"?c:c.startsWith("http://")||c.startsWith("https://")?o(c):s(c)}function o(c){return async function(f,v){if(f<0||v<0||f>v)throw new Error("Invalid range");const _=await(await(0,n.default)(c,{headers:{Range:`bytes=${f}-${v-1}`}})).arrayBuffer();return new Uint8Array(_)}}function s(c){return async function(f,v){const y=await Promise.resolve().then(()=>r(Fo));async function _(m=0,M=1/0){if(m<0||M<0||m>M)throw new Error("Invalid range");await y.promises.access(c);const P=y.createReadStream(c,{start:m,end:M-1,autoClose:!0});return h(P)}return _(f,v)}}async function h(c){return await new Promise((d,f)=>{const v=[];c.on("data",y=>v.push(y)),c.on("error",f),c.on("end",()=>d(Buffer.concat(v)))})}return wt}var li={},dn;function zo(){return dn||(dn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Key=void 0,t.Key={create:e,parse:r,toString:a,step:n,up:i,compare:o,depth:s};function e(h,c=0,d=0,f=0){return typeof h!="number"?r(h):[h,c,d,f]}function r(h){if(typeof h!="string")return h;const[c,d,f,v,...y]=h.split("-").map(m=>parseInt(m,10)),_=[c,d,f,v];if(y.length!==0||_.some(m=>typeof m!="number"||Number.isNaN(m)))throw new Error(`Invalid key: ${h}`);return _}function a(h){return typeof h=="string"?h:h.join("-")}function n(h,[c,d,f]){const[v,y,_,m]=t.Key.create(h);return[v+1,y*2+c,_*2+d,m*2+f]}function i(h,c=1){const[d,f,v,y]=t.Key.create(h);return[d-c,f>>c,v>>c,y>>c]}function o(h,c){for(let d=0;d<h.length;++d){if(h[d]<c[d])return-1;if(h[d]>c[d])return 1}return 0}function s(h){return h[0]}}(li)),li}var He={},yn;function Uo(){return yn||(yn=1,Object.defineProperty(He,"__esModule",{value:!0}),He.Scale=void 0,He.Scale={apply:(t,e=1,r=0)=>(t-r)/e,unapply:(t,e=1,r=0)=>t*e+r}),He}var We={},vn;function Bo(){if(vn)return We;vn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.Step=void 0,We.Step={fromIndex:t,list:e};function t(r){if(r<0||r>=8)throw new Error(`Invalid step index: ${r}`);const a=r>>0&1?1:0,n=r>>1&1?1:0,i=r>>2&1?1:0;return[a,n,i]}function e(){return[[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]]}return We}var gn;function Lt(){return gn||(gn=1,function(t){var e=he&&he.__createBinding||(Object.create?function(d,f,v,y){y===void 0&&(y=v);var _=Object.getOwnPropertyDescriptor(f,v);(!_||("get"in _?!f.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return f[v]}}),Object.defineProperty(d,y,_)}:function(d,f,v,y){y===void 0&&(y=v),d[y]=f[v]}),r=he&&he.__exportStar||function(d,f){for(var v in d)v!=="default"&&!Object.prototype.hasOwnProperty.call(f,v)&&e(f,d,v)};Object.defineProperty(t,"__esModule",{value:!0}),t.Step=t.Scale=t.Key=t.Getter=t.Dimension=t.Bounds=t.Binary=void 0,r(To(),t);var a=Ao();Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return a.Binary}});var n=Oo();Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return n.Bounds}});var i=Io();Object.defineProperty(t,"Dimension",{enumerable:!0,get:function(){return i.Dimension}});var o=Do();Object.defineProperty(t,"Getter",{enumerable:!0,get:function(){return o.Getter}});var s=zo();Object.defineProperty(t,"Key",{enumerable:!0,get:function(){return s.Key}});var h=Uo();Object.defineProperty(t,"Scale",{enumerable:!0,get:function(){return h.Scale}});var c=Bo();Object.defineProperty(t,"Step",{enumerable:!0,get:function(){return c.Step}})}(he)),he}var Ve={},_n;function ta(){if(_n)return Ve;_n=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.ExtraBytes=void 0;const t=Lt();Ve.ExtraBytes={getDimension:r,parse:a,parseOne:n};const e=192;function r({type:s,length:h}){switch(s){case"signed":case"unsigned":switch(h){case 1:case 2:case 4:case 8:return{type:s,size:h}}case"float":switch(h){case 4:case 8:return{type:s,size:h}}}}function a(s){if(s.byteLength%e!==0)throw new Error(`Invalid extra bytes VLR length: ${s.byteLength}`);const h=[];for(let c=0;c<s.byteLength;c+=e)h.push(n(s.slice(c,c+e)));return h}function n(s){if(s.byteLength!==e)throw new Error(`Invalid extra bytes entry length: ${s.byteLength}`);const h=t.Binary.toDataView(s),c=t.Binary.toCString(s.slice(4,36)),d=t.Binary.toCString(s.slice(60,192)),f=h.getUint8(2),v=h.getUint8(3);if(f>=11)throw new Error(`Invalid extra bytes "type" value: ${f}`);if(f===0)return{name:c,description:d,length:v};const y=o(v),_=i(f);if(!_)throw new Error(`Failed to extract dimension type: ${f}`);const{type:m,size:M}=_;function P(E){switch(m){case"signed":return(0,t.parseBigInt)(h.getBigInt64(E,!0));case"unsigned":return(0,t.parseBigInt)((0,t.getBigUint64)(h,E,!0));case"float":return h.getFloat64(E,!0)}}const b={name:c,description:d,type:m,length:M};return y.hasNodata&&(b.nodata=P(40)),y.hasMin&&(b.min=P(64)),y.hasMax&&(b.max=P(88)),y.hasScale&&(b.scale=h.getFloat64(112)),y.hasOffset&&(b.offset=h.getFloat64(136)),b}function i(s){switch(s){case 1:return t.Dimension.Type.uint8;case 2:return t.Dimension.Type.int8;case 3:return t.Dimension.Type.uint16;case 4:return t.Dimension.Type.int16;case 5:return t.Dimension.Type.uint32;case 6:return t.Dimension.Type.int32;case 7:return t.Dimension.Type.uint64;case 8:return t.Dimension.Type.int64;case 9:return t.Dimension.Type.float32;case 10:return t.Dimension.Type.float64}}function o(s){return{hasNodata:!!(s&1),hasMin:!!(s>>1&1),hasMax:!!(s>>2&1),hasScale:!!(s>>3&1),hasOffset:!!(s>>4&1)}}return Ve}var mn;function ea(){if(mn)return qe;mn=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.Dimensions=void 0;const t=Lt(),e=ta();qe.Dimensions={create:n};const{Type:r}=t.Dimension,a={X:r.float64,Y:r.float64,Z:r.float64,Intensity:r.uint16,ReturnNumber:r.uint8,NumberOfReturns:r.uint8,ScanDirectionFlag:r.boolean,EdgeOfFlightLine:r.boolean,Classification:r.uint8,Synthetic:r.boolean,KeyPoint:r.boolean,Withheld:r.boolean,Overlap:r.boolean,ScanAngle:r.float32,UserData:r.uint8,PointSourceId:r.uint16,GpsTime:r.float64,Red:r.uint16,Green:r.uint16,Blue:r.uint16,ScannerChannel:r.uint8,Infrared:r.uint16};function n(i,o=[]){return Object.keys(i).reduce((s,h)=>{const c=a[h];if(c)return{...s,[h]:c};const d=o.find(v=>v.name===h),f=d&&e.ExtraBytes.getDimension(d);if(f)return{...s,[h]:f};throw new Error(`Failed to look up LAS type: ${h}`)},{})}return qe}var Ye={},Mn;function ra(){if(Mn)return Ye;Mn=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Extractor=void 0;const t=Lt();Ye.Extractor={create:n};function e(y){switch(y){case 0:return 20;case 1:return 28;case 2:return 26;case 3:return 34;case 6:return 30;case 7:return 36;case 8:return 38;default:throw new Error(`Unsupported point data record format: ${y}`)}}function r(y,_,{type:m,length:M}){const P=v(y);switch(m){case"signed":switch(M){case 1:return(b,E)=>b.getInt8(P(E)+_);case 2:return(b,E)=>b.getInt16(P(E)+_,!0);case 4:return(b,E)=>b.getInt32(P(E)+_,!0);case 8:return(b,E)=>(0,t.parseBigInt)(b.getBigInt64(P(E)+_,!0))}case"unsigned":switch(M){case 1:return(b,E)=>b.getUint8(P(E)+_);case 2:return(b,E)=>b.getUint16(P(E)+_,!0);case 4:return(b,E)=>b.getUint32(P(E)+_,!0);case 8:return(b,E)=>(0,t.parseBigInt)((0,t.getBigUint64)(b,P(E)+_,!0))}case"float":switch(M){case 4:return(b,E)=>b.getFloat32(P(E)+_,!0);case 8:return(b,E)=>b.getFloat64(P(E)+_,!0)}}}function a(y,_){let M=e(y.pointDataRecordFormat);return _.reduce((P,b)=>{const E=M;M+=b.length;const N=r(y,E,b);if(!N)return P;const T=(B,Q)=>t.Scale.unapply(N(B,Q),b.scale,b.offset);return{...P,[b.name]:T}},{})}function n(y,_=[]){const m=a(y,_);return{...(()=>{const{pointDataRecordFormat:P}=y;switch(P){case 0:return i(y);case 1:return o(y);case 2:return s(y);case 3:return h(y);case 6:return c(y);case 7:return d(y);case 8:return f(y);default:throw new Error(`Unsupported point data record format: ${P}`)}})(),...m}}function i(y){const{scale:_,offset:m}=y,M=v(y);function P(N,T){return N.getUint8(M(T)+14)}function b(N,T){return N.getUint8(M(T)+15)}function E(N,T){return b(N,T)&31}return{X:(N,T)=>t.Scale.unapply(N.getInt32(M(T),!0),_[0],m[0]),Y:(N,T)=>t.Scale.unapply(N.getInt32(M(T)+4,!0),_[1],m[1]),Z:(N,T)=>t.Scale.unapply(N.getInt32(M(T)+8,!0),_[2],m[2]),Intensity:(N,T)=>N.getUint16(M(T)+12,!0),ReturnNumber:(N,T)=>P(N,T)&7,NumberOfReturns:(N,T)=>(P(N,T)&56)>>3,ScanDirectionFlag:(N,T)=>(P(N,T)&64)>>6,EdgeOfFlightLine:(N,T)=>(P(N,T)&128)>>7,Classification:(N,T)=>{const B=E(N,T);return B===12?0:B},Synthetic:(N,T)=>(b(N,T)&32)>>5,KeyPoint:(N,T)=>(b(N,T)&64)>>6,Withheld:(N,T)=>(b(N,T)&128)>>7,Overlap:(N,T)=>E(N,T)===12?1:0,ScanAngle:(N,T)=>N.getInt8(M(T)+16),UserData:(N,T)=>N.getUint8(M(T)+17),PointSourceId:(N,T)=>N.getUint16(M(T)+18,!0)}}function o(y){const _=v(y);return{...i(y),GpsTime:(m,M)=>m.getFloat64(_(M)+20,!0)}}function s(y){const _=v(y);return{...i(y),Red:(m,M)=>m.getUint16(_(M)+20,!0),Green:(m,M)=>m.getUint16(_(M)+22,!0),Blue:(m,M)=>m.getUint16(_(M)+24,!0)}}function h(y){const _=v(y);return{...i(y),GpsTime:(m,M)=>m.getFloat64(_(M)+20,!0),Red:(m,M)=>m.getUint16(_(M)+28,!0),Green:(m,M)=>m.getUint16(_(M)+30,!0),Blue:(m,M)=>m.getUint16(_(M)+32,!0)}}function c(y){const{scale:_,offset:m}=y,M=v(y);function P(b,E){return b.getUint8(M(E)+15)}return{X:(b,E)=>t.Scale.unapply(b.getInt32(M(E),!0),_[0],m[0]),Y:(b,E)=>t.Scale.unapply(b.getInt32(M(E)+4,!0),_[1],m[1]),Z:(b,E)=>t.Scale.unapply(b.getInt32(M(E)+8,!0),_[2],m[2]),Intensity:(b,E)=>b.getUint16(M(E)+12,!0),ReturnNumber:(b,E)=>b.getUint16(M(E)+14,!0)&15,NumberOfReturns:(b,E)=>(b.getUint16(M(E)+14,!0)&240)>>4,Synthetic:(b,E)=>P(b,E)&1,KeyPoint:(b,E)=>(P(b,E)&2)>>1,Withheld:(b,E)=>(P(b,E)&4)>>2,Overlap:(b,E)=>(P(b,E)&8)>>3,ScannerChannel:(b,E)=>(P(b,E)&48)>>4,ScanDirectionFlag:(b,E)=>(P(b,E)&64)>>6,EdgeOfFlightLine:(b,E)=>(P(b,E)&128)>>7,Classification:(b,E)=>b.getUint8(M(E)+16),UserData:(b,E)=>b.getUint8(M(E)+17),ScanAngle:(b,E)=>b.getInt16(M(E)+18,!0)*.006,PointSourceId:(b,E)=>b.getUint16(M(E)+20,!0),GpsTime:(b,E)=>b.getFloat64(M(E)+22,!0)}}function d(y){const _=v(y);return{...c(y),Red:(m,M)=>m.getUint16(_(M)+30,!0),Green:(m,M)=>m.getUint16(_(M)+32,!0),Blue:(m,M)=>m.getUint16(_(M)+34,!0)}}function f(y){const _=v(y);return{...d(y),Infrared:(m,M)=>m.getUint16(_(M)+36,!0)}}function v(y){const{pointDataRecordLength:_}=y;return function(M){return M*_}}return Ye}var Qe={},le={},pn;function $o(){if(pn)return le;pn=1,Object.defineProperty(le,"__esModule",{value:!0}),le.formatGuid=le.parsePoint=void 0;const t=Lt();function e(a){const n=t.Binary.toDataView(a);if(n.byteLength!==24)throw new Error(`Invalid tuple buffer length: ${n.byteLength}`);return[n.getFloat64(0,!0),n.getFloat64(8,!0),n.getFloat64(16,!0)]}le.parsePoint=e;function r(a){const n=t.Binary.toDataView(a);if(n.byteLength!==16)throw new Error(`Invalid GUID buffer length: ${n.byteLength}`);let i="";for(let o=0;o<n.byteLength;o+=4){const s=n.getUint32(o,!0);i+=s.toString(16).padStart(8,"0")}return[i.slice(0,8),i.slice(8,12),i.slice(12,16),i.slice(16,32)].join("-")}return le.formatGuid=r,le}var bn;function ia(){if(bn)return Qe;bn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Header=void 0;const t=Lt(),e=wi(),r=$o();Qe.Header={parse:a};function a(o){if(o.byteLength<e.minHeaderLength)throw new Error(`Invalid header: must be at least ${e.minHeaderLength} bytes`);const s=t.Binary.toDataView(o),h=t.Binary.toCString(o.slice(0,4));if(h!=="LASF")throw new Error(`Invalid file signature: ${h}`);const c=s.getUint8(24),d=s.getUint8(25);if(c!==1||d!==2&&d!==4)throw new Error(`Invalid version (only 1.2 and 1.4 supported): ${c}.${d}`);const f={fileSignature:h,fileSourceId:s.getUint16(4,!0),globalEncoding:s.getUint16(6,!0),projectId:(0,r.formatGuid)(o.slice(8,24)),majorVersion:c,minorVersion:d,systemIdentifier:t.Binary.toCString(o.slice(26,58)),generatingSoftware:t.Binary.toCString(o.slice(58,90)),fileCreationDayOfYear:s.getUint16(90,!0),fileCreationYear:s.getUint16(92,!0),headerLength:s.getUint16(94,!0),pointDataOffset:s.getUint32(96,!0),vlrCount:s.getUint32(100,!0),pointDataRecordFormat:s.getUint8(104)&15,pointDataRecordLength:s.getUint16(105,!0),pointCount:s.getUint32(107,!0),pointCountByReturn:i(o.slice(111,131)),scale:(0,r.parsePoint)(o.slice(131,155)),offset:(0,r.parsePoint)(o.slice(155,179)),min:[s.getFloat64(187,!0),s.getFloat64(203,!0),s.getFloat64(219,!0)],max:[s.getFloat64(179,!0),s.getFloat64(195,!0),s.getFloat64(211,!0)],waveformDataOffset:0,evlrOffset:0,evlrCount:0};return d==2?f:{...f,pointCount:(0,t.parseBigInt)((0,t.getBigUint64)(s,247,!0)),pointCountByReturn:n(o.slice(255,375)),waveformDataOffset:(0,t.parseBigInt)((0,t.getBigUint64)(s,227,!0)),evlrOffset:(0,t.parseBigInt)((0,t.getBigUint64)(s,235,!0)),evlrCount:s.getUint32(243,!0)}}function n(o){const s=t.Binary.toDataView(o),h=[];for(let c=0;c<15*8;c+=8)h.push((0,t.getBigUint64)(s,c,!0));return h.map(c=>(0,t.parseBigInt)(c))}function i(o){const s=t.Binary.toDataView(o),h=[];for(let c=0;c<5*4;c+=4)h.push(s.getUint32(c,!0));return h}return Qe}var Vt={},Rt={},ci={exports:{}},wn;function ko(){return wn||(wn=1,function(t,e){var r=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(n){n=n||{};var i=typeof n<"u"?n:{},o,s;i.ready=new Promise(function(u,l){o=u,s=l}),["_main","___getTypeName","__embind_initialize_bindings","_fflush","onRuntimeInitialized"].forEach(u=>{Object.getOwnPropertyDescriptor(i.ready,u)||Object.defineProperty(i.ready,u,{get:()=>_t("You are getting "+u+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>_t("You are setting "+u+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var h=Object.assign({},i),c="./this.program",d=!0;if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var f="";function v(u){return i.locateFile?i.locateFile(u,f):f+u}var y;if(typeof document<"u"&&document.currentScript&&(f=document.currentScript.src),a&&(f=a),f.indexOf("blob:")!==0?f=f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):f="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var _=i.print||console.log.bind(console),m=i.printErr||console.warn.bind(console);Object.assign(i,h),h=null,go(),i.arguments&&i.arguments,M("arguments","arguments_"),i.thisProgram&&(c=i.thisProgram),M("thisProgram","thisProgram"),i.quit&&i.quit,M("quit","quit_"),L(typeof i.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),L(typeof i.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),L(typeof i.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),L(typeof i.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),L(typeof i.read>"u","Module.read option was removed (modify read_ in JS)"),L(typeof i.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),L(typeof i.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),L(typeof i.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),L(typeof i.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),M("read","read_"),M("readAsync","readAsync"),M("readBinary","readBinary"),M("setWindowTitle","setWindowTitle"),L(!0,"worker environment detected but not enabled at build time.  Add 'worker' to `-sENVIRONMENT` to enable."),L(!0,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),L(!0,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");function M(u,l){Object.getOwnPropertyDescriptor(i,u)||Object.defineProperty(i,u,{configurable:!0,get:function(){_t("Module."+u+" has been replaced with plain "+l+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function P(u){Object.getOwnPropertyDescriptor(i,u)&&_t("`Module."+u+"` was supplied but `"+u+"` not included in INCOMING_MODULE_JS_API")}function b(u){return u==="FS_createPath"||u==="FS_createDataFile"||u==="FS_createPreloadedFile"||u==="FS_unlink"||u==="addRunDependency"||u==="FS_createLazyFile"||u==="FS_createDevice"||u==="removeRunDependency"}function E(u){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,u)&&Object.defineProperty(globalThis,u,{configurable:!0,get:function(){var l="`"+u+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";b(u)&&(l+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ne(l)}})}function N(u){Object.getOwnPropertyDescriptor(i,u)||Object.defineProperty(i,u,{configurable:!0,get:function(){var l="'"+u+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";b(u)&&(l+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),_t(l)}})}var T;i.wasmBinary&&(T=i.wasmBinary),M("wasmBinary","wasmBinary"),i.noExitRuntime,M("noExitRuntime","noExitRuntime"),typeof WebAssembly!="object"&&_t("no native wasm support detected");var B,Q=!1;function L(u,l){u||_t("Assertion failed"+(l?": "+l:""))}var tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function lt(u,l,g){for(var p=l+g,x=l;u[x]&&!(x>=p);)++x;if(x-l>16&&u.buffer&&tt)return tt.decode(u.subarray(l,x));for(var S="";l<x;){var A=u[l++];if(!(A&128)){S+=String.fromCharCode(A);continue}var C=u[l++]&63;if((A&224)==192){S+=String.fromCharCode((A&31)<<6|C);continue}var F=u[l++]&63;if((A&240)==224?A=(A&15)<<12|C<<6|F:((A&248)!=240&&ne("Invalid UTF-8 leading byte 0x"+A.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),A=(A&7)<<18|C<<12|F<<6|u[l++]&63),A<65536)S+=String.fromCharCode(A);else{var U=A-65536;S+=String.fromCharCode(55296|U>>10,56320|U&1023)}}return S}function gt(u,l){return u?lt(q,u,l):""}function nt(u,l,g,p){if(!(p>0))return 0;for(var x=g,S=g+p-1,A=0;A<u.length;++A){var C=u.charCodeAt(A);if(C>=55296&&C<=57343){var F=u.charCodeAt(++A);C=65536+((C&1023)<<10)|F&1023}if(C<=127){if(g>=S)break;l[g++]=C}else if(C<=2047){if(g+1>=S)break;l[g++]=192|C>>6,l[g++]=128|C&63}else if(C<=65535){if(g+2>=S)break;l[g++]=224|C>>12,l[g++]=128|C>>6&63,l[g++]=128|C&63}else{if(g+3>=S)break;C>1114111&&ne("Invalid Unicode code point 0x"+C.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),l[g++]=240|C>>18,l[g++]=128|C>>12&63,l[g++]=128|C>>6&63,l[g++]=128|C&63}}return l[g]=0,g-x}function Ie(u,l,g){return L(typeof g=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),nt(u,q,l,g)}function ye(u){for(var l=0,g=0;g<u.length;++g){var p=u.charCodeAt(g);p<=127?l++:p<=2047?l+=2:p>=55296&&p<=57343?(l+=4,++g):l+=3}return l}var w,O,q,V,Z,$,Y,ve,Re;function it(u){w=u,i.HEAP8=O=new Int8Array(u),i.HEAP16=V=new Int16Array(u),i.HEAP32=$=new Int32Array(u),i.HEAPU8=q=new Uint8Array(u),i.HEAPU16=Z=new Uint16Array(u),i.HEAPU32=Y=new Uint32Array(u),i.HEAPF32=ve=new Float32Array(u),i.HEAPF64=Re=new Float64Array(u)}var Tt=65536;i.TOTAL_STACK&&L(Tt===i.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Hr=i.INITIAL_MEMORY||262144;M("INITIAL_MEMORY","INITIAL_MEMORY"),L(Hr>=Tt,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Hr+"! (TOTAL_STACK="+Tt+")"),L(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),L(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),L(Hr==262144,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var Mr;function Ia(){var u=oi();L((u&3)==0),Y[u>>2]=34821223,Y[u+4>>2]=2310721022,Y[0]=1668509029}function Wr(){if(!Q){var u=oi(),l=Y[u>>2],g=Y[u+4>>2];(l!=34821223||g!=2310721022)&&_t("Stack overflow! Stack cookie has been overwritten at 0x"+u.toString(16)+", expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+g.toString(16)+" 0x"+l.toString(16)),Y[0]!==1668509029&&_t("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var u=new Int16Array(1),l=new Int8Array(u.buffer);if(u[0]=25459,l[0]!==115||l[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})();var Oi=[],Ii=[],Ri=[],Vr=!1;function Ra(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Fa(i.preRun.shift());Yr(Oi)}function Na(){L(!Vr),Vr=!0,Wr(),Yr(Ii)}function La(){if(Wr(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)za(i.postRun.shift());Yr(Ri)}function Fa(u){Oi.unshift(u)}function Da(u){Ii.unshift(u)}function za(u){Ri.unshift(u)}L(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),L(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),L(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),L(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var re=0,ie=null,Ne=null,Le={};function Ua(u){re++,i.monitorRunDependencies&&i.monitorRunDependencies(re),L(!Le[u]),Le[u]=1,ie===null&&typeof setInterval<"u"&&(ie=setInterval(function(){if(Q){clearInterval(ie),ie=null;return}var l=!1;for(var g in Le)l||(l=!0,m("still waiting on run dependencies:")),m("dependency: "+g);l&&m("(end of list)")},1e4))}function Ba(u){if(re--,i.monitorRunDependencies&&i.monitorRunDependencies(re),L(Le[u]),delete Le[u],re==0&&(ie!==null&&(clearInterval(ie),ie=null),Ne)){var l=Ne;Ne=null,l()}}function _t(u){i.onAbort&&i.onAbort(u),u="Aborted("+u+")",m(u),Q=!0;var l=new WebAssembly.RuntimeError(u);throw s(l),l}var Ct={error:function(){_t("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init:function(){Ct.error()},createDataFile:function(){Ct.error()},createPreloadedFile:function(){Ct.error()},createLazyFile:function(){Ct.error()},open:function(){Ct.error()},mkdev:function(){Ct.error()},registerDevice:function(){Ct.error()},analyzePath:function(){Ct.error()},loadFilesFromDB:function(){Ct.error()},ErrnoError:function(){Ct.error()}};i.FS_createDataFile=Ct.createDataFile,i.FS_createPreloadedFile=Ct.createPreloadedFile;var $a="data:application/octet-stream;base64,";function Ni(u){return u.startsWith($a)}function ka(u){return u.startsWith("file://")}function st(u,l){return function(){var g=u,p=l;return p=i.asm,L(Vr,"native function `"+g+"` called before runtime initialization"),p[u]||L(p[u],"exported native function `"+g+"` not found"),p[u].apply(null,arguments)}}var bt;bt="laz-perf.wasm",Ni(bt)||(bt=v(bt));function Li(u){try{if(u==bt&&T)return new Uint8Array(T);throw"both async and sync fetching of the wasm failed"}catch(l){_t(l)}}function qa(){return!T&&d&&typeof fetch=="function"?fetch(bt,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+bt+"'";return u.arrayBuffer()}).catch(function(){return Li(bt)}):Promise.resolve().then(function(){return Li(bt)})}function ja(){var u={env:Ji,wasi_snapshot_preview1:Ji};function l(C,F){var U=C.exports;i.asm=U,B=i.asm.memory,L(B,"memory not found in wasm exports"),it(B.buffer),Mr=i.asm.__indirect_function_table,L(Mr,"table not found in wasm exports"),Da(i.asm.__wasm_call_ctors),Ba("wasm-instantiate")}Ua("wasm-instantiate");var g=i;function p(C){L(i===g,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),g=null,l(C.instance)}function x(C){return qa().then(function(F){return WebAssembly.instantiate(F,u)}).then(function(F){return F}).then(C,function(F){m("failed to asynchronously prepare wasm: "+F),ka(bt)&&m("warning: Loading from a file URI ("+bt+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),_t(F)})}function S(){return!T&&typeof WebAssembly.instantiateStreaming=="function"&&!Ni(bt)&&typeof fetch=="function"?fetch(bt,{credentials:"same-origin"}).then(function(C){var F=WebAssembly.instantiateStreaming(C,u);return F.then(p,function(U){return m("wasm streaming compile failed: "+U),m("falling back to ArrayBuffer instantiation"),x(p)})}):x(p)}if(i.instantiateWasm)try{var A=i.instantiateWasm(u,l);return A}catch(C){return m("Module.instantiateWasm callback failed with error: "+C),!1}return S().catch(s),{}}function Yr(u){for(;u.length>0;)u.shift()(i)}function ne(u){ne.shown||(ne.shown={}),ne.shown[u]||(ne.shown[u]=1,m(u))}function Ga(u,l){L(u.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),O.set(u,l)}function Ha(u){return si(u+24)+24}function Wa(u){this.excPtr=u,this.ptr=u-24,this.set_type=function(l){Y[this.ptr+4>>2]=l},this.get_type=function(){return Y[this.ptr+4>>2]},this.set_destructor=function(l){Y[this.ptr+8>>2]=l},this.get_destructor=function(){return Y[this.ptr+8>>2]},this.set_refcount=function(l){$[this.ptr>>2]=l},this.set_caught=function(l){l=l?1:0,O[this.ptr+12>>0]=l},this.get_caught=function(){return O[this.ptr+12>>0]!=0},this.set_rethrown=function(l){l=l?1:0,O[this.ptr+13>>0]=l},this.get_rethrown=function(){return O[this.ptr+13>>0]!=0},this.init=function(l,g){this.set_adjusted_ptr(0),this.set_type(l),this.set_destructor(g),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var l=$[this.ptr>>2];$[this.ptr>>2]=l+1},this.release_ref=function(){var l=$[this.ptr>>2];return $[this.ptr>>2]=l-1,L(l>0),l===1},this.set_adjusted_ptr=function(l){Y[this.ptr+16>>2]=l},this.get_adjusted_ptr=function(){return Y[this.ptr+16>>2]},this.get_exception_ptr=function(){var l=mo(this.get_type());if(l)return Y[this.excPtr>>2];var g=this.get_adjusted_ptr();return g!==0?g:this.excPtr}}function Va(u,l,g){var p=new Wa(u);throw p.init(l,g),u+" - Exception catching is disabled, this exception cannot be caught. Compile with -sNO_DISABLE_EXCEPTION_CATCHING or -sEXCEPTION_CATCHING_ALLOWED=[..] to catch."}function Ya(u,l,g,p,x){}function Qr(u){switch(u){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+u)}}function Qa(){for(var u=new Array(256),l=0;l<256;++l)u[l]=String.fromCharCode(l);Fi=u}var Fi=void 0;function Pt(u){for(var l="",g=u;q[g];)l+=Fi[q[g++]];return l}var ge={},_e={},pr={},Xa=48,Ja=57;function Di(u){if(u===void 0)return"_unknown";u=u.replace(/[^a-zA-Z0-9_]/g,"$");var l=u.charCodeAt(0);return l>=Xa&&l<=Ja?"_"+u:u}function zi(u,l){return u=Di(u),function(){return l.apply(this,arguments)}}function Xr(u,l){var g=zi(l,function(p){this.name=l,this.message=p;var x=new Error(p).stack;x!==void 0&&(this.stack=this.toString()+`
`+x.replace(/^Error(:[^\n]*)?\n/,""))});return g.prototype=Object.create(u.prototype),g.prototype.constructor=g,g.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},g}var me=void 0;function X(u){throw new me(u)}var Ui=void 0;function br(u){throw new Ui(u)}function Fe(u,l,g){u.forEach(function(C){pr[C]=l});function p(C){var F=g(C);F.length!==u.length&&br("Mismatched type converter count");for(var U=0;U<u.length;++U)kt(u[U],F[U])}var x=new Array(l.length),S=[],A=0;l.forEach((C,F)=>{_e.hasOwnProperty(C)?x[F]=_e[C]:(S.push(C),ge.hasOwnProperty(C)||(ge[C]=[]),ge[C].push(()=>{x[F]=_e[C],++A,A===S.length&&p(x)}))}),S.length===0&&p(x)}function kt(u,l,g={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");var p=l.name;if(u||X('type "'+p+'" must have a positive integer typeid pointer'),_e.hasOwnProperty(u)){if(g.ignoreDuplicateRegistrations)return;X("Cannot register type '"+p+"' twice")}if(_e[u]=l,delete pr[u],ge.hasOwnProperty(u)){var x=ge[u];delete ge[u],x.forEach(S=>S())}}function Ka(u,l,g,p,x){var S=Qr(g);l=Pt(l),kt(u,{name:l,fromWireType:function(A){return!!A},toWireType:function(A,C){return C?p:x},argPackAdvance:8,readValueFromPointer:function(A){var C;if(g===1)C=O;else if(g===2)C=V;else if(g===4)C=$;else throw new TypeError("Unknown boolean type size: "+l);return this.fromWireType(C[A>>S])},destructorFunction:null})}function Za(u){if(!(this instanceof Xt)||!(u instanceof Xt))return!1;for(var l=this.$$.ptrType.registeredClass,g=this.$$.ptr,p=u.$$.ptrType.registeredClass,x=u.$$.ptr;l.baseClass;)g=l.upcast(g),l=l.baseClass;for(;p.baseClass;)x=p.upcast(x),p=p.baseClass;return l===p&&g===x}function ts(u){return{count:u.count,deleteScheduled:u.deleteScheduled,preservePointerOnDelete:u.preservePointerOnDelete,ptr:u.ptr,ptrType:u.ptrType,smartPtr:u.smartPtr,smartPtrType:u.smartPtrType}}function Jr(u){function l(g){return g.$$.ptrType.registeredClass.name}X(l(u)+" instance already deleted")}var Kr=!1;function Bi(u){}function es(u){u.smartPtr?u.smartPtrType.rawDestructor(u.smartPtr):u.ptrType.registeredClass.rawDestructor(u.ptr)}function $i(u){u.count.value-=1;var l=u.count.value===0;l&&es(u)}function ki(u,l,g){if(l===g)return u;if(g.baseClass===void 0)return null;var p=ki(u,l,g.baseClass);return p===null?null:g.downcast(p)}var qi={};function rs(){return Object.keys(Ue).length}function is(){var u=[];for(var l in Ue)Ue.hasOwnProperty(l)&&u.push(Ue[l]);return u}var De=[];function Zr(){for(;De.length;){var u=De.pop();u.$$.deleteScheduled=!1,u.delete()}}var ze=void 0;function ns(u){ze=u,De.length&&ze&&ze(Zr)}function as(){i.getInheritedInstanceCount=rs,i.getLiveInheritedInstances=is,i.flushPendingDeletes=Zr,i.setDelayFunction=ns}var Ue={};function ss(u,l){for(l===void 0&&X("ptr should not be undefined");u.baseClass;)l=u.upcast(l),u=u.baseClass;return l}function os(u,l){return l=ss(u,l),Ue[l]}function wr(u,l){(!l.ptrType||!l.ptr)&&br("makeClassHandle requires ptr and ptrType");var g=!!l.smartPtrType,p=!!l.smartPtr;return g!==p&&br("Both smartPtrType and smartPtr must be specified"),l.count={value:1},Be(Object.create(u,{$$:{value:l}}))}function ji(u){var l=this.getPointee(u);if(!l)return this.destructor(u),null;var g=os(this.registeredClass,l);if(g!==void 0){if(g.$$.count.value===0)return g.$$.ptr=l,g.$$.smartPtr=u,g.clone();var p=g.clone();return this.destructor(u),p}function x(){return this.isSmartPointer?wr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:l,smartPtrType:this,smartPtr:u}):wr(this.registeredClass.instancePrototype,{ptrType:this,ptr:u})}var S=this.registeredClass.getActualType(l),A=qi[S];if(!A)return x.call(this);var C;this.isConst?C=A.constPointerType:C=A.pointerType;var F=ki(l,this.registeredClass,C.registeredClass);return F===null?x.call(this):this.isSmartPointer?wr(C.registeredClass.instancePrototype,{ptrType:C,ptr:F,smartPtrType:this,smartPtr:u}):wr(C.registeredClass.instancePrototype,{ptrType:C,ptr:F})}function Be(u){return typeof FinalizationRegistry>"u"?(Be=l=>l,u):(Kr=new FinalizationRegistry(l=>{console.warn(l.leakWarning.stack.replace(/^Error: /,"")),$i(l.$$)}),Be=l=>{var g=l.$$,p=!!g.smartPtr;if(p){var x={$$:g},S=g.ptrType.registeredClass;x.leakWarning=new Error("Embind found a leaked C++ instance "+S.name+" <0x"+g.ptr.toString(16)+`>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`),"captureStackTrace"in Error&&Error.captureStackTrace(x.leakWarning,ji),Kr.register(l,x,l)}return l},Bi=l=>Kr.unregister(l),Be(u))}function hs(){if(this.$$.ptr||Jr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var u=Be(Object.create(Object.getPrototypeOf(this),{$$:{value:ts(this.$$)}}));return u.$$.count.value+=1,u.$$.deleteScheduled=!1,u}function us(){this.$$.ptr||Jr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&X("Object already scheduled for deletion"),Bi(this),$i(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ls(){return!this.$$.ptr}function cs(){return this.$$.ptr||Jr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&X("Object already scheduled for deletion"),De.push(this),De.length===1&&ze&&ze(Zr),this.$$.deleteScheduled=!0,this}function fs(){Xt.prototype.isAliasOf=Za,Xt.prototype.clone=hs,Xt.prototype.delete=us,Xt.prototype.isDeleted=ls,Xt.prototype.deleteLater=cs}function Xt(){}function Gi(u,l,g){if(u[l].overloadTable===void 0){var p=u[l];u[l]=function(){return u[l].overloadTable.hasOwnProperty(arguments.length)||X("Function '"+g+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+u[l].overloadTable+")!"),u[l].overloadTable[arguments.length].apply(this,arguments)},u[l].overloadTable=[],u[l].overloadTable[p.argCount]=p}}function ds(u,l,g){i.hasOwnProperty(u)?(X("Cannot register public name '"+u+"' twice"),Gi(i,u,u),i.hasOwnProperty(g)&&X("Cannot register multiple overloads of a function with the same number of arguments ("+g+")!"),i[u].overloadTable[g]=l):i[u]=l}function ys(u,l,g,p,x,S,A,C){this.name=u,this.constructor=l,this.instancePrototype=g,this.rawDestructor=p,this.baseClass=x,this.getActualType=S,this.upcast=A,this.downcast=C,this.pureVirtualFunctions=[]}function ti(u,l,g){for(;l!==g;)l.upcast||X("Expected null or instance of "+g.name+", got an instance of "+l.name),u=l.upcast(u),l=l.baseClass;return u}function vs(u,l){if(l===null)return this.isReference&&X("null is not a valid "+this.name),0;l.$$||X('Cannot pass "'+pe(l)+'" as a '+this.name),l.$$.ptr||X("Cannot pass deleted object as a pointer of type "+this.name);var g=l.$$.ptrType.registeredClass,p=ti(l.$$.ptr,g,this.registeredClass);return p}function gs(u,l){var g;if(l===null)return this.isReference&&X("null is not a valid "+this.name),this.isSmartPointer?(g=this.rawConstructor(),u!==null&&u.push(this.rawDestructor,g),g):0;l.$$||X('Cannot pass "'+pe(l)+'" as a '+this.name),l.$$.ptr||X("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&l.$$.ptrType.isConst&&X("Cannot convert argument of type "+(l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name)+" to parameter type "+this.name);var p=l.$$.ptrType.registeredClass;if(g=ti(l.$$.ptr,p,this.registeredClass),this.isSmartPointer)switch(l.$$.smartPtr===void 0&&X("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:l.$$.smartPtrType===this?g=l.$$.smartPtr:X("Cannot convert argument of type "+(l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:g=l.$$.smartPtr;break;case 2:if(l.$$.smartPtrType===this)g=l.$$.smartPtr;else{var x=l.clone();g=this.rawShare(g,ni.toHandle(function(){x.delete()})),u!==null&&u.push(this.rawDestructor,g)}break;default:X("Unsupporting sharing policy")}return g}function _s(u,l){if(l===null)return this.isReference&&X("null is not a valid "+this.name),0;l.$$||X('Cannot pass "'+pe(l)+'" as a '+this.name),l.$$.ptr||X("Cannot pass deleted object as a pointer of type "+this.name),l.$$.ptrType.isConst&&X("Cannot convert argument of type "+l.$$.ptrType.name+" to parameter type "+this.name);var g=l.$$.ptrType.registeredClass,p=ti(l.$$.ptr,g,this.registeredClass);return p}function xr(u){return this.fromWireType($[u>>2])}function ms(u){return this.rawGetPointee&&(u=this.rawGetPointee(u)),u}function Ms(u){this.rawDestructor&&this.rawDestructor(u)}function ps(u){u!==null&&u.delete()}function bs(){qt.prototype.getPointee=ms,qt.prototype.destructor=Ms,qt.prototype.argPackAdvance=8,qt.prototype.readValueFromPointer=xr,qt.prototype.deleteObject=ps,qt.prototype.fromWireType=ji}function qt(u,l,g,p,x,S,A,C,F,U,H){this.name=u,this.registeredClass=l,this.isReference=g,this.isConst=p,this.isSmartPointer=x,this.pointeeType=S,this.sharingPolicy=A,this.rawGetPointee=C,this.rawConstructor=F,this.rawShare=U,this.rawDestructor=H,!x&&l.baseClass===void 0?p?(this.toWireType=vs,this.destructorFunction=null):(this.toWireType=_s,this.destructorFunction=null):this.toWireType=gs}function ws(u,l,g){i.hasOwnProperty(u)||br("Replacing nonexistant public symbol"),i[u].overloadTable!==void 0&&g!==void 0||(i[u]=l,i[u].argCount=g)}function xs(u,l,g){L("dynCall_"+u in i,"bad function pointer type - no table for sig '"+u+"'"),g&&g.length?L(g.length===u.substring(1).replace(/j/g,"--").length):L(u.length==1);var p=i["dynCall_"+u];return g&&g.length?p.apply(null,[l].concat(g)):p.call(null,l)}var Er=[];function ei(u){var l=Er[u];return l||(u>=Er.length&&(Er.length=u+1),Er[u]=l=Mr.get(u)),L(Mr.get(u)==l,"JavaScript-side Wasm function table mirror is out of date!"),l}function Es(u,l,g){if(u.includes("j"))return xs(u,l,g);L(ei(l),"missing table entry in dynCall: "+l);var p=ei(l).apply(null,g);return p}function Cs(u,l){L(u.includes("j")||u.includes("p"),"getDynCaller should only be called with i64 sigs");var g=[];return function(){return g.length=0,Object.assign(g,arguments),Es(u,l,g)}}function Me(u,l){u=Pt(u);function g(){return u.includes("j")?Cs(u,l):ei(l)}var p=g();return typeof p!="function"&&X("unknown function pointer with signature "+u+": "+l),p}var Hi=void 0;function Ps(u){var l=_o(u),g=Pt(l);return Jt(l),g}function ri(u,l){var g=[],p={};function x(S){if(!p[S]&&!_e[S]){if(pr[S]){pr[S].forEach(x);return}g.push(S),p[S]=!0}}throw l.forEach(x),new Hi(u+": "+g.map(Ps).join([", "]))}function Ss(u,l,g,p,x,S,A,C,F,U,H,W,G){H=Pt(H),S=Me(x,S),C&&(C=Me(A,C)),U&&(U=Me(F,U)),G=Me(W,G);var rt=Di(H);ds(rt,function(){ri("Cannot construct "+H+" due to unbound types",[p])}),Fe([u,l,g],p?[p]:[],function(ct){ct=ct[0];var at,At;p?(at=ct.registeredClass,At=at.instancePrototype):At=Xt.prototype;var Dt=zi(rt,function(){if(Object.getPrototypeOf(this)!==R)throw new me("Use 'new' to construct "+H);if(k.constructor_body===void 0)throw new me(H+" has no accessible constructor");var Sr=k.constructor_body[arguments.length];if(Sr===void 0)throw new me("Tried to invoke ctor of "+H+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(k.constructor_body).toString()+") parameters instead!");return Sr.apply(this,arguments)}),R=Object.create(At,{constructor:{value:Dt}});Dt.prototype=R;var k=new ys(H,Dt,R,G,at,S,C,U),ft=new qt(H,k,!0,!1,!1),ot=new qt(H+"*",k,!1,!1,!1),ae=new qt(H+" const*",k,!1,!0,!1);return qi[u]={pointerType:ot,constPointerType:ae},ws(rt,Dt),[ft,ot,ae]})}function Wi(u,l){for(var g=[],p=0;p<u;p++)g.push(Y[l+p*4>>2]);return g}function Ts(u){for(;u.length;){var l=u.pop(),g=u.pop();g(l)}}function Vi(u,l,g,p,x){var S=l.length;S<2&&X("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var A=l[1]!==null&&g!==null,C=!1,F=1;F<l.length;++F)if(l[F]!==null&&l[F].destructorFunction===void 0){C=!0;break}var U=l[0].name!=="void",H=S-2,W=new Array(H),G=[],rt=[];return function(){arguments.length!==H&&X("function "+u+" called with "+arguments.length+" arguments, expected "+H+" args!"),rt.length=0;var ct;G.length=A?2:1,G[0]=x,A&&(ct=l[1].toWireType(rt,this),G[1]=ct);for(var at=0;at<H;++at)W[at]=l[at+2].toWireType(rt,arguments[at]),G.push(W[at]);var At=p.apply(null,G);function Dt(R){if(C)Ts(rt);else for(var k=A?1:2;k<l.length;k++){var ft=k===1?ct:W[k-2];l[k].destructorFunction!==null&&l[k].destructorFunction(ft)}if(U)return l[0].fromWireType(R)}return Dt(At)}}function As(u,l,g,p,x,S){L(l>0);var A=Wi(l,g);x=Me(p,x),Fe([],[u],function(C){C=C[0];var F="constructor "+C.name;if(C.registeredClass.constructor_body===void 0&&(C.registeredClass.constructor_body=[]),C.registeredClass.constructor_body[l-1]!==void 0)throw new me("Cannot register multiple constructors with identical number of parameters ("+(l-1)+") for class '"+C.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return C.registeredClass.constructor_body[l-1]=()=>{ri("Cannot construct "+C.name+" due to unbound types",A)},Fe([],A,function(U){return U.splice(1,0,null),C.registeredClass.constructor_body[l-1]=Vi(F,U,null,x,S),[]}),[]})}function Os(u,l,g,p,x,S,A,C){var F=Wi(g,p);l=Pt(l),S=Me(x,S),Fe([],[u],function(U){U=U[0];var H=U.name+"."+l;l.startsWith("@@")&&(l=Symbol[l.substring(2)]),C&&U.registeredClass.pureVirtualFunctions.push(l);function W(){ri("Cannot call "+H+" due to unbound types",F)}var G=U.registeredClass.instancePrototype,rt=G[l];return rt===void 0||rt.overloadTable===void 0&&rt.className!==U.name&&rt.argCount===g-2?(W.argCount=g-2,W.className=U.name,G[l]=W):(Gi(G,l,H),G[l].overloadTable[g-2]=W),Fe([],F,function(ct){var at=Vi(H,ct,U,S,A);return G[l].overloadTable===void 0?(at.argCount=g-2,G[l]=at):G[l].overloadTable[g-2]=at,[]}),[]})}var ii=[],Ft=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Is(u){u>4&&--Ft[u].refcount===0&&(Ft[u]=void 0,ii.push(u))}function Rs(){for(var u=0,l=5;l<Ft.length;++l)Ft[l]!==void 0&&++u;return u}function Ns(){for(var u=5;u<Ft.length;++u)if(Ft[u]!==void 0)return Ft[u];return null}function Ls(){i.count_emval_handles=Rs,i.get_first_emval=Ns}var ni={toValue:u=>(u||X("Cannot use deleted val. handle = "+u),Ft[u].value),toHandle:u=>{switch(u){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var l=ii.length?ii.pop():Ft.length;return Ft[l]={refcount:1,value:u},l}}}};function Fs(u,l){l=Pt(l),kt(u,{name:l,fromWireType:function(g){var p=ni.toValue(g);return Is(g),p},toWireType:function(g,p){return ni.toHandle(p)},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:null})}function pe(u){if(u===null)return"null";var l=typeof u;return l==="object"||l==="array"||l==="function"?u.toString():""+u}function Ds(u,l){switch(l){case 2:return function(g){return this.fromWireType(ve[g>>2])};case 3:return function(g){return this.fromWireType(Re[g>>3])};default:throw new TypeError("Unknown float type: "+u)}}function zs(u,l,g){var p=Qr(g);l=Pt(l),kt(u,{name:l,fromWireType:function(x){return x},toWireType:function(x,S){if(typeof S!="number"&&typeof S!="boolean")throw new TypeError('Cannot convert "'+pe(S)+'" to '+this.name);return S},argPackAdvance:8,readValueFromPointer:Ds(l,p),destructorFunction:null})}function Us(u,l,g){switch(l){case 0:return g?function(x){return O[x]}:function(x){return q[x]};case 1:return g?function(x){return V[x>>1]}:function(x){return Z[x>>1]};case 2:return g?function(x){return $[x>>2]}:function(x){return Y[x>>2]};default:throw new TypeError("Unknown integer type: "+u)}}function Bs(u,l,g,p,x){l=Pt(l),x===-1&&(x=4294967295);var S=Qr(g),A=W=>W;if(p===0){var C=32-8*g;A=W=>W<<C>>>C}var F=l.includes("unsigned"),U=(W,G)=>{if(typeof W!="number"&&typeof W!="boolean")throw new TypeError('Cannot convert "'+pe(W)+'" to '+G);if(W<p||W>x)throw new TypeError('Passing a number "'+pe(W)+'" from JS side to C/C++ side to an argument of type "'+l+'", which is outside the valid range ['+p+", "+x+"]!")},H;F?H=function(W,G){return U(G,this.name),G>>>0}:H=function(W,G){return U(G,this.name),G},kt(u,{name:l,fromWireType:A,toWireType:H,argPackAdvance:8,readValueFromPointer:Us(l,S,p!==0),destructorFunction:null})}function $s(u,l,g){var p=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],x=p[l];function S(A){A=A>>2;var C=Y,F=C[A],U=C[A+1];return new x(w,U,F)}g=Pt(g),kt(u,{name:g,fromWireType:S,argPackAdvance:8,readValueFromPointer:S},{ignoreDuplicateRegistrations:!0})}function ks(u,l){l=Pt(l);var g=l==="std::string";kt(u,{name:l,fromWireType:function(p){var x=Y[p>>2],S=p+4,A;if(g)for(var C=S,F=0;F<=x;++F){var U=S+F;if(F==x||q[U]==0){var H=U-C,W=gt(C,H);A===void 0?A=W:(A+="\0",A+=W),C=U+1}}else{for(var G=new Array(x),F=0;F<x;++F)G[F]=String.fromCharCode(q[S+F]);A=G.join("")}return Jt(p),A},toWireType:function(p,x){x instanceof ArrayBuffer&&(x=new Uint8Array(x));var S,A=typeof x=="string";A||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof Int8Array||X("Cannot pass non-string to std::string"),g&&A?S=ye(x):S=x.length;var C=si(4+S+1),F=C+4;if(Y[C>>2]=S,g&&A)Ie(x,F,S+1);else if(A)for(var U=0;U<S;++U){var H=x.charCodeAt(U);H>255&&(Jt(F),X("String has UTF-16 code units that do not fit in 8 bits")),q[F+U]=H}else for(var U=0;U<S;++U)q[F+U]=x[U];return p!==null&&p.push(Jt,C),C},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:function(p){Jt(p)}})}var Yi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function qs(u,l){L(u%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var g=u,p=g>>1,x=p+l/2;!(p>=x)&&Z[p];)++p;if(g=p<<1,g-u>32&&Yi)return Yi.decode(q.subarray(u,g));for(var S="",A=0;!(A>=l/2);++A){var C=V[u+A*2>>1];if(C==0)break;S+=String.fromCharCode(C)}return S}function js(u,l,g){if(L(l%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),L(typeof g=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),g===void 0&&(g=2147483647),g<2)return 0;g-=2;for(var p=l,x=g<u.length*2?g/2:u.length,S=0;S<x;++S){var A=u.charCodeAt(S);V[l>>1]=A,l+=2}return V[l>>1]=0,l-p}function Gs(u){return u.length*2}function Hs(u,l){L(u%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var g=0,p="";!(g>=l/4);){var x=$[u+g*4>>2];if(x==0)break;if(++g,x>=65536){var S=x-65536;p+=String.fromCharCode(55296|S>>10,56320|S&1023)}else p+=String.fromCharCode(x)}return p}function Ws(u,l,g){if(L(l%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),L(typeof g=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),g===void 0&&(g=2147483647),g<4)return 0;for(var p=l,x=p+g-4,S=0;S<u.length;++S){var A=u.charCodeAt(S);if(A>=55296&&A<=57343){var C=u.charCodeAt(++S);A=65536+((A&1023)<<10)|C&1023}if($[l>>2]=A,l+=4,l+4>x)break}return $[l>>2]=0,l-p}function Vs(u){for(var l=0,g=0;g<u.length;++g){var p=u.charCodeAt(g);p>=55296&&p<=57343&&++g,l+=4}return l}function Ys(u,l,g){g=Pt(g);var p,x,S,A,C;l===2?(p=qs,x=js,A=Gs,S=()=>Z,C=1):l===4&&(p=Hs,x=Ws,A=Vs,S=()=>Y,C=2),kt(u,{name:g,fromWireType:function(F){for(var U=Y[F>>2],H=S(),W,G=F+4,rt=0;rt<=U;++rt){var ct=F+4+rt*l;if(rt==U||H[ct>>C]==0){var at=ct-G,At=p(G,at);W===void 0?W=At:(W+="\0",W+=At),G=ct+l}}return Jt(F),W},toWireType:function(F,U){typeof U!="string"&&X("Cannot pass non-string to C++ string type "+g);var H=A(U),W=si(4+H+l);return Y[W>>2]=H>>C,x(U,W+4,H+l),F!==null&&F.push(Jt,W),W},argPackAdvance:8,readValueFromPointer:xr,destructorFunction:function(F){Jt(F)}})}function Qs(u,l){l=Pt(l),kt(u,{isVoid:!0,name:l,argPackAdvance:0,fromWireType:function(){},toWireType:function(g,p){}})}function Xs(){_t("native code called abort()")}function Js(u,l,g){q.copyWithin(u,l,l+g)}function Ks(){return 2147483648}function Zs(u){try{return B.grow(u-w.byteLength+65535>>>16),it(B.buffer),1}catch(l){m("emscripten_realloc_buffer: Attempted to grow heap from "+w.byteLength+" bytes to "+u+" bytes, but got error: "+l)}}function to(u){var l=q.length;u=u>>>0,L(u>l);var g=Ks();if(u>g)return m("Cannot enlarge memory, asked to go up to "+u+" bytes, but the limit is "+g+" bytes!"),!1;let p=(F,U)=>F+(U-F%U)%U;for(var x=1;x<=4;x*=2){var S=l*(1+.2/x);S=Math.min(S,u+100663296);var A=Math.min(g,p(Math.max(u,S),65536)),C=Zs(A);if(C)return!0}return m("Failed to grow the heap from "+l+" bytes to "+A+" bytes, not enough memory!"),!1}var ai={};function eo(){return c||"./this.program"}function $e(){if(!$e.strings){var u=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",l={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:u,_:eo()};for(var g in ai)ai[g]===void 0?delete l[g]:l[g]=ai[g];var p=[];for(var g in l)p.push(g+"="+l[g]);$e.strings=p}return $e.strings}function ro(u,l,g){for(var p=0;p<u.length;++p)L(u.charCodeAt(p)===(u.charCodeAt(p)&255)),O[l++>>0]=u.charCodeAt(p);O[l>>0]=0}function io(u,l){var g=0;return $e().forEach(function(p,x){var S=l+g;Y[u+x*4>>2]=S,ro(p,S),g+=p.length+1}),0}function no(u,l){var g=$e();Y[u>>2]=g.length;var p=0;return g.forEach(function(x){p+=x.length+1}),Y[l>>2]=p,0}function ao(u){_t("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")}function so(u,l,g,p,x){return 70}var oo=[null,[],[]];function ho(u,l){var g=oo[u];L(g),l===0||l===10?((u===1?_:m)(lt(g,0)),g.length=0):g.push(l)}function uo(u,l,g,p){for(var x=0,S=0;S<g;S++){var A=Y[l>>2],C=Y[l+4>>2];l+=8;for(var F=0;F<C;F++)ho(u,q[A+F]);x+=C}return Y[p>>2]=x,0}function Cr(u){return u%4===0&&(u%100!==0||u%400===0)}function lo(u,l){for(var g=0,p=0;p<=l;g+=u[p++]);return g}var Qi=[31,29,31,30,31,30,31,31,30,31,30,31],Xi=[31,28,31,30,31,30,31,31,30,31,30,31];function co(u,l){for(var g=new Date(u.getTime());l>0;){var p=Cr(g.getFullYear()),x=g.getMonth(),S=(p?Qi:Xi)[x];if(l>S-g.getDate())l-=S-g.getDate()+1,g.setDate(1),x<11?g.setMonth(x+1):(g.setMonth(0),g.setFullYear(g.getFullYear()+1));else return g.setDate(g.getDate()+l),g}return g}function fo(u,l,g){var p=ye(u)+1,x=new Array(p);return nt(u,x,0,x.length),x}function yo(u,l,g,p){var x=$[p+40>>2],S={tm_sec:$[p>>2],tm_min:$[p+4>>2],tm_hour:$[p+8>>2],tm_mday:$[p+12>>2],tm_mon:$[p+16>>2],tm_year:$[p+20>>2],tm_wday:$[p+24>>2],tm_yday:$[p+28>>2],tm_isdst:$[p+32>>2],tm_gmtoff:$[p+36>>2],tm_zone:x?gt(x):""},A=gt(g),C={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var F in C)A=A.replace(new RegExp(F,"g"),C[F]);var U=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],H=["January","February","March","April","May","June","July","August","September","October","November","December"];function W(R,k,ft){for(var ot=typeof R=="number"?R.toString():R||"";ot.length<k;)ot=ft[0]+ot;return ot}function G(R,k){return W(R,k,"0")}function rt(R,k){function ft(ae){return ae<0?-1:ae>0?1:0}var ot;return(ot=ft(R.getFullYear()-k.getFullYear()))===0&&(ot=ft(R.getMonth()-k.getMonth()))===0&&(ot=ft(R.getDate()-k.getDate())),ot}function ct(R){switch(R.getDay()){case 0:return new Date(R.getFullYear()-1,11,29);case 1:return R;case 2:return new Date(R.getFullYear(),0,3);case 3:return new Date(R.getFullYear(),0,2);case 4:return new Date(R.getFullYear(),0,1);case 5:return new Date(R.getFullYear()-1,11,31);case 6:return new Date(R.getFullYear()-1,11,30)}}function at(R){var k=co(new Date(R.tm_year+1900,0,1),R.tm_yday),ft=new Date(k.getFullYear(),0,4),ot=new Date(k.getFullYear()+1,0,4),ae=ct(ft),Sr=ct(ot);return rt(ae,k)<=0?rt(Sr,k)<=0?k.getFullYear()+1:k.getFullYear():k.getFullYear()-1}var At={"%a":function(R){return U[R.tm_wday].substring(0,3)},"%A":function(R){return U[R.tm_wday]},"%b":function(R){return H[R.tm_mon].substring(0,3)},"%B":function(R){return H[R.tm_mon]},"%C":function(R){var k=R.tm_year+1900;return G(k/100|0,2)},"%d":function(R){return G(R.tm_mday,2)},"%e":function(R){return W(R.tm_mday,2," ")},"%g":function(R){return at(R).toString().substring(2)},"%G":function(R){return at(R)},"%H":function(R){return G(R.tm_hour,2)},"%I":function(R){var k=R.tm_hour;return k==0?k=12:k>12&&(k-=12),G(k,2)},"%j":function(R){return G(R.tm_mday+lo(Cr(R.tm_year+1900)?Qi:Xi,R.tm_mon-1),3)},"%m":function(R){return G(R.tm_mon+1,2)},"%M":function(R){return G(R.tm_min,2)},"%n":function(){return`
`},"%p":function(R){return R.tm_hour>=0&&R.tm_hour<12?"AM":"PM"},"%S":function(R){return G(R.tm_sec,2)},"%t":function(){return"	"},"%u":function(R){return R.tm_wday||7},"%U":function(R){var k=R.tm_yday+7-R.tm_wday;return G(Math.floor(k/7),2)},"%V":function(R){var k=Math.floor((R.tm_yday+7-(R.tm_wday+6)%7)/7);if((R.tm_wday+371-R.tm_yday-2)%7<=2&&k++,k){if(k==53){var ot=(R.tm_wday+371-R.tm_yday)%7;ot!=4&&(ot!=3||!Cr(R.tm_year))&&(k=1)}}else{k=52;var ft=(R.tm_wday+7-R.tm_yday-1)%7;(ft==4||ft==5&&Cr(R.tm_year%400-1))&&k++}return G(k,2)},"%w":function(R){return R.tm_wday},"%W":function(R){var k=R.tm_yday+7-(R.tm_wday+6)%7;return G(Math.floor(k/7),2)},"%y":function(R){return(R.tm_year+1900).toString().substring(2)},"%Y":function(R){return R.tm_year+1900},"%z":function(R){var k=R.tm_gmtoff,ft=k>=0;return k=Math.abs(k)/60,k=k/60*100+k%60,(ft?"+":"-")+("0000"+k).slice(-4)},"%Z":function(R){return R.tm_zone},"%%":function(){return"%"}};A=A.replace(/%%/g,"\0\0");for(var F in At)A.includes(F)&&(A=A.replace(new RegExp(F,"g"),At[F](S)));A=A.replace(/\0\0/g,"%");var Dt=fo(A);return Dt.length>l?0:(Ga(Dt,u),Dt.length-1)}function vo(u,l,g,p){return yo(u,l,g,p)}Qa(),me=i.BindingError=Xr(Error,"BindingError"),Ui=i.InternalError=Xr(Error,"InternalError"),fs(),as(),bs(),Hi=i.UnboundTypeError=Xr(Error,"UnboundTypeError"),Ls();function go(){P("fetchSettings")}var Ji={__cxa_allocate_exception:Ha,__cxa_throw:Va,_embind_register_bigint:Ya,_embind_register_bool:Ka,_embind_register_class:Ss,_embind_register_class_constructor:As,_embind_register_class_function:Os,_embind_register_emval:Fs,_embind_register_float:zs,_embind_register_integer:Bs,_embind_register_memory_view:$s,_embind_register_std_string:ks,_embind_register_std_wstring:Ys,_embind_register_void:Qs,abort:Xs,emscripten_memcpy_big:Js,emscripten_resize_heap:to,environ_get:io,environ_sizes_get:no,fd_close:ao,fd_seek:so,fd_write:uo,strftime_l:vo};ja(),i.___wasm_call_ctors=st("__wasm_call_ctors");var si=i._malloc=st("malloc"),Jt=i._free=st("free"),_o=i.___getTypeName=st("__getTypeName");i.__embind_initialize_bindings=st("_embind_initialize_bindings"),i.___errno_location=st("__errno_location"),i._fflush=st("fflush");var Ki=i._emscripten_stack_init=function(){return(Ki=i._emscripten_stack_init=i.asm.emscripten_stack_init).apply(null,arguments)};i._emscripten_stack_get_free=function(){return(i._emscripten_stack_get_free=i.asm.emscripten_stack_get_free).apply(null,arguments)},i._emscripten_stack_get_base=function(){return(i._emscripten_stack_get_base=i.asm.emscripten_stack_get_base).apply(null,arguments)};var oi=i._emscripten_stack_get_end=function(){return(oi=i._emscripten_stack_get_end=i.asm.emscripten_stack_get_end).apply(null,arguments)};i.stackSave=st("stackSave"),i.stackRestore=st("stackRestore"),i.stackAlloc=st("stackAlloc");var mo=i.___cxa_is_pointer_type=st("__cxa_is_pointer_type");i.dynCall_viijii=st("dynCall_viijii"),i.dynCall_ji=st("dynCall_ji"),i.dynCall_jiji=st("dynCall_jiji"),i.dynCall_iiiiij=st("dynCall_iiiiij"),i.dynCall_iiiiijj=st("dynCall_iiiiijj"),i.dynCall_iiiiiijj=st("dynCall_iiiiiijj");var Mo=["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","print","printErr","callMain","abort","keepRuntimeAlive","wasmMemory","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readAsmConstArgsArray","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","ExitStatus","getEnvStrings","checkWasiClock","flush_NO_FILESYSTEM","dlopenMissingError","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","FS","MEMFS","TTY","PIPEFS","SOCKFS","_setNetworkCallback","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","InternalError","BindingError","UnboundTypeError","PureVirtualError","init_embind","throwInternalError","throwBindingError","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","extendError","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","registeredTypes","awaitingDependencies","typeDependencies","registeredPointers","registerType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","heap32VectorToArray","requireRegisteredType","getShiftFromSize","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","simpleReadValueFromPointer","runDestructors","new_","craftInvokerFunction","embind__requireFunction","tupleRegistrations","structRegistrations","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_getPointee","RegisteredPointer_destructor","RegisteredPointer_deleteObject","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","ClassHandle_isAliasOf","throwInstanceAlreadyDeleted","ClassHandle_clone","ClassHandle_delete","deletionQueue","ClassHandle_isDeleted","ClassHandle_deleteLater","flushPendingDeletes","delayFunction","setDelayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_handle_array","emval_free_list","emval_symbols","init_emval","count_emval_handles","get_first_emval","getStringOrSymbol","Emval","emval_newers","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_methodCallers","emval_addMethodCaller","emval_registeredMethods"];Mo.forEach(N);var po=["ptrToString","zeroMemory","stringToNewUTF8","exitJS","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getRandomDevice","traverseStack","convertPCtoSourceLocation","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","listenOnce","autoResumeAudioContext","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","reallyNegative","unSign","strLen","reSign","formatString","getSocketFromFD","getSocketAddress","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","checkWasiClock","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","exception_addRef","exception_decRef","setMainLoop","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","registerInheritedInstance","unregisterInheritedInstance","requireRegisteredType","enumReadValueFromPointer","validateThis","getStringOrSymbol","craftEmvalAllocator","emval_get_global","emval_lookupTypes","emval_allocateDestructors","emval_addMethodCaller"];po.forEach(E);var Pr;Ne=function u(){Pr||Zi(),Pr||(Ne=u)};function bo(){Ki(),Ia()}function Zi(u){if(re>0||(bo(),Ra(),re>0))return;function l(){Pr||(Pr=!0,i.calledRun=!0,!Q&&(Na(),o(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),L(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),La()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),l()},1)):l(),Wr()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Zi(),n.ready}})();t.exports=r}(ci)),ci.exports}var xn;function qo(){if(xn)return Rt;xn=1;var t=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.LazPerf=Rt.create=Rt.createLazPerf=void 0;const e=t(ko());return Rt.createLazPerf=e.default,Rt.create=e.default,Rt.LazPerf={create:e.default},Rt}var En;function jo(){if(En)return Vt;En=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.decompressFile=Vt.decompressChunk=Vt.PointData=void 0;const t=qo(),e=ia();Vt.PointData={createLazPerf:t.createLazPerf,decompressChunk:n,decompressFile:i};let r;async function a(o){return o||(r||(r=(0,t.createLazPerf)()),r)}async function n(o,{pointCount:s,pointDataRecordFormat:h,pointDataRecordLength:c},d){const f=await a(d),v=new Uint8Array(s*c),y=f._malloc(o.byteLength),_=f._malloc(c),m=new f.ChunkDecoder;try{f.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,o.byteLength),y),m.open(h,c,y);for(let M=0;M<s;++M)m.getPoint(_),v.set(new Uint8Array(f.HEAPU8.buffer,_,c),M*c)}finally{f._free(y),f._free(_),m.delete()}return v}Vt.decompressChunk=n;async function i(o,s){const h=await a(s),c=e.Header.parse(o),{pointCount:d,pointDataRecordLength:f}=c,v=new Uint8Array(d*f),y=h._malloc(o.byteLength),_=h._malloc(f),m=new h.LASZip;try{h.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,o.byteLength),y),m.open(y,o.byteLength);for(let M=0;M<d;++M)m.getPoint(_),v.set(new Uint8Array(h.HEAPU8.buffer,_,f),M*f)}finally{m.delete()}return v}return Vt.decompressFile=i,Vt}var Xe={},Cn;function Go(){if(Cn)return Xe;Cn=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.View=void 0;const t=Lt(),e=ea(),r=ra();Xe.View={create:a};function a(n,i,o=[],s){let h=r.Extractor.create(i,o);if(s){const _=new Set([...s]);h=Object.entries(h).reduce((m,[M,P])=>(_.has(M)&&(m[M]=P),m),{})}const c=e.Dimensions.create(h,o),d=t.Binary.toDataView(n),f=i.pointDataRecordLength;if(d.byteLength%f!==0)throw new Error(`Invalid buffer length (${d.byteLength}) for point length ${f}`);const v=d.byteLength/i.pointDataRecordLength;function y(_){const m=h[_];if(!m)throw new Error(`No extractor for dimension: ${_}`);return function(M){if(M>=v)throw new RangeError(`View index (${M}) out of range: ${v}`);return m(d,M)}}return{pointCount:v,dimensions:c,getter:y}}return Xe}var Je={},Pn;function Ho(){if(Pn)return Je;Pn=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Vlr=void 0;const t=Lt(),e=wi();Je.Vlr={walk:i,parse:o,find:r,at:a,fetch:n};function r(d,f,v){return d.find(y=>y.userId===f&&y.recordId===v)}function a(d,f,v){const y=r(d,f,v);if(!y)throw new Error(`VLR not found: ${f}/${v}`);return y}function n(d,{contentOffset:f,contentLength:v}){return v===0?new Uint8Array:t.Getter.create(d)(f,f+v)}async function i(d,f){const v=t.Getter.create(d),y=await c({get:v,startOffset:f.headerLength,count:f.vlrCount,isExtended:!1}),_=await c({get:v,startOffset:f.evlrOffset,count:f.evlrCount,isExtended:!0});return[...y,..._]}function o(d,f){return(f?h:s)(d)}function s(d){const f=t.Binary.toDataView(d);if(f.byteLength!==e.vlrHeaderLength)throw new Error(`Invalid VLR header length (must be ${e.vlrHeaderLength}): ${f.byteLength}`);return{userId:t.Binary.toCString(d.slice(2,18)),recordId:f.getUint16(18,!0),contentLength:f.getUint16(20,!0),description:t.Binary.toCString(d.slice(22,54)),isExtended:!1}}function h(d){const f=t.Binary.toDataView(d);if(f.byteLength!==e.evlrHeaderLength)throw new Error(`Invalid EVLR header length (must be ${e.evlrHeaderLength}): ${f.byteLength}`);return{userId:t.Binary.toCString(d.slice(2,18)),recordId:f.getUint16(18,!0),contentLength:(0,t.parseBigInt)((0,t.getBigUint64)(f,20,!0)),description:t.Binary.toCString(d.slice(28,60)),isExtended:!0}}async function c({get:d,startOffset:f,count:v,isExtended:y}){const _=[];let m=f;const M=y?e.evlrHeaderLength:e.vlrHeaderLength;for(let P=0;P<v;++P){const b=M?await d(m,m+M):new Uint8Array,{userId:E,recordId:N,contentLength:T,description:B}=o(b,y);_.push({userId:E,recordId:N,contentOffset:m+M,contentLength:T,description:B,isExtended:y}),m+=M+T}return _}return Je}var Sn;function na(){return Sn||(Sn=1,function(t){var e=Gt&&Gt.__createBinding||(Object.create?function(f,v,y,_){_===void 0&&(_=y);var m=Object.getOwnPropertyDescriptor(v,y);(!m||("get"in m?!v.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return v[y]}}),Object.defineProperty(f,_,m)}:function(f,v,y,_){_===void 0&&(_=y),f[_]=v[y]}),r=Gt&&Gt.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),a=Gt&&Gt.__importStar||function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var y in f)y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)&&e(v,f,y);return r(v,f),v};Object.defineProperty(t,"__esModule",{value:!0}),t.Vlr=t.View=t.PointData=t.Header=t.Extractor=t.ExtraBytes=t.Dimensions=t.Constants=void 0,t.Constants=a(wi());var n=ea();Object.defineProperty(t,"Dimensions",{enumerable:!0,get:function(){return n.Dimensions}});var i=ta();Object.defineProperty(t,"ExtraBytes",{enumerable:!0,get:function(){return i.ExtraBytes}});var o=ra();Object.defineProperty(t,"Extractor",{enumerable:!0,get:function(){return o.Extractor}});var s=ia();Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return s.Header}});var h=jo();Object.defineProperty(t,"PointData",{enumerable:!0,get:function(){return h.PointData}});var c=Go();Object.defineProperty(t,"View",{enumerable:!0,get:function(){return c.View}});var d=Ho();Object.defineProperty(t,"Vlr",{enumerable:!0,get:function(){return d.Vlr}})}(Gt)),Gt}var Ke={},Tn;function aa(){if(Tn)return Ke;Tn=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Hierarchy=void 0;const t=Lt(),e=bi();Ke.Hierarchy={parse:r,load:a};function r(n){const i=t.Binary.toDataView(n);if(i.byteLength%e.hierarchyItemLength!==0)throw new Error(`Invalid hierarchy page length: ${i.byteLength}`);const o={},s={};for(let h=0;h<i.byteLength;h+=e.hierarchyItemLength){const c=i.getInt32(h+0,!0),d=i.getInt32(h+4,!0),f=i.getInt32(h+8,!0),v=i.getInt32(h+12,!0),y=(0,t.parseBigInt)((0,t.getBigUint64)(i,h+16,!0)),_=i.getInt32(h+24,!0),m=i.getInt32(h+28,!0),M=t.Key.toString([c,d,f,v]);if(m<-1)throw new Error(`Invalid hierarchy point count at key: ${M}`);m===-1?s[M]={pageOffset:y,pageLength:_}:o[M]={pointCount:m,pointDataOffset:y,pointDataLength:_}}return{nodes:o,pages:s}}async function a(n,i){const o=t.Getter.create(n);return r(await o(i.pageOffset,i.pageOffset+i.pageLength))}return Ke}var Ze={},An;function sa(){if(An)return Ze;An=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Info=void 0;const t=Lt(),e=bi();Ze.Info={parse:r};function r(a){const n=t.Binary.toDataView(a);if(n.byteLength!==e.infoLength)throw new Error(`Invalid COPC info VLR length (should be ${e.infoLength}): ${n.byteLength}`);const i=[n.getFloat64(0,!0),n.getFloat64(8,!0),n.getFloat64(16,!0)],o=n.getFloat64(24,!0);return{cube:[i[0]-o,i[1]-o,i[2]-o,i[0]+o,i[1]+o,i[2]+o],spacing:n.getFloat64(32,!0),rootHierarchyPage:{pageOffset:(0,t.parseBigInt)((0,t.getBigUint64)(n,40,!0)),pageLength:(0,t.parseBigInt)((0,t.getBigUint64)(n,48,!0))},gpsTimeRange:[n.getFloat64(56,!0),n.getFloat64(64,!0)]}}return Ze}var On;function Wo(){if(On)return It;On=1;var t=It&&It.__createBinding||(Object.create?function(v,y,_,m){m===void 0&&(m=_);var M=Object.getOwnPropertyDescriptor(y,_);(!M||("get"in M?!y.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return y[_]}}),Object.defineProperty(v,m,M)}:function(v,y,_,m){m===void 0&&(m=_),v[m]=y[_]}),e=It&&It.__setModuleDefault||(Object.create?function(v,y){Object.defineProperty(v,"default",{enumerable:!0,value:y})}:function(v,y){v.default=y}),r=It&&It.__importStar||function(v){if(v&&v.__esModule)return v;var y={};if(v!=null)for(var _ in v)_!=="default"&&Object.prototype.hasOwnProperty.call(v,_)&&t(y,v,_);return e(y,v),y};Object.defineProperty(It,"__esModule",{value:!0}),It.Copc=void 0;const a=r(na()),n=Lt(),i=aa(),o=sa();It.Copc={create:s,loadHierarchyPage:h,loadCompressedPointDataBuffer:c,loadPointDataBuffer:d,loadPointDataView:f};async function s(v){const y=n.Getter.create(v),_=65536,m=y(0,_);async function M(tt,lt){return lt>=_?y(tt,lt):(await m).slice(tt,lt)}const P=a.Header.parse(await M(0,a.Constants.minHeaderLength)),b=await a.Vlr.walk(M,P),E=a.Vlr.find(b,"copc",1);if(!E)throw new Error("COPC info VLR is required");const N=o.Info.parse(await a.Vlr.fetch(M,E));let T;const B=a.Vlr.find(b,"LASF_Projection",2112);B&&B.contentLength&&(T=n.Binary.toCString(await a.Vlr.fetch(M,B)),T===""&&(T=void 0));let Q=[];const L=a.Vlr.find(b,"LASF_Spec",4);return L&&(Q=a.ExtraBytes.parse(await a.Vlr.fetch(M,L))),{header:P,vlrs:b,info:N,wkt:T,eb:Q}}async function h(v,y){const _=n.Getter.create(v);return i.Hierarchy.load(_,y)}async function c(v,{pointDataOffset:y,pointDataLength:_}){return n.Getter.create(v)(y,y+_)}async function d(v,{pointDataRecordFormat:y,pointDataRecordLength:_},m,M){const P=await c(v,m),{pointCount:b}=m;return a.PointData.decompressChunk(P,{pointCount:b,pointDataRecordFormat:y,pointDataRecordLength:_},M)}async function f(v,y,_,{lazPerf:m,include:M}={}){const P=await d(v,y.header,_,m);return a.View.create(P,y.header,y.eb,M)}return It}var In;function Vo(){return In||(In=1,function(t){var e=jt&&jt.__createBinding||(Object.create?function(s,h,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(h,c);(!f||("get"in f?!h.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return h[c]}}),Object.defineProperty(s,d,f)}:function(s,h,c,d){d===void 0&&(d=c),s[d]=h[c]}),r=jt&&jt.__setModuleDefault||(Object.create?function(s,h){Object.defineProperty(s,"default",{enumerable:!0,value:h})}:function(s,h){s.default=h}),a=jt&&jt.__importStar||function(s){if(s&&s.__esModule)return s;var h={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&e(h,s,c);return r(h,s),h};Object.defineProperty(t,"__esModule",{value:!0}),t.Info=t.Hierarchy=t.Copc=t.Constants=void 0,t.Constants=a(bi());var n=Wo();Object.defineProperty(t,"Copc",{enumerable:!0,get:function(){return n.Copc}});var i=aa();Object.defineProperty(t,"Hierarchy",{enumerable:!0,get:function(){return i.Hierarchy}});var o=sa();Object.defineProperty(t,"Info",{enumerable:!0,get:function(){return o.Info}})}(jt)),jt}var Rn;function Yo(){return Rn||(Rn=1,function(t){var e=Ot&&Ot.__createBinding||(Object.create?function(i,o,s,h){h===void 0&&(h=s);var c=Object.getOwnPropertyDescriptor(o,s);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,h,c)}:function(i,o,s,h){h===void 0&&(h=s),i[h]=o[s]}),r=Ot&&Ot.__setModuleDefault||(Object.create?function(i,o){Object.defineProperty(i,"default",{enumerable:!0,value:o})}:function(i,o){i.default=o}),a=Ot&&Ot.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&e(o,i,s);return r(o,i),o},n=Ot&&Ot.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&e(o,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.Las=t.Ept=void 0,t.Ept=a(So()),n(Vo(),t),t.Las=a(na()),n(Lt(),t)}(Ot)),Ot}var vi=Yo();function Qo(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var fe=1,de=2,Pe=3,Xo=4,gi=5,Nn=6378137,Jo=6356752314e-3,Ln=.0066943799901413165,ar=484813681109536e-20,I=Math.PI/2,Ko=.16666666666666666,Zo=.04722222222222222,th=.022156084656084655,D=1e-10,ht=.017453292519943295,Ut=57.29577951308232,J=Math.PI/4,lr=Math.PI*2,ut=3.14159265359,pt={};pt.greenwich=0;pt.lisbon=-9.131906111111;pt.paris=2.337229166667;pt.bogota=-74.080916666667;pt.madrid=-3.687938888889;pt.rome=12.452333333333;pt.bern=7.439583333333;pt.jakarta=106.807719444444;pt.ferro=-17.666666666667;pt.brussels=4.367975;pt.stockholm=18.058277777778;pt.athens=23.7163375;pt.oslo=10.722916666667;var eh={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},Fn=/[\s_\-\/\(\)]/g;function Zt(t,e){if(t[e])return t[e];for(var r=Object.keys(t),a=e.toLowerCase().replace(Fn,""),n=-1,i,o;++n<r.length;)if(i=r[n],o=i.toLowerCase().replace(Fn,""),o===a)return t[i]}function _i(t){var e={},r=t.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,h){var c=h.split("=");return c.push(!0),s[c[0].toLowerCase()]=c[1],s},{}),a,n,i,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*ht},lat_1:function(s){e.lat1=s*ht},lat_2:function(s){e.lat2=s*ht},lat_ts:function(s){e.lat_ts=s*ht},lon_0:function(s){e.long0=s*ht},lon_1:function(s){e.long1=s*ht},lon_2:function(s){e.long2=s*ht},alpha:function(s){e.alpha=parseFloat(s)*ht},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*ht},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r:function(s){e.a=e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(h){return parseFloat(h)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var h=Zt(eh,s);h&&(e.to_meter=h.to_meter)},from_greenwich:function(s){e.from_greenwich=s*ht},pm:function(s){var h=Zt(pt,s);e.from_greenwich=(h||parseFloat(s))*ht},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var h="ewnsud";s.length===3&&h.indexOf(s.substr(0,1))!==-1&&h.indexOf(s.substr(1,1))!==-1&&h.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(a in r)n=r[a],a in o?(i=o[a],typeof i=="function"?i(n):e[i]=n):e[a]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var cr=1,oa=2,ha=3,zr=4,ua=5,xi=-1,rh=/\s/,ih=/[A-Za-z]/,nh=/[A-Za-z84_]/,Gr=/[,\]]/,la=/[\d\.E\-\+]/;function Qt(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=cr}Qt.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==zr)for(;rh.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case cr:return this.neutral(t);case oa:return this.keyword(t);case zr:return this.quoted(t);case ua:return this.afterquote(t);case ha:return this.number(t);case xi:return}};Qt.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=zr;return}if(Gr.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Qt.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=cr;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=cr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=xi);return}};Qt.prototype.number=function(t){if(la.test(t)){this.word+=t;return}if(Gr.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Qt.prototype.quoted=function(t){if(t==='"'){this.state=ua;return}this.word+=t};Qt.prototype.keyword=function(t){if(nh.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=cr;return}if(Gr.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Qt.prototype.neutral=function(t){if(ih.test(t)){this.word=t,this.state=oa;return}if(t==='"'){this.word="",this.state=zr;return}if(la.test(t)){this.word=t,this.state=ha;return}if(Gr.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Qt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===xi)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ah(t){var e=new Qt(t);return e.output()}function fi(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var a=e?{}:t,n=r.reduce(function(i,o){return we(o,i),i},a);e&&(t[e]=n)}function we(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},we(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var a;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&we(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&we(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],fi(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],fi(e,r,t),e[r].type=r;return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return we(t,e[r]);return fi(e,r,t)}}var sh=.017453292519943295,oh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function hh(t,e){var r=e[0],a=e[1];!(r in t)&&a in t&&(t[r]=t[a],e.length===3&&(t[r]=e[2](t[r])))}function zt(t){return t*sh}function ca(t){for(var e=Object.keys(t),r=0,a=e.length;r<a;++r){var n=e[r];oh.indexOf(n)!==-1&&uh(t[n]),typeof t[n]=="object"&&ca(t[n])}}function uh(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",a=0,n=t.AXIS.length;a<n;++a){var i=[t.AXIS[a][0].toLowerCase(),t.AXIS[a][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?r+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?r+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?r+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function s(d){var f=t.to_meter||1;return d*f}var h=function(d){return hh(t,d)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",zt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",zt],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",zt],["lat0","latitude_of_origin",zt],["lat0","standard_parallel_1",zt],["lat1","standard_parallel_1",zt],["lat2","standard_parallel_2",zt],["azimuth","Azimuth"],["alpha","azimuth",zt],["srsCode","name"]];c.forEach(h),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=zt(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=zt(t.lat0>0?90:-90))}function fa(t){var e=ah(t),r=e[0],a={};return we(e,a),ca(a),a[r]}function yt(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?yt[t]=_i(arguments[1]):yt[t]=fa(arguments[1]):yt[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?yt.apply(e,a):yt(a)});if(typeof t=="string"){if(t in yt)return yt[t]}else"EPSG"in t?yt["EPSG:"+t.EPSG]=t:"ESRI"in t?yt["ESRI:"+t.ESRI]=t:"IAU2000"in t?yt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Qo(yt);function lh(t){return typeof t=="string"}function ch(t){return t in yt}var fh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function dh(t){return fh.some(function(e){return t.indexOf(e)>-1})}var yh=["3857","900913","3785","102113"];function vh(t){var e=Zt(t,"authority");if(e){var r=Zt(e,"epsg");return r&&yh.indexOf(r)>-1}}function gh(t){var e=Zt(t,"extension");if(e)return Zt(e,"proj4")}function _h(t){return t[0]==="+"}function mh(t){if(lh(t)){if(ch(t))return yt[t];if(dh(t)){var e=fa(t);if(vh(e))return yt["EPSG:3857"];var r=gh(e);return r?_i(r):e}if(_h(t))return _i(t)}else return t}function Dn(t,e){t=t||{};var r,a;if(!e)return t;for(a in e)r=e[a],r!==void 0&&(t[a]=r);return t}function $t(t,e,r){var a=t*e;return r/Math.sqrt(1-a*a)}function yr(t){return t<0?-1:1}function z(t){return Math.abs(t)<=ut?t:t-yr(t)*lr}function Nt(t,e,r){var a=t*r,n=.5*t;return a=Math.pow((1-a)/(1+a),n),Math.tan(.5*(I-e))/a}function fr(t,e){for(var r=.5*t,a,n,i=I-2*Math.atan(e),o=0;o<=15;o++)if(a=t*Math.sin(i),n=I-2*Math.atan(e*Math.pow((1-a)/(1+a),r))-i,i+=n,Math.abs(n)<=1e-10)return i;return-9999}function Mh(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ph(t){var e=t.x,r=t.y;if(r*Ut>90&&r*Ut<-90&&e*Ut>180&&e*Ut<-180)return null;var a,n;if(Math.abs(Math.abs(r)-I)<=D)return null;if(this.sphere)a=this.x0+this.a*this.k0*z(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(J+.5*r));else{var i=Math.sin(r),o=Nt(this.e,r,i);a=this.x0+this.a*this.k0*z(e-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=a,t.y=n,t}function bh(t){var e=t.x-this.x0,r=t.y-this.y0,a,n;if(this.sphere)n=I-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var i=Math.exp(-r/(this.a*this.k0));if(n=fr(this.e,i),n===-9999)return null}return a=z(this.long0+e/(this.a*this.k0)),t.x=a,t.y=n,t}var wh=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],xh={init:Mh,forward:ph,inverse:bh,names:wh};function Eh(){}function zn(t){return t}var Ch=["longlat","identity"],Ph={init:Eh,forward:zn,inverse:zn,names:Ch},Sh=[xh,Ph],Rr={},Ur=[];function da(t,e){var r=Ur.length;return t.names?(Ur[r]=t,t.names.forEach(function(a){Rr[a.toLowerCase()]=r}),this):(console.log(e),!0)}function Th(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Rr[e]<"u"&&Ur[Rr[e]])return Ur[Rr[e]]}function Ah(){Sh.forEach(da)}var Oh={start:Ah,add:da,get:Th},j={};j.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};j.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};j.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};j.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};j.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};j.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};j.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};j.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};j.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};j.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};j.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};j.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};j.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};j.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};j.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};j.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};j.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};j.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};j.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};j.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};j.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};j.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};j.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};j.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};j.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};j.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};j.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};j.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};j.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};j.hough={a:6378270,rf:297,ellipseName:"Hough"};j.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};j.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};j.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};j.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};j.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};j.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};j.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};j.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};j.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};j.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};j.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};j.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Ih=j.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};j.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Rh(t,e,r,a){var n=t*t,i=e*e,o=(n-i)/n,s=0;a?(t*=1-o*(Ko+o*(Zo+o*th)),n=t*t,o=0):s=Math.sqrt(o);var h=(n-i)/i;return{es:o,e:s,ep2:h}}function Nh(t,e,r,a,n){if(!t){var i=Zt(j,a);i||(i=Ih),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<D)&&(n=!0,e=t),{a:t,b:e,rf:r,sphere:n}}var Nr={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var Lh in Nr){var Un=Nr[Lh];Nr[Un.datumName]=Un}function Fh(t,e,r,a,n,i,o){var s={};return t===void 0||t==="none"?s.datum_type=gi:s.datum_type=Xo,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=fe),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=de,s.datum_params[3]*=ar,s.datum_params[4]*=ar,s.datum_params[5]*=ar,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=Pe,s.grids=o),s.a=r,s.b=a,s.es=n,s.ep2=i,s}var ya={};function Dh(t,e){var r=new DataView(e),a=Bh(r),n=$h(r,a),i=kh(r,n,a),o={header:n,subgrids:i};return ya[t]=o,o}function zh(t){if(t===void 0)return null;var e=t.split(",");return e.map(Uh)}function Uh(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:ya[t]||null,isNull:!1}}function xe(t){return t/3600*Math.PI/180}function Bh(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function $h(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:mi(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function mi(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function kh(t,e,r){for(var a=176,n=[],i=0;i<e.nSubgrids;i++){var o=jh(t,a,r),s=Gh(t,a,o,r),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[xe(o.lowerLongitude),xe(o.lowerLatitude)],del:[xe(o.longitudeInterval),xe(o.latitudeInterval)],lim:[h,c],count:o.gridNodeCount,cvs:qh(s)}),a+=176+o.gridNodeCount*16}return n}function qh(t){return t.map(function(e){return[xe(e.longitudeShift),xe(e.latitudeShift)]})}function jh(t,e,r){return{name:mi(t,e+8,e+16).trim(),parent:mi(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function Gh(t,e,r,a){for(var n=e+176,i=16,o=[],s=0;s<r.gridNodeCount;s++){var h={latitudeShift:t.getFloat32(n+s*i,a),longitudeShift:t.getFloat32(n+s*i+4,a),latitudeAccuracy:t.getFloat32(n+s*i+8,a),longitudeAccuracy:t.getFloat32(n+s*i+12,a)};o.push(h)}return o}function Bt(t,e){if(!(this instanceof Bt))return new Bt(t);e=e||function(c){if(c)throw c};var r=mh(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var a=Bt.projections.get(r.projName);if(!a){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var n=Zt(Nr,r.datumCode);n&&(r.datum_params=r.datum_params||(n.towgs84?n.towgs84.split(","):null),r.ellps=n.ellipse,r.datumName=n.datumName?n.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i=Nh(r.a,r.b,r.rf,r.ellps,r.sphere),o=Rh(i.a,i.b,i.rf,r.R_A),s=zh(r.nadgrids),h=r.datum||Fh(r.datumCode,r.datum_params,i.a,i.b,o.es,o.ep2,s);Dn(this,r),Dn(this,a),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),e(null,this)}Bt.projections=Oh;Bt.projections.start();function Hh(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===fe?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===de?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function va(t,e,r){var a=t.x,n=t.y,i=t.z?t.z:0,o,s,h,c;if(n<-I&&n>-1.001*I)n=-I;else if(n>I&&n<1.001*I)n=I;else{if(n<-I)return{x:-1/0,y:-1/0,z:t.z};if(n>I)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(n),c=Math.cos(n),h=s*s,o=r/Math.sqrt(1-e*h),{x:(o+i)*c*Math.cos(a),y:(o+i)*c*Math.sin(a),z:(o*(1-e)+i)*s}}function ga(t,e,r,a){var n=1e-12,i=n*n,o=30,s,h,c,d,f,v,y,_,m,M,P,b,E,N=t.x,T=t.y,B=t.z?t.z:0,Q,L,tt;if(s=Math.sqrt(N*N+T*T),h=Math.sqrt(N*N+T*T+B*B),s/r<n){if(Q=0,h/r<n)return L=I,tt=-a,{x:t.x,y:t.y,z:t.z}}else Q=Math.atan2(T,N);c=B/h,d=s/h,f=1/Math.sqrt(1-e*(2-e)*d*d),_=d*(1-e)*f,m=c*f,E=0;do E++,y=r/Math.sqrt(1-e*m*m),tt=s*_+B*m-y*(1-e*m*m),v=e*y/(y+tt),f=1/Math.sqrt(1-v*(2-v)*d*d),M=d*(1-v)*f,P=c*f,b=P*_-M*m,_=M,m=P;while(b*b>i&&E<o);return L=Math.atan(P/Math.abs(M)),{x:Q,y:L,z:tt}}function Wh(t,e,r){if(e===fe)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===de){var a=r[0],n=r[1],i=r[2],o=r[3],s=r[4],h=r[5],c=r[6];return{x:c*(t.x-h*t.y+s*t.z)+a,y:c*(h*t.x+t.y-o*t.z)+n,z:c*(-s*t.x+o*t.y+t.z)+i}}}function Vh(t,e,r){if(e===fe)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===de){var a=r[0],n=r[1],i=r[2],o=r[3],s=r[4],h=r[5],c=r[6],d=(t.x-a)/c,f=(t.y-n)/c,v=(t.z-i)/c;return{x:d+h*f-s*v,y:-h*d+f+o*v,z:s*d-o*f+v}}}function Or(t){return t===fe||t===de}function Yh(t,e,r){if(Hh(t,e)||t.datum_type===gi||e.datum_type===gi)return r;var a=t.a,n=t.es;if(t.datum_type===Pe){var i=Bn(t,!1,r);if(i!==0)return;a=Nn,n=Ln}var o=e.a,s=e.b,h=e.es;if(e.datum_type===Pe&&(o=Nn,s=Jo,h=Ln),n===h&&a===o&&!Or(t.datum_type)&&!Or(e.datum_type))return r;if(r=va(r,n,a),Or(t.datum_type)&&(r=Wh(r,t.datum_type,t.datum_params)),Or(e.datum_type)&&(r=Vh(r,e.datum_type,e.datum_params)),r=ga(r,h,o,s),e.datum_type===Pe){var c=Bn(e,!0,r);if(c!==0)return}return r}function Bn(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-r.x,y:r.y},n={x:Number.NaN,y:Number.NaN},i=[];t:for(var o=0;o<t.grids.length;o++){var s=t.grids[o];if(i.push(s.name),s.isNull){n=a;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var h=s.grid.subgrids,c=0,d=h.length;c<d;c++){var f=h[c],v=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,y=f.ll[0]-v,_=f.ll[1]-v,m=f.ll[0]+(f.lim[0]-1)*f.del[0]+v,M=f.ll[1]+(f.lim[1]-1)*f.del[1]+v;if(!(_>a.y||y>a.x||M<a.y||m<a.x)&&(n=Qh(a,e,f),!isNaN(n.x)))break t}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*Ut+" "+a.y*Ut+" tried: '"+i+"'"),-1):(r.x=-n.x,r.y=n.y,0)}function Qh(t,e,r){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var n={x:t.x,y:t.y};n.x-=r.ll[0],n.y-=r.ll[1],n.x=z(n.x-Math.PI)+Math.PI;var i=$n(n,r);if(e){if(isNaN(i.x))return a;i.x=n.x-i.x,i.y=n.y-i.y;var o=9,s=1e-12,h,c;do{if(c=$n(i,r),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:n.x-(c.x+i.x),y:n.y-(c.y+i.y)},i.x+=h.x,i.y+=h.y}while(o--&&Math.abs(h.x)>s&&Math.abs(h.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=z(i.x+r.ll[0]),a.y=i.y+r.ll[1]}else isNaN(i.x)||(a.x=t.x+i.x,a.y=t.y+i.y);return a}function $n(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(r.x),y:Math.floor(r.y)},n={x:r.x-1*a.x,y:r.y-1*a.y},i={x:Number.NaN,y:Number.NaN},o;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return i;o=a.y*e.lim[0]+a.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var h={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var d={x:e.cvs[o][0],y:e.cvs[o][1]},f=n.x*n.y,v=n.x*(1-n.y),y=(1-n.x)*(1-n.y),_=(1-n.x)*n.y;return i.x=y*s.x+v*h.x+_*d.x+f*c.x,i.y=y*s.y+v*h.y+_*d.y+f*c.y,i}function kn(t,e,r){var a=r.x,n=r.y,i=r.z||0,o,s,h,c={};for(h=0;h<3;h++)if(!(e&&h===2&&r.z===void 0))switch(h===0?(o=a,"ew".indexOf(t.axis[h])!==-1?s="x":s="y"):h===1?(o=n,"ns".indexOf(t.axis[h])!==-1?s="y":s="x"):(o=i,s="z"),t.axis[h]){case"e":c[s]=o;break;case"w":c[s]=-o;break;case"n":c[s]=o;break;case"s":c[s]=-o;break;case"u":r[s]!==void 0&&(c.z=o);break;case"d":r[s]!==void 0&&(c.z=-o);break;default:return null}return c}function _a(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Xh(t){qn(t.x),qn(t.y)}function qn(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Jh(t,e){return(t.datum.datum_type===fe||t.datum.datum_type===de||t.datum.datum_type===Pe)&&e.datumCode!=="WGS84"||(e.datum.datum_type===fe||e.datum.datum_type===de||e.datum.datum_type===Pe)&&t.datumCode!=="WGS84"}function Br(t,e,r,a){var n;Array.isArray(r)?r=_a(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var i=r.z!==void 0;if(Xh(r),t.datum&&e.datum&&Jh(t,e)&&(n=new Bt("WGS84"),r=Br(t,n,r,a),t=n),a&&t.axis!=="enu"&&(r=kn(t,!1,r)),t.projName==="longlat")r={x:r.x*ht,y:r.y*ht,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=Yh(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*Ut,y:r.y*Ut,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),a&&e.axis!=="enu"?kn(e,!0,r):(r&&!i&&delete r.z,r)}var jn=Bt("WGS84");function di(t,e,r,a){var n,i,o;return Array.isArray(r)?(n=Br(t,e,r,a)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(r.slice(3)):[n.x,n.y,r[2]].concat(r.slice(3)):[n.x,n.y].concat(r.slice(2)):[n.x,n.y]):(i=Br(t,e,r,a),o=Object.keys(r),o.length===2||o.forEach(function(s){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;i[s]=r[s]}),i)}function Gn(t){return t instanceof Bt?t:t.oProj?t.oProj:Bt(t)}function Et(t,e,r){t=Gn(t);var a=!1,n;return typeof e>"u"?(e=t,t=jn,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=jn,a=!0),e=Gn(e),r?di(t,e,r):(n={forward:function(i,o){return di(t,e,i,o)},inverse:function(i,o){return di(e,t,i,o)}},a&&(n.oProj=e),n)}var Hn=6,ma="AJSAJS",Ma="AFAFAF",Ee=65,mt=73,St=79,er=86,rr=90,Kh={forward:pa,inverse:Zh,toPoint:ba};function pa(t,e){return e=e||5,ru(tu({lat:t[1],lon:t[0]}),e)}function Zh(t){var e=Ei(xa(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ba(t){var e=Ei(xa(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function yi(t){return t*(Math.PI/180)}function Wn(t){return 180*(t/Math.PI)}function tu(t){var e=t.lat,r=t.lon,a=6378137,n=.00669438,i=.9996,o,s,h,c,d,f,v,y=yi(e),_=yi(r),m,M;M=Math.floor((r+180)/6)+1,r===180&&(M=60),e>=56&&e<64&&r>=3&&r<12&&(M=32),e>=72&&e<84&&(r>=0&&r<9?M=31:r>=9&&r<21?M=33:r>=21&&r<33?M=35:r>=33&&r<42&&(M=37)),o=(M-1)*6-180+3,m=yi(o),s=n/(1-n),h=a/Math.sqrt(1-n*Math.sin(y)*Math.sin(y)),c=Math.tan(y)*Math.tan(y),d=s*Math.cos(y)*Math.cos(y),f=Math.cos(y)*(_-m),v=a*((1-n/4-3*n*n/64-5*n*n*n/256)*y-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*y)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*y)-35*n*n*n/3072*Math.sin(6*y));var P=i*h*(f+(1-c+d)*f*f*f/6+(5-18*c+c*c+72*d-58*s)*f*f*f*f*f/120)+5e5,b=i*(v+h*Math.tan(y)*(f*f/2+(5-c+9*d+4*d*d)*f*f*f*f/24+(61-58*c+c*c+600*d-330*s)*f*f*f*f*f*f/720));return e<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(P),zoneNumber:M,zoneLetter:eu(e)}}function Ei(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var i=.9996,o=6378137,s=.00669438,h,c=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),d,f,v,y,_,m,M,P,b,E=r-5e5,N=e;a<"N"&&(N-=1e7),M=(n-1)*6-180+3,h=s/(1-s),m=N/i,P=m/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),b=P+(3*c/2-27*c*c*c/32)*Math.sin(2*P)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*P)+151*c*c*c/96*Math.sin(6*P),d=o/Math.sqrt(1-s*Math.sin(b)*Math.sin(b)),f=Math.tan(b)*Math.tan(b),v=h*Math.cos(b)*Math.cos(b),y=o*(1-s)/Math.pow(1-s*Math.sin(b)*Math.sin(b),1.5),_=E/(d*i);var T=b-d*Math.tan(b)/y*(_*_/2-(5+3*f+10*v-4*v*v-9*h)*_*_*_*_/24+(61+90*f+298*v+45*f*f-252*h-3*v*v)*_*_*_*_*_*_/720);T=Wn(T);var B=(_-(1+2*f+v)*_*_*_/6+(5-2*v+28*f-3*v*v+8*h+24*f*f)*_*_*_*_*_/120)/Math.cos(b);B=M+Wn(B);var Q;if(t.accuracy){var L=Ei({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Q={top:L.lat,right:L.lon,bottom:T,left:B}}else Q={lat:T,lon:B};return Q}function eu(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function ru(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+iu(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function iu(t,e,r){var a=wa(r),n=Math.floor(t/1e5),i=Math.floor(e/1e5)%20;return nu(n,i,a)}function wa(t){var e=t%Hn;return e===0&&(e=Hn),e}function nu(t,e,r){var a=r-1,n=ma.charCodeAt(a),i=Ma.charCodeAt(a),o=n+t-1,s=i+e,h=!1;o>rr&&(o=o-rr+Ee-1,h=!0),(o===mt||n<mt&&o>mt||(o>mt||n<mt)&&h)&&o++,(o===St||n<St&&o>St||(o>St||n<St)&&h)&&(o++,o===mt&&o++),o>rr&&(o=o-rr+Ee-1),s>er?(s=s-er+Ee-1,h=!0):h=!1,(s===mt||i<mt&&s>mt||(s>mt||i<mt)&&h)&&s++,(s===St||i<St&&s>St||(s>St||i<St)&&h)&&(s++,s===mt&&s++),s>er&&(s=s-er+Ee-1);var c=String.fromCharCode(o)+String.fromCharCode(s);return c}function xa(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,a="",n,i=0;!/[A-Z]/.test(n=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;a+=n,i++}var o=parseInt(a,10);if(i===0||i+3>e)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(i,i+=2);for(var h=wa(o),c=au(r.charAt(0),h),d=su(r.charAt(1),h);d<ou(s);)d+=2e6;var f=e-i;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var v=f/2,y=0,_=0,m,M,P,b,E;return v>0&&(m=1e5/Math.pow(10,v),M=t.substring(i,i+v),y=parseFloat(M)*m,P=t.substring(i+v),_=parseFloat(P)*m),b=y+c,E=_+d,{easting:b,northing:E,zoneLetter:s,zoneNumber:o,accuracy:m}}function au(t,e){for(var r=ma.charCodeAt(e-1),a=1e5,n=!1;r!==t.charCodeAt(0);){if(r++,r===mt&&r++,r===St&&r++,r>rr){if(n)throw"Bad character: "+t;r=Ee,n=!0}a+=1e5}return a}function su(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=Ma.charCodeAt(e-1),a=0,n=!1;r!==t.charCodeAt(0);){if(r++,r===mt&&r++,r===St&&r++,r>er){if(n)throw"Bad character: "+t;r=Ee,n=!0}a+=1e5}return a}function ou(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Te(t,e,r){if(!(this instanceof Te))return new Te(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Te.fromMGRS=function(t){return new Te(ba(t))};Te.prototype.toMGRS=function(t){return pa([this.x,this.y],t)};var hu=1,uu=.25,Vn=.046875,Yn=.01953125,Qn=.01068115234375,lu=.75,cu=.46875,fu=.013020833333333334,du=.007120768229166667,yu=.3645833333333333,vu=.005696614583333333,gu=.3076171875;function Ci(t){var e=[];e[0]=hu-t*(uu+t*(Vn+t*(Yn+t*Qn))),e[1]=t*(lu-t*(Vn+t*(Yn+t*Qn)));var r=t*t;return e[2]=r*(cu-t*(fu+t*du)),r*=t,e[3]=r*(yu-t*vu),e[4]=r*t*gu,e}function Oe(t,e,r,a){return r*=e,e*=e,a[0]*t-r*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var _u=20;function Pi(t,e,r){for(var a=1/(1-e),n=t,i=_u;i;--i){var o=Math.sin(n),s=1-e*o*o;if(s=(Oe(n,o,Math.cos(n),r)-t)*(s*Math.sqrt(s))*a,n-=s,Math.abs(s)<D)return n}return n}function mu(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Ci(this.es),this.ml0=Oe(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Mu(t){var e=t.x,r=t.y,a=z(e-this.long0),n,i,o,s=Math.sin(r),h=Math.cos(r);if(this.es){var d=h*a,f=Math.pow(d,2),v=this.ep2*Math.pow(h,2),y=Math.pow(v,2),_=Math.abs(h)>D?Math.tan(r):0,m=Math.pow(_,2),M=Math.pow(m,2);n=1-this.es*Math.pow(s,2),d=d/Math.sqrt(n);var P=Oe(r,s,h,this.en);i=this.a*(this.k0*d*(1+f/6*(1-m+v+f/20*(5-18*m+M+14*v-58*m*v+f/42*(61+179*M-M*m-479*m)))))+this.x0,o=this.a*(this.k0*(P-this.ml0+s*a*d/2*(1+f/12*(5-m+9*v+4*y+f/30*(61+M-58*m+270*v-330*m*v+f/56*(1385+543*M-M*m-3111*m))))))+this.y0}else{var c=h*Math.sin(a);if(Math.abs(Math.abs(c)-1)<D)return 93;if(i=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=h*Math.cos(a)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>D)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=i,t.y=o,t}function pu(t){var e,r,a,n,i=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,r=Pi(e,this.es,this.en),Math.abs(r)<I){var f=Math.sin(r),v=Math.cos(r),y=Math.abs(v)>D?Math.tan(r):0,_=this.ep2*Math.pow(v,2),m=Math.pow(_,2),M=Math.pow(y,2),P=Math.pow(M,2);e=1-this.es*Math.pow(f,2);var b=i*Math.sqrt(e)/this.k0,E=Math.pow(b,2);e=e*y,a=r-e*E/(1-this.es)*.5*(1-E/12*(5+3*M-9*_*M+_-4*m-E/30*(61+90*M-252*_*M+45*P+46*_-E/56*(1385+3633*M+4095*P+1574*P*M)))),n=z(this.long0+b*(1-E/6*(1+2*M+_-E/20*(5+28*M+24*P+8*_*M+6*_-E/42*(61+662*M+1320*P+720*P*M))))/v)}else a=I*yr(o),n=0;else{var s=Math.exp(i/this.k0),h=.5*(s-1/s),c=this.lat0+o/this.k0,d=Math.cos(c);e=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(h,2))),a=Math.asin(e),o<0&&(a=-a),h===0&&d===0?n=0:n=z(Math.atan2(h,d)+this.long0)}return t.x=n,t.y=a,t}var bu=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Lr={init:mu,forward:Mu,inverse:pu,names:bu};function Ea(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Mt(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),a=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(a,2))}function wu(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function xu(t){var e=Math.abs(t);return e=wu(e*(1+e/(Mt(1,e)+1))),t<0?-e:e}function Si(t,e){for(var r=2*Math.cos(2*e),a=t.length-1,n=t[a],i=0,o;--a>=0;)o=-i+r*n+t[a],i=n,n=o;return e+o*Math.sin(2*e)}function Eu(t,e){for(var r=2*Math.cos(e),a=t.length-1,n=t[a],i=0,o;--a>=0;)o=-i+r*n+t[a],i=n,n=o;return Math.sin(e)*o}function Cu(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Ca(t,e,r){for(var a=Math.sin(e),n=Math.cos(e),i=Ea(r),o=Cu(r),s=2*n*o,h=-2*a*i,c=t.length-1,d=t[c],f=0,v=0,y=0,_,m;--c>=0;)_=v,m=f,v=d,f=y,d=-_+s*v-h*f+t[c],y=-m+h*v+s*f;return s=a*o,h=n*i,[s*d-h*y,s*y+h*d]}function Pu(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Lr.init.apply(this),this.forward=Lr.forward,this.inverse=Lr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var a=Si(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Eu(this.gtu,2*a))}function Su(t){var e=z(t.x-this.long0),r=t.y;r=Si(this.cbg,r);var a=Math.sin(r),n=Math.cos(r),i=Math.sin(e),o=Math.cos(e);r=Math.atan2(a,o*n),e=Math.atan2(i*n,Mt(a,n*o)),e=xu(Math.tan(e));var s=Ca(this.gtu,2*r,2*e);r=r+s[0],e=e+s[1];var h,c;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*r+this.Zb)+this.y0):(h=1/0,c=1/0),t.x=h,t.y=c,t}function Tu(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var a,n;if(Math.abs(e)<=2.623395162778){var i=Ca(this.utg,2*r,2*e);r=r+i[0],e=e+i[1],e=Math.atan(Ea(e));var o=Math.sin(r),s=Math.cos(r),h=Math.sin(e),c=Math.cos(e);r=Math.atan2(o*c,Mt(h,c*s)),e=Math.atan2(h,c*s),a=z(e+this.long0),n=Si(this.cgb,r)}else a=1/0,n=1/0;return t.x=a,t.y=n,t}var Au=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],Fr={init:Pu,forward:Su,inverse:Tu,names:Au};function Ou(t,e){if(t===void 0){if(t=Math.floor((z(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Iu="etmerc";function Ru(){var t=Ou(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*ht,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Fr.init.apply(this),this.forward=Fr.forward,this.inverse=Fr.inverse}var Nu=["Universal Transverse Mercator System","utm"],Lu={init:Ru,names:Nu,dependsOn:Iu};function Ti(t,e){return Math.pow((1-t)/(1+t),e)}var Fu=20;function Du(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+J)/(Math.pow(Math.tan(.5*this.lat0+J),this.C)*Ti(this.e*t,this.ratexp))}function zu(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+J),this.C)*Ti(this.e*Math.sin(r),this.ratexp))-I,t.x=this.C*e,t}function Uu(t){for(var e=1e-14,r=t.x/this.C,a=t.y,n=Math.pow(Math.tan(.5*a+J)/this.K,1/this.C),i=Fu;i>0&&(a=2*Math.atan(n*Ti(this.e*Math.sin(t.y),-.5*this.e))-I,!(Math.abs(a-t.y)<e));--i)t.y=a;return i?(t.x=r,t.y=a,t):null}var Ai={init:Du,forward:zu,inverse:Uu};function Bu(){Ai.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function $u(t){var e,r,a,n;return t.x=z(t.x-this.long0),Ai.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*a),t.x=n*r*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*r*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function ku(t){var e,r,a,n,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=Mt(t.x,t.y)){var o=2*Math.atan2(i,this.R2);e=Math.sin(o),r=Math.cos(o),n=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),a=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else n=this.phic0,a=0;return t.x=a,t.y=n,Ai.inverse.apply(this,[t]),t.x=z(t.x+this.long0),t}var qu=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],ju={init:Bu,forward:$u,inverse:ku,names:qu};function Gu(t,e,r){return e*=r,Math.tan(.5*(I+t))*Math.pow((1-e)/(1+e),.5*r)}function Hu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&(this.k0=.5*(1+yr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=D&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=D&&Math.abs(Math.cos(this.lat_ts))>D&&(this.k0=.5*this.cons*$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Nt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=$t(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-I,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wu(t){var e=t.x,r=t.y,a=Math.sin(r),n=Math.cos(r),i,o,s,h,c,d,f=z(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=D&&Math.abs(r+this.lat0)<=D?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*a+this.coslat0*n*Math.cos(f)),t.x=this.a*i*n*Math.sin(f)+this.x0,t.y=this.a*i*(this.coslat0*a-this.sinlat0*n*Math.cos(f))+this.y0,t):(o=2*Math.atan(this.ssfn_(r,a,this.e))-I,h=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=D?(c=Nt(this.e,r*this.con,this.con*a),d=2*this.a*this.k0*c/this.cons,t.x=this.x0+d*Math.sin(e-this.long0),t.y=this.y0-this.con*d*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<D?(i=2*this.a*this.k0/(1+h*Math.cos(f)),t.y=i*s):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*h*Math.cos(f))),t.y=i*(this.cosX0*s-this.sinX0*h*Math.cos(f))+this.y0),t.x=i*h*Math.sin(f)+this.x0,t))}function Vu(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,n,i,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,r=this.lat0,o<=D?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<D?this.lat0>0?e=z(this.long0+Math.atan2(t.x,-1*t.y)):e=z(this.long0+Math.atan2(t.x,t.y)):e=z(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=D){if(o<=D)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,a=o*this.cons/(2*this.a*this.k0),r=this.con*fr(this.e,a),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=D?i=this.X0:(i=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/o),e=z(this.long0+Math.atan2(t.x*Math.sin(n),o*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),r=-1*fr(this.e,Math.tan(.5*(I+i)));return t.x=e,t.y=r,t}var Yu=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],Qu={init:Hu,forward:Wu,inverse:Vu,names:Yu,ssfn_:Gu};function Xu(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,a=this.rf,n=1/a,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*h+this.alpha*o/2*c}function Ju(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+r)+this.K,n=2*(Math.atan(Math.exp(a))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t}function Ku(t){for(var e=t.x-this.x0,r=t.y-this.y0,a=e/this.R,n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(a)),o=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(n))),s=this.lambda0+o/this.alpha,h=0,c=i,d=-1e3,f=0;Math.abs(c-d)>1e-7;){if(++f>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),d=c,c=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=s,t.y=c,t}var Zu=["somerc"],tl={init:Xu,forward:Ju,inverse:Ku,names:Zu},be=1e-7;function el(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function rl(){var t,e,r,a,n,i,o,s,h,c,d=0,f,v=0,y=0,_=0,m=0,M=0,P=0;this.no_off=el(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var E=!1;if("rectified_grid_angle"in this&&(E=!0),b&&(P=this.alpha),E&&(d=this.rectified_grid_angle*ht),b||E)v=this.longc;else if(y=this.long1,m=this.lat1,_=this.long2,M=this.lat2,Math.abs(m-M)<=be||(t=Math.abs(m))<=be||Math.abs(t-I)<=be||Math.abs(Math.abs(this.lat0)-I)<=be||Math.abs(Math.abs(M)-I)<=be)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>D?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/t,a=this.B*e/(r*Math.sqrt(t)),n=a*a-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=a,this.E*=Math.pow(Nt(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=n=1),b||E?(b?(f=Math.asin(Math.sin(P)/a),E||(d=P)):(f=d,P=Math.asin(a*Math.sin(f))),this.lam0=v-Math.asin(.5*(n-1/n)*Math.tan(f))/this.B):(i=Math.pow(Nt(this.e,m,Math.sin(m)),this.B),o=Math.pow(Nt(this.e,M,Math.sin(M)),this.B),n=this.E/i,h=(o-i)/(o+i),c=this.E*this.E,c=(c-o*i)/(c+o*i),t=y-_,t<-Math.pi?_-=lr:t>Math.pi&&(_+=lr),this.lam0=z(.5*(y+_)-Math.atan(c*Math.tan(.5*this.B*(y-_))/h)/this.B),f=Math.atan(2*Math.sin(this.B*z(y-this.lam0))/(n-1/n)),d=P=Math.asin(a*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(P))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(J-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(J+n))}function il(t){var e={},r,a,n,i,o,s,h,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-I)>D){if(o=this.E/Math.pow(Nt(this.e,t.y,Math.sin(t.y)),this.B),s=1/o,r=.5*(o-s),a=.5*(o+s),i=Math.sin(this.B*t.x),n=(r*this.singam-i*this.cosgam)/a,Math.abs(Math.abs(n)-1)<D)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),s=Math.cos(this.B*t.x),Math.abs(s)<be?h=this.A*t.x:h=this.ArB*Math.atan2(r*this.cosgam+i*this.singam,s)}else c=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(e.x=h,e.y=c):(h-=this.u_0,e.x=c*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function nl(t){var e,r,a,n,i,o,s,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*r),n=.5*(a-1/a),i=.5*(a+1/a),o=Math.sin(this.BrA*e),s=(o*this.cosgam+n*this.singam)/i,Math.abs(Math.abs(s)-1)<D)h.x=0,h.y=s<0?-I:I;else{if(h.y=this.E/Math.sqrt((1+s)/(1-s)),h.y=fr(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(n*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var al=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],sl={init:rl,forward:il,inverse:nl,names:al};function ol(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<D)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),a=$t(this.e,e,r),n=Nt(this.e,this.lat1,e),i=Math.sin(this.lat2),o=Math.cos(this.lat2),s=$t(this.e,i,o),h=Nt(this.e,this.lat2,i),c=Nt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>D?this.ns=Math.log(a/s)/Math.log(n/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function hl(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=D&&(r=yr(r)*(I-2*D));var a=Math.abs(Math.abs(r)-I),n,i;if(a>D)n=Nt(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if(a=r*this.ns,a<=0)return null;i=0}var o=this.ns*z(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t}function ul(t){var e,r,a,n,i,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),r=1):(e=-Math.sqrt(o*o+s*s),r=-1);var h=0;if(e!==0&&(h=Math.atan2(r*o,r*s)),e!==0||this.ns>0){if(r=1/this.ns,a=Math.pow(e/(this.a*this.f0),r),n=fr(this.e,a),n===-9999)return null}else n=-I;return i=z(h/this.ns+this.long0),t.x=i,t.y=n,t}var ll=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],cl={init:ol,forward:hl,inverse:ul,names:ll};function fl(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function dl(t){var e,r,a,n,i,o,s,h=t.x,c=t.y,d=z(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),a=-d*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(a)),i=Math.asin(Math.cos(r)*Math.sin(a)/Math.cos(n)),o=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function yl(t){var e,r,a,n,i,o,s,h,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x),n=i/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(n)),r=Math.asin(Math.cos(a)*Math.sin(n)/Math.cos(e)),t.x=this.long0-r/this.alfa,s=e,h=0;var d=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(h=1),s=t.y,d+=1;while(h===0&&d<15);return d>=15?null:t}var vl=["Krovak","krovak"],gl={init:fl,forward:dl,inverse:yl,names:vl};function vt(t,e,r,a,n){return t*n-e*Math.sin(2*n)+r*Math.sin(4*n)-a*Math.sin(6*n)}function vr(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function gr(t){return .375*t*(1+.25*t*(1+.46875*t))}function _r(t){return .05859375*t*t*(1+.75*t)}function mr(t){return t*t*t*(35/3072)}function Ae(t,e,r){var a=e*r;return t/Math.sqrt(1-a*a)}function ee(t){return Math.abs(t)<I?t:t-yr(t)*Math.PI}function $r(t,e,r,a,n){var i,o;i=t/e;for(var s=0;s<15;s++)if(o=(t-(e*i-r*Math.sin(2*i)+a*Math.sin(4*i)-n*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*a*Math.cos(4*i)-6*n*Math.cos(6*i)),i+=o,Math.abs(o)<=1e-10)return i;return NaN}function _l(){this.sphere||(this.e0=vr(this.es),this.e1=gr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.ml0=this.a*vt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ml(t){var e,r,a=t.x,n=t.y;if(a=z(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(a)),r=this.a*(Math.atan2(Math.tan(n),Math.cos(a))-this.lat0);else{var i=Math.sin(n),o=Math.cos(n),s=Ae(this.a,this.e,i),h=Math.tan(n)*Math.tan(n),c=a*Math.cos(n),d=c*c,f=this.es*o*o/(1-this.es),v=this.a*vt(this.e0,this.e1,this.e2,this.e3,n);e=s*c*(1-d*h*(1/6-(8-h+8*f)*d/120)),r=v-this.ml0+s*i/o*d*(.5+(5-h+6*f)*d/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function Ml(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,n;if(this.sphere){var i=r+this.lat0;a=Math.asin(Math.sin(i)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(i))}else{var o=this.ml0/this.a+r,s=$r(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-I)<=D)return t.x=this.long0,t.y=I,r<0&&(t.y*=-1),t;var h=Ae(this.a,this.e,Math.sin(s)),c=h*h*h/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(s),2),f=e*this.a/h,v=f*f;a=s-h*Math.tan(s)/c*f*f*(.5-(1+3*d)*f*f/24),n=f*(1-v*(d/3+(1+3*d)*d*v/15))/Math.cos(s)}return t.x=z(n+this.long0),t.y=ee(a),t}var pl=["Cassini","Cassini_Soldner","cass"],bl={init:_l,forward:ml,inverse:Ml,names:pl};function Kt(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var wl=1,xl=2,El=3,Cl=4;function Pl(){var t=Math.abs(this.lat0);if(Math.abs(t-I)<D?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<D?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Kt(this.e,1),this.mmf=.5/(1-this.es),this.apa=Fl(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Kt(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Sl(t){var e,r,a,n,i,o,s,h,c,d,f=t.x,v=t.y;if(f=z(f-this.long0),this.sphere){if(i=Math.sin(v),d=Math.cos(v),a=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+d*a:1+this.sinph0*i+this.cosph0*d*a,r<=D)return null;r=Math.sqrt(2/r),e=r*d*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(v+this.lat0)<D)return null;r=J-v*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(f),r*=a}}else{switch(s=0,h=0,c=0,a=Math.cos(f),n=Math.sin(f),i=Math.sin(v),o=Kt(this.e,i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,h=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*h*a;break;case this.EQUIT:c=1+h*a;break;case this.N_POLE:c=I+v,o=this.qp-o;break;case this.S_POLE:c=v-I,o=this.qp+o;break}if(Math.abs(c)<D)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?r=this.ymf*c*(this.cosb1*s-this.sinb1*h*a):r=(c=Math.sqrt(2/(1+h*a)))*s*this.ymf,e=this.xmf*c*h*n;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*n,r=a*(this.mode===this.S_POLE?c:-c)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function Tl(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,a,n,i,o,s,h,c;if(this.sphere){var d=0,f,v=0;if(f=Math.sqrt(e*e+r*r),n=f*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=D?0:Math.asin(r*v/f),e*=v,r=d*f;break;case this.OBLIQ:n=Math.abs(f)<=D?this.lat0:Math.asin(d*this.sinph0+r*v*this.cosph0/f),e*=v*this.cosph0,r=(d-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:r=-r,n=I-n;break;case this.S_POLE:n-=I;break}a=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,h=Math.sqrt(e*e+r*r),h<D)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*h/this.rq),i=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=i*this.sinb1+r*o*this.cosb1/h,s=this.qp*c,r=h*this.cosb1*i-r*this.sinb1*o):(c=r*o/h,s=this.qp*c,r=h*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),s=e*e+r*r,!s)return t.x=this.long0,t.y=this.lat0,t;c=1-s/this.qp,this.mode===this.S_POLE&&(c=-c)}a=Math.atan2(e,r),n=Dl(Math.asin(c),this.apa)}return t.x=z(this.long0+a),t.y=n,t}var Al=.3333333333333333,Ol=.17222222222222222,Il=.10257936507936508,Rl=.06388888888888888,Nl=.0664021164021164,Ll=.016415012942191543;function Fl(t){var e,r=[];return r[0]=t*Al,e=t*t,r[0]+=e*Ol,r[1]=e*Rl,e*=t,r[0]+=e*Il,r[1]+=e*Nl,r[2]=e*Ll,r}function Dl(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var zl=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Ul={init:Pl,forward:Sl,inverse:Tl,names:zl,S_POLE:wl,N_POLE:xl,EQUIT:El,OBLIQ:Cl};function te(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Bl(){Math.abs(this.lat1+this.lat2)<D||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=$t(this.e3,this.sin_po,this.cos_po),this.qs1=Kt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=$t(this.e3,this.sin_po,this.cos_po),this.qs2=Kt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Kt(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>D?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function $l(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var a=Kt(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,i=this.ns0*z(e-this.long0),o=n*Math.sin(i)+this.x0,s=this.rh-n*Math.cos(i)+this.y0;return t.x=o,t.y=s,t}function kl(t){var e,r,a,n,i,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),n=0,e!==0&&(n=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(r=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,r)),i=z(n/this.ns0+this.long0),t.x=i,t.y=o,t}function ql(t,e){var r,a,n,i,o,s=te(.5*e);if(t<D)return s;for(var h=t*t,c=1;c<=25;c++)if(r=Math.sin(s),a=Math.cos(s),n=t*r,i=1-n*n,o=.5*i*i/a*(e/(1-h)-r/i+.5/t*Math.log((1-n)/(1+n))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var jl=["Albers_Conic_Equal_Area","Albers","aea"],Gl={init:Bl,forward:$l,inverse:kl,names:jl,phi1z:ql};function Hl(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Wl(t){var e,r,a,n,i,o,s,h,c=t.x,d=t.y;return a=z(c-this.long0),e=Math.sin(d),r=Math.cos(d),n=Math.cos(a),o=this.sin_p14*e+this.cos_p14*r*n,i=1,o>0||Math.abs(o)<=D?(s=this.x0+this.a*i*r*Math.sin(a)/o,h=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*n)/o):(s=this.x0+this.infinity_dist*r*Math.sin(a),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*n)),t.x=s,t.y=h,t}function Vl(t){var e,r,a,n,i,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),r=Math.sin(n),a=Math.cos(n),o=te(a*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*a-t.y*this.sin_p14*r),i=z(this.long0+i)):(o=this.phic0,i=0),t.x=i,t.y=o,t}var Yl=["gnom"],Ql={init:Hl,forward:Wl,inverse:Vl,names:Yl};function Xl(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*I:I;for(var a=Math.asin(.5*e),n,i,o,s,h=0;h<30;h++)if(i=Math.sin(a),o=Math.cos(a),s=t*i,n=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),a+=n,Math.abs(n)<=1e-10)return a;return NaN}function Jl(){this.sphere||(this.k0=$t(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Kl(t){var e=t.x,r=t.y,a,n,i=z(e-this.long0);if(this.sphere)a=this.x0+this.a*i*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Kt(this.e,Math.sin(r));a=this.x0+this.a*this.k0*i,n=this.y0+this.a*o*.5/this.k0}return t.x=a,t.y=n,t}function Zl(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=Xl(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var tc=["cea"],ec={init:Jl,forward:Kl,inverse:Zl,names:tc};function rc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function ic(t){var e=t.x,r=t.y,a=z(e-this.long0),n=ee(r-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*n,t}function nc(t){var e=t.x,r=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ee(this.lat0+(r-this.y0)/this.a),t}var ac=["Equirectangular","Equidistant_Cylindrical","eqc"],sc={init:rc,forward:ic,inverse:nc,names:ac},Xn=20;function oc(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vr(this.es),this.e1=gr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.ml0=this.a*vt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function hc(t){var e=t.x,r=t.y,a,n,i,o=z(e-this.long0);if(i=o*Math.sin(r),this.sphere)Math.abs(r)<=D?(a=this.a*o,n=-1*this.a*this.lat0):(a=this.a*Math.sin(i)/Math.tan(r),n=this.a*(ee(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=D)a=this.a*o,n=-1*this.ml0;else{var s=Ae(this.a,this.e,Math.sin(r))/Math.tan(r);a=s*Math.sin(i),n=this.a*vt(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+s*(1-Math.cos(i))}return t.x=a+this.x0,t.y=n+this.y0,t}function uc(t){var e,r,a,n,i,o,s,h,c;if(a=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=D)e=z(a/this.a+this.long0),r=0;else{o=this.lat0+n/this.a,s=a*a/this.a/this.a+o*o,h=o;var d;for(i=Xn;i;--i)if(d=Math.tan(h),c=-1*(o*(h*d+1)-h-.5*(h*h+s)*d)/((h-o)/d-1),h+=c,Math.abs(c)<=D){r=h;break}e=z(this.long0+Math.asin(a*Math.tan(h)/this.a)/Math.sin(r))}else if(Math.abs(n+this.ml0)<=D)r=0,e=z(this.long0+a/this.a);else{o=(this.ml0+n)/this.a,s=a*a/this.a/this.a+o*o,h=o;var f,v,y,_,m;for(i=Xn;i;--i)if(m=this.e*Math.sin(h),f=Math.sqrt(1-m*m)*Math.tan(h),v=this.a*vt(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),_=v/this.a,c=(o*(f*_+1)-_-.5*f*(_*_+s))/(this.es*Math.sin(2*h)*(_*_+s-2*o*_)/(4*f)+(o-_)*(f*y-2/Math.sin(2*h))-y),h-=c,Math.abs(c)<=D){r=h;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=z(this.long0+Math.asin(a*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var lc=["Polyconic","poly"],cc={init:oc,forward:hc,inverse:uc,names:lc};function fc(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function dc(t){var e,r=t.x,a=t.y,n=a-this.lat0,i=r-this.long0,o=n/ar*1e-5,s=i,h=1,c=0;for(e=1;e<=10;e++)h=h*o,c=c+this.A[e]*h;var d=c,f=s,v=1,y=0,_,m,M=0,P=0;for(e=1;e<=6;e++)_=v*d-y*f,m=y*d+v*f,v=_,y=m,M=M+this.B_re[e]*v-this.B_im[e]*y,P=P+this.B_im[e]*v+this.B_re[e]*y;return t.x=P*this.a+this.x0,t.y=M*this.a+this.y0,t}function yc(t){var e,r=t.x,a=t.y,n=r-this.x0,i=a-this.y0,o=i/this.a,s=n/this.a,h=1,c=0,d,f,v=0,y=0;for(e=1;e<=6;e++)d=h*o-c*s,f=c*o+h*s,h=d,c=f,v=v+this.C_re[e]*h-this.C_im[e]*c,y=y+this.C_im[e]*h+this.C_re[e]*c;for(var _=0;_<this.iterations;_++){var m=v,M=y,P,b,E=o,N=s;for(e=2;e<=6;e++)P=m*v-M*y,b=M*v+m*y,m=P,M=b,E=E+(e-1)*(this.B_re[e]*m-this.B_im[e]*M),N=N+(e-1)*(this.B_im[e]*m+this.B_re[e]*M);m=1,M=0;var T=this.B_re[1],B=this.B_im[1];for(e=2;e<=6;e++)P=m*v-M*y,b=M*v+m*y,m=P,M=b,T=T+e*(this.B_re[e]*m-this.B_im[e]*M),B=B+e*(this.B_im[e]*m+this.B_re[e]*M);var Q=T*T+B*B;v=(E*T+N*B)/Q,y=(N*T-E*B)/Q}var L=v,tt=y,lt=1,gt=0;for(e=1;e<=9;e++)lt=lt*L,gt=gt+this.D[e]*lt;var nt=this.lat0+gt*ar*1e5,Ie=this.long0+tt;return t.x=Ie,t.y=nt,t}var vc=["New_Zealand_Map_Grid","nzmg"],gc={init:fc,forward:dc,inverse:yc,names:vc};function _c(){}function mc(t){var e=t.x,r=t.y,a=z(e-this.long0),n=this.x0+this.a*a,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=n,t.y=i,t}function Mc(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var pc=["Miller_Cylindrical","mill"],bc={init:_c,forward:mc,inverse:Mc,names:pc},wc=20;function xc(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ci(this.es)}function Ec(t){var e,r,a=t.x,n=t.y;if(a=z(a-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var i=this.n*Math.sin(n),o=wc;o;--o){var s=(this.m*n+Math.sin(n)-i)/(this.m+Math.cos(n));if(n-=s,Math.abs(s)<D)break}e=this.a*this.C_x*a*(this.m+Math.cos(n)),r=this.a*this.C_y*n}else{var h=Math.sin(n),c=Math.cos(n);r=this.a*Oe(n,h,c,this.en),e=this.a*a*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=r,t}function Cc(t){var e,r,a,n;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=te((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=te(Math.sin(e)/this.n)),a=z(a+this.long0),e=ee(e)):(e=Pi(t.y/this.a,this.es,this.en),n=Math.abs(e),n<I?(n=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),a=z(r)):n-D<I&&(a=this.long0)),t.x=a,t.y=e,t}var Pc=["Sinusoidal","sinu"],Sc={init:xc,forward:Ec,inverse:Cc,names:Pc};function Tc(){}function Ac(t){for(var e=t.x,r=t.y,a=z(e-this.long0),n=r,i=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-i)/(1+Math.cos(n));if(n+=o,Math.abs(o)<D)break}n/=2,Math.PI/2-Math.abs(r)<D&&(a=0);var s=.900316316158*this.a*a*Math.cos(n)+this.x0,h=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=s,t.y=h,t}function Oc(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var a=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var n=Math.asin(r);return t.x=a,t.y=n,t}var Ic=["Mollweide","moll"],Rc={init:Tc,forward:Ac,inverse:Oc,names:Ic};function Nc(){Math.abs(this.lat1+this.lat2)<D||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vr(this.es),this.e1=gr(this.es),this.e2=_r(this.es),this.e3=mr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=$t(this.e,this.sinphi,this.cosphi),this.ml1=vt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<D?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=$t(this.e,this.sinphi,this.cosphi),this.ml2=vt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=vt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Lc(t){var e=t.x,r=t.y,a;if(this.sphere)a=this.a*(this.g-r);else{var n=vt(this.e0,this.e1,this.e2,this.e3,r);a=this.a*(this.g-n)}var i=this.ns*z(e-this.long0),o=this.x0+a*Math.sin(i),s=this.y0+this.rh-a*Math.cos(i);return t.x=o,t.y=s,t}function Fc(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,a,n;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;if(r!==0&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere)return n=z(this.long0+i/this.ns),a=ee(this.g-r/this.a),t.x=n,t.y=a,t;var o=this.g-r/this.a;return a=$r(o,this.e0,this.e1,this.e2,this.e3),n=z(this.long0+i/this.ns),t.x=n,t.y=a,t}var Dc=["Equidistant_Conic","eqdc"],zc={init:Nc,forward:Lc,inverse:Fc,names:Dc};function Uc(){this.R=this.a}function Bc(t){var e=t.x,r=t.y,a=z(e-this.long0),n,i;Math.abs(r)<=D&&(n=this.x0+this.R*a,i=this.y0);var o=te(2*Math.abs(r/Math.PI));(Math.abs(a)<=D||Math.abs(Math.abs(r)-I)<=D)&&(n=this.x0,r>=0?i=this.y0+Math.PI*this.R*Math.tan(.5*o):i=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),h=s*s,c=Math.sin(o),d=Math.cos(o),f=d/(c+d-1),v=f*f,y=f*(2/c-1),_=y*y,m=Math.PI*this.R*(s*(f-_)+Math.sqrt(h*(f-_)*(f-_)-(_+h)*(v-_)))/(_+h);a<0&&(m=-m),n=this.x0+m;var M=h+f;return m=Math.PI*this.R*(y*M-s*Math.sqrt((_+h)*(h+1)-M*M))/(_+h),r>=0?i=this.y0+m:i=this.y0-m,t.x=n,t.y=i,t}function $c(t){var e,r,a,n,i,o,s,h,c,d,f,v,y;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,a=t.x/f,n=t.y/f,i=a*a+n*n,o=-Math.abs(n)*(1+i),s=o-2*n*n+a*a,h=-2*o+1+2*n*n+i*i,y=n*n/h+(2*s*s*s/h/h/h-9*o*s/h/h)/27,c=(o-s*s/3/h)/h,d=2*Math.sqrt(-c/3),f=3*y/c/d,Math.abs(f)>1&&(f>=0?f=1:f=-1),v=Math.acos(f)/3,t.y>=0?r=(-d*Math.cos(v+Math.PI/3)-s/3/h)*Math.PI:r=-(-d*Math.cos(v+Math.PI/3)-s/3/h)*Math.PI,Math.abs(a)<D?e=this.long0:e=z(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(a*a-n*n)+i*i))/2/a),t.x=e,t.y=r,t}var kc=["Van_der_Grinten_I","VanDerGrinten","vandg"],qc={init:Uc,forward:Bc,inverse:$c,names:kc};function jc(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Gc(t){var e=t.x,r=t.y,a=Math.sin(t.y),n=Math.cos(t.y),i=z(e-this.long0),o,s,h,c,d,f,v,y,_,m,M,P,b,E,N,T,B,Q,L,tt,lt,gt,nt;return this.sphere?Math.abs(this.sin_p12-1)<=D?(t.x=this.x0+this.a*(I-r)*Math.sin(i),t.y=this.y0-this.a*(I-r)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=D?(t.x=this.x0+this.a*(I+r)*Math.sin(i),t.y=this.y0+this.a*(I+r)*Math.cos(i),t):(Q=this.sin_p12*a+this.cos_p12*n*Math.cos(i),T=Math.acos(Q),B=T?T/Math.sin(T):1,t.x=this.x0+this.a*B*n*Math.sin(i),t.y=this.y0+this.a*B*(this.cos_p12*a-this.sin_p12*n*Math.cos(i)),t):(o=vr(this.es),s=gr(this.es),h=_r(this.es),c=mr(this.es),Math.abs(this.sin_p12-1)<=D?(d=this.a*vt(o,s,h,c,I),f=this.a*vt(o,s,h,c,r),t.x=this.x0+(d-f)*Math.sin(i),t.y=this.y0-(d-f)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=D?(d=this.a*vt(o,s,h,c,I),f=this.a*vt(o,s,h,c,r),t.x=this.x0+(d+f)*Math.sin(i),t.y=this.y0+(d+f)*Math.cos(i),t):(v=a/n,y=Ae(this.a,this.e,this.sin_p12),_=Ae(this.a,this.e,a),m=Math.atan((1-this.es)*v+this.es*y*this.sin_p12/(_*n)),M=Math.atan2(Math.sin(i),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(i)),M===0?L=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(M)-Math.PI)<=D?L=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):L=Math.asin(Math.sin(i)*Math.cos(m)/Math.sin(M)),P=this.e*this.sin_p12/Math.sqrt(1-this.es),b=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),E=P*b,N=b*b,tt=L*L,lt=tt*L,gt=lt*L,nt=gt*L,T=y*L*(1-tt*N*(1-N)/6+lt/8*E*(1-2*N)+gt/120*(N*(4-7*N)-3*P*P*(1-7*N))-nt/48*E),t.x=this.x0+T*Math.sin(M),t.y=this.y0+T*Math.cos(M),t))}function Hc(t){t.x-=this.x0,t.y-=this.y0;var e,r,a,n,i,o,s,h,c,d,f,v,y,_,m,M,P,b,E,N,T,B,Q,L;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*I*this.a?void 0:(r=e/this.a,a=Math.sin(r),n=Math.cos(r),i=this.long0,Math.abs(e)<=D?o=this.lat0:(o=te(n*this.sin_p12+t.y*a*this.cos_p12/e),s=Math.abs(this.lat0)-I,Math.abs(s)<=D?this.lat0>=0?i=z(this.long0+Math.atan2(t.x,-t.y)):i=z(this.long0-Math.atan2(-t.x,t.y)):i=z(this.long0+Math.atan2(t.x*a,e*this.cos_p12*n-t.y*this.sin_p12*a))),t.x=i,t.y=o,t)):(h=vr(this.es),c=gr(this.es),d=_r(this.es),f=mr(this.es),Math.abs(this.sin_p12-1)<=D?(v=this.a*vt(h,c,d,f,I),e=Math.sqrt(t.x*t.x+t.y*t.y),y=v-e,o=$r(y/this.a,h,c,d,f),i=z(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=o,t):Math.abs(this.sin_p12+1)<=D?(v=this.a*vt(h,c,d,f,I),e=Math.sqrt(t.x*t.x+t.y*t.y),y=e-v,o=$r(y/this.a,h,c,d,f),i=z(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),M=Math.atan2(t.x,t.y),_=Ae(this.a,this.e,this.sin_p12),P=Math.cos(M),b=this.e*this.cos_p12*P,E=-b*b/(1-this.es),N=3*this.es*(1-E)*this.sin_p12*this.cos_p12*P/(1-this.es),T=e/_,B=T-E*(1+E)*Math.pow(T,3)/6-N*(1+3*E)*Math.pow(T,4)/24,Q=1-E*B*B/2-T*B*B*B/6,m=Math.asin(this.sin_p12*Math.cos(B)+this.cos_p12*Math.sin(B)*P),i=z(this.long0+Math.asin(Math.sin(M)*Math.sin(B)/Math.cos(m))),L=Math.sin(m),o=Math.atan2((L-this.es*Q*this.sin_p12)*Math.tan(m),L*(1-this.es)),t.x=i,t.y=o,t))}var Wc=["Azimuthal_Equidistant","aeqd"],Vc={init:jc,forward:Gc,inverse:Hc,names:Wc};function Yc(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Qc(t){var e,r,a,n,i,o,s,h,c=t.x,d=t.y;return a=z(c-this.long0),e=Math.sin(d),r=Math.cos(d),n=Math.cos(a),o=this.sin_p14*e+this.cos_p14*r*n,i=1,(o>0||Math.abs(o)<=D)&&(s=this.a*i*r*Math.sin(a),h=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*n)),t.x=s,t.y=h,t}function Xc(t){var e,r,a,n,i,o,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=te(e/this.a),a=Math.sin(r),n=Math.cos(r),o=this.long0,Math.abs(e)<=D?(s=this.lat0,t.x=o,t.y=s,t):(s=te(n*this.sin_p14+t.y*a*this.cos_p14/e),i=Math.abs(this.lat0)-I,Math.abs(i)<=D?(this.lat0>=0?o=z(this.long0+Math.atan2(t.x,-t.y)):o=z(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=z(this.long0+Math.atan2(t.x*a,e*this.cos_p14*n-t.y*this.sin_p14*a)),t.x=o,t.y=s,t))}var Jc=["ortho"],Kc={init:Yc,forward:Qc,inverse:Xc,names:Jc},et={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},K={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Zc(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=I-J/2?this.face=et.TOP:this.lat0<=-(I-J/2)?this.face=et.BOTTOM:Math.abs(this.long0)<=J?this.face=et.FRONT:Math.abs(this.long0)<=I+J?this.face=this.long0>0?et.RIGHT:et.LEFT:this.face=et.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function tf(t){var e={x:0,y:0},r,a,n,i,o,s,h={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,a=t.x,this.face===et.TOP)i=I-r,a>=J&&a<=I+J?(h.value=K.AREA_0,n=a-I):a>I+J||a<=-(I+J)?(h.value=K.AREA_1,n=a>0?a-ut:a+ut):a>-(I+J)&&a<=-J?(h.value=K.AREA_2,n=a+I):(h.value=K.AREA_3,n=a);else if(this.face===et.BOTTOM)i=I+r,a>=J&&a<=I+J?(h.value=K.AREA_0,n=-a+I):a<J&&a>=-J?(h.value=K.AREA_1,n=-a):a<-J&&a>=-(I+J)?(h.value=K.AREA_2,n=-a-I):(h.value=K.AREA_3,n=a>0?-a+ut:-a-ut);else{var c,d,f,v,y,_,m;this.face===et.RIGHT?a=Se(a,+I):this.face===et.BACK?a=Se(a,3.14159265359):this.face===et.LEFT&&(a=Se(a,-I)),v=Math.sin(r),y=Math.cos(r),_=Math.sin(a),m=Math.cos(a),c=y*m,d=y*_,f=v,this.face===et.FRONT?(i=Math.acos(c),n=Ir(i,f,d,h)):this.face===et.RIGHT?(i=Math.acos(d),n=Ir(i,f,-c,h)):this.face===et.BACK?(i=Math.acos(-c),n=Ir(i,f,-d,h)):this.face===et.LEFT?(i=Math.acos(-d),n=Ir(i,f,c,h)):(i=n=0,h.value=K.AREA_0)}return s=Math.atan(12/ut*(n+Math.acos(Math.sin(n)*Math.cos(J))-I)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n))))),h.value===K.AREA_1?s+=I:h.value===K.AREA_2?s+=ut:h.value===K.AREA_3&&(s+=1.5*ut),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function ef(t){var e={lam:0,phi:0},r,a,n,i,o,s,h,c,d,f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=K.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=K.AREA_1,r-=I):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=K.AREA_2,r=r<0?r+ut:r-ut):(f.value=K.AREA_3,r+=I),d=ut/12*Math.tan(r),o=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),s=Math.atan(o),n=Math.cos(r),i=Math.tan(a),h=1-n*n*i*i*(1-Math.cos(Math.atan(1/Math.cos(s)))),h<-1?h=-1:h>1&&(h=1),this.face===et.TOP)c=Math.acos(h),e.phi=I-c,f.value===K.AREA_0?e.lam=s+I:f.value===K.AREA_1?e.lam=s<0?s+ut:s-ut:f.value===K.AREA_2?e.lam=s-I:e.lam=s;else if(this.face===et.BOTTOM)c=Math.acos(h),e.phi=c-I,f.value===K.AREA_0?e.lam=-s+I:f.value===K.AREA_1?e.lam=-s:f.value===K.AREA_2?e.lam=-s-I:e.lam=s<0?-s-ut:-s+ut;else{var v,y,_;v=h,d=v*v,d>=1?_=0:_=Math.sqrt(1-d)*Math.sin(s),d+=_*_,d>=1?y=0:y=Math.sqrt(1-d),f.value===K.AREA_1?(d=y,y=-_,_=d):f.value===K.AREA_2?(y=-y,_=-_):f.value===K.AREA_3&&(d=y,y=_,_=-d),this.face===et.RIGHT?(d=v,v=-y,y=d):this.face===et.BACK?(v=-v,y=-y):this.face===et.LEFT&&(d=v,v=y,y=-d),e.phi=Math.acos(-_)-I,e.lam=Math.atan2(y,v),this.face===et.RIGHT?e.lam=Se(e.lam,-I):this.face===et.BACK?e.lam=Se(e.lam,-3.14159265359):this.face===et.LEFT&&(e.lam=Se(e.lam,+I))}if(this.es!==0){var m,M,P;m=e.phi<0?1:0,M=Math.tan(e.phi),P=this.b/Math.sqrt(M*M+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-P*P)/(this.one_minus_f*P)),m&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Ir(t,e,r,a){var n;return t<D?(a.value=K.AREA_0,n=0):(n=Math.atan2(e,r),Math.abs(n)<=J?a.value=K.AREA_0:n>J&&n<=I+J?(a.value=K.AREA_1,n-=I):n>I+J||n<=-(I+J)?(a.value=K.AREA_2,n=n>=0?n-ut:n+ut):(a.value=K.AREA_3,n+=I)),n}function Se(t,e){var r=t+e;return r<-3.14159265359?r+=lr:r>3.14159265359&&(r-=lr),r}var rf=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],nf={init:Zc,forward:tf,inverse:ef,names:rf},Mi=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ir=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Pa=.8487,Sa=1.3523,Ta=Ut/5,af=1/Ta,Ce=18,kr=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},sf=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function of(t,e,r,a){for(var n=e;a;--a){var i=t(n);if(n-=i,Math.abs(i)<r)break}return n}function hf(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function uf(t){var e=z(t.x-this.long0),r=Math.abs(t.y),a=Math.floor(r*Ta);a<0?a=0:a>=Ce&&(a=Ce-1),r=Ut*(r-af*a);var n={x:kr(Mi[a],r)*e,y:kr(ir[a],r)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*Pa+this.x0,n.y=n.y*this.a*Sa+this.y0,n}function lf(t){var e={x:(t.x-this.x0)/(this.a*Pa),y:Math.abs(t.y-this.y0)/(this.a*Sa)};if(e.y>=1)e.x/=Mi[Ce][0],e.y=t.y<0?-I:I;else{var r=Math.floor(e.y*Ce);for(r<0?r=0:r>=Ce&&(r=Ce-1);;)if(ir[r][0]>e.y)--r;else if(ir[r+1][0]<=e.y)++r;else break;var a=ir[r],n=5*(e.y-a[0])/(ir[r+1][0]-a[0]);n=of(function(i){return(kr(a,i)-e.y)/sf(a,i)},n,D,100),e.x/=kr(Mi[r],n),e.y=(5*r+n)*ht,t.y<0&&(e.y=-e.y)}return e.x=z(e.x+this.long0),e}var cf=["Robinson","robin"],ff={init:hf,forward:uf,inverse:lf,names:cf};function df(){this.name="geocent"}function yf(t){var e=va(t,this.es,this.a);return e}function vf(t){var e=ga(t,this.es,this.a,this.b);return e}var gf=["Geocentric","geocentric","geocent","Geocent"],_f={init:df,forward:yf,inverse:vf,names:gf},dt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},tr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function mf(){if(Object.keys(tr).forEach((function(r){if(typeof this[r]>"u")this[r]=tr[r].def;else{if(tr[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);tr[r].num&&(this[r]=parseFloat(this[r]))}tr[r].degrees&&(this[r]=this[r]*ht)}).bind(this)),Math.abs(Math.abs(this.lat0)-I)<D?this.mode=this.lat0<0?dt.S_POLE:dt.N_POLE:Math.abs(this.lat0)<D?this.mode=dt.EQUIT:(this.mode=dt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Mf(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),a=Math.cos(t.x),n,i;switch(this.mode){case dt.OBLIQ:i=this.sinph0*e+this.cosph0*r*a;break;case dt.EQUIT:i=r*a;break;case dt.S_POLE:i=-e;break;case dt.N_POLE:i=e;break}switch(i=this.pn1/(this.p-i),n=i*r*Math.sin(t.x),this.mode){case dt.OBLIQ:i*=this.cosph0*e-this.sinph0*r*a;break;case dt.EQUIT:i*=e;break;case dt.N_POLE:i*=-(r*a);break;case dt.S_POLE:i*=r*a;break}var o,s;return o=i*this.cg+n*this.sg,s=1/(o*this.sw*this.h1+this.cw),n=(n*this.cg-i*this.sg)*this.cw*s,i=o*s,t.x=n*this.a,t.y=i*this.a,t}function pf(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,a,n;n=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*n,a=this.pn1*t.y*this.cw*n,t.x=r*this.cg+a*this.sg,t.y=a*this.cg-r*this.sg;var i=Mt(t.x,t.y);if(Math.abs(i)<D)e.x=0,e.y=t.y;else{var o,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),o=Math.sqrt(1-s*s),this.mode){case dt.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/i),t.y=(o-this.sinph0*Math.sin(e.y))*i,t.x*=s*this.cosph0;break;case dt.EQUIT:e.y=Math.asin(t.y*s/i),t.y=o*i,t.x*=s;break;case dt.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case dt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var bf=["Tilted_Perspective","tpers"],wf={init:mf,forward:Mf,inverse:pf,names:bf};function xf(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ef(t){var e=t.x,r=t.y,a,n,i,o;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var s=this.radius_p/Mt(this.radius_p*Math.cos(r),Math.sin(r));if(n=s*Math.cos(e)*Math.cos(r),i=s*Math.sin(e)*Math.cos(r),o=s*Math.sin(r),(this.radius_g-n)*n-i*i-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Mt(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(i/a),t.y=this.radius_g_1*Math.atan(o/Mt(i,a)))}else this.shape==="sphere"&&(a=Math.cos(r),n=Math.cos(e)*a,i=Math.sin(e)*a,o=Math.sin(r),a=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Mt(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(i/a),t.y=this.radius_g_1*Math.atan(o/Mt(i,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Cf(t){var e=-1,r=0,a=0,n,i,o,s;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Mt(1,a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Mt(1,r));var h=a/this.radius_p;if(n=r*r+h*h+e*e,i=2*this.radius_g*e,o=i*i-4*n*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(o))/(2*n),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(r=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),n=r*r+a*a+e*e,i=2*this.radius_g*e,o=i*i-4*n*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(o))/(2*n),e=this.radius_g+s*e,r*=s,a*=s,t.x=Math.atan2(r,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Pf=["Geostationary Satellite View","Geostationary_Satellite","geos"],Sf={init:xf,forward:Ef,inverse:Cf,names:Pf},sr=1.340264,or=-.081106,hr=893e-6,ur=.003796,qr=Math.sqrt(3)/2;function Tf(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Af(t){var e=z(t.x-this.long0),r=t.y,a=Math.asin(qr*Math.sin(r)),n=a*a,i=n*n*n;return t.x=e*Math.cos(a)/(qr*(sr+3*or*n+i*(7*hr+9*ur*n))),t.y=a*(sr+or*n+i*(hr+ur*n)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Of(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,a=t.y,n,i,o,s,h,c;for(c=0;c<r&&(n=a*a,i=n*n*n,o=a*(sr+or*n+i*(hr+ur*n))-t.y,s=sr+3*or*n+i*(7*hr+9*ur*n),a-=h=o/s,!(Math.abs(h)<e));++c);return n=a*a,i=n*n*n,t.x=qr*t.x*(sr+3*or*n+i*(7*hr+9*ur*n))/Math.cos(a),t.y=Math.asin(Math.sin(a)/qr),t.x=z(t.x+this.long0),t}var If=["eqearth","Equal Earth","Equal_Earth"],Rf={init:Tf,forward:Af,inverse:Of,names:If},dr=1e-10;function Nf(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<dr)throw new Error;this.es?(this.en=Ci(this.es),this.m1=Oe(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Ff,this.forward=Lf):(Math.abs(this.phi1)+dr>=I?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=zf,this.forward=Df)}function Lf(t){var e=z(t.x-(this.long0||0)),r=t.y,a,n,i;return a=this.am1+this.m1-Oe(r,n=Math.sin(r),i=Math.cos(r),this.en),n=i*e/(a*Math.sqrt(1-this.es*n*n)),t.x=a*Math.sin(n),t.y=this.am1-a*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Ff(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a,n;if(r=Mt(t.x,t.y=this.am1-t.y),n=Pi(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(n))<I)e=Math.sin(n),a=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-I)<=dr)a=0;else throw new Error;return t.x=z(a+(this.long0||0)),t.y=ee(n),t}function Df(t){var e=z(t.x-(this.long0||0)),r=t.y,a,n;return n=this.cphi1+this.phi1-r,Math.abs(n)>dr?(t.x=n*Math.sin(a=e*Math.cos(r)/n),t.y=this.cphi1-n*Math.cos(a)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function zf(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,a=Mt(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-a,Math.abs(r)>I)throw new Error;return Math.abs(Math.abs(r)-I)<=dr?e=0:e=a*Math.atan2(t.x,t.y)/Math.cos(r),t.x=z(e+(this.long0||0)),t.y=ee(r),t}var Uf=["bonne","Bonne (Werner lat_1=90)"],Bf={init:Nf,names:Uf};function $f(t){t.Proj.projections.add(Lr),t.Proj.projections.add(Fr),t.Proj.projections.add(Lu),t.Proj.projections.add(ju),t.Proj.projections.add(Qu),t.Proj.projections.add(tl),t.Proj.projections.add(sl),t.Proj.projections.add(cl),t.Proj.projections.add(gl),t.Proj.projections.add(bl),t.Proj.projections.add(Ul),t.Proj.projections.add(Gl),t.Proj.projections.add(Ql),t.Proj.projections.add(ec),t.Proj.projections.add(sc),t.Proj.projections.add(cc),t.Proj.projections.add(gc),t.Proj.projections.add(bc),t.Proj.projections.add(Sc),t.Proj.projections.add(Rc),t.Proj.projections.add(zc),t.Proj.projections.add(qc),t.Proj.projections.add(Vc),t.Proj.projections.add(Kc),t.Proj.projections.add(nf),t.Proj.projections.add(ff),t.Proj.projections.add(_f),t.Proj.projections.add(wf),t.Proj.projections.add(Sf),t.Proj.projections.add(Rf),t.Proj.projections.add(Bf)}Et.defaultDatum="WGS84";Et.Proj=Bt;Et.WGS84=new Et.Proj("WGS84");Et.Point=Te;Et.toPoint=_a;Et.defs=yt;Et.nadgrid=Dh;Et.transform=Br;Et.mgrs=Kh;Et.version="__VERSION__";$f(Et);function kf(t,e,r,a,n,i=1){const o=t.distanceTo(e),s=r*(Math.PI/180);let h=a*n/(2*o*Math.tan(s/2));if(i!==1){const y=1-Math.min(1,o/1e3)*(1-i);h*=y}const c=new ce().subVectors(e,t).normalize(),d=new ce(0,0,-1),f=c.dot(d);return f<0&&(h*=Math.max(0,1+f)),h}let xt=null,jr,Dr={},pi={},Aa,Oa="rgb",nr=new Set;function qf(t,e){const r=e.split("-").map(i=>parseInt(i)),a=[t[3]-t[0],t[4]-t[1],t[5]-t[2]].map(i=>i/Math.pow(2,r[0]));return[t[0]+a[0]*r[1]+a[0]/2,t[1]+a[1]*r[2]+a[1]/2,t[2]+a[2]*r[3]+a[2]/2]}function Jn(t,e){return t.map(r=>r(e))}async function jf(t){try{if(xt=await vi.Copc.create(t),!xt||!xt.wkt){self.postMessage({type:"error",message:"Failed to initialize COPC or WKT is missing"});return}jr=Et(xt.wkt);const{nodes:e}=await vi.Copc.loadHierarchyPage(t,xt.info.rootHierarchyPage);Dr=e,pi=Object.entries(Dr).reduce((n,[i,o])=>{const s=qf(xt.info.cube,i);return{...n,[i]:s}},{});const r=pi["0-0-0-0"],a=jr.inverse([r[0],r[1]]);self.postMessage({type:"initialized",center:a,nodeCount:Object.keys(Dr).length})}catch(e){self.postMessage({type:"error",message:`Error initializing COPC: ${e instanceof Error?e.message:String(e)}`})}}async function Gf(t){if(!xt){self.postMessage({type:"error",message:"COPC not initialized"});return}if(nr.has(t)){nr.delete(t);return}try{const e=Dr[t];if(!e){self.postMessage({type:"error",message:`Node ${t} not found`});return}const r=await vi.Copc.loadPointDataView(Aa,xt,e);if(nr.has(t)){nr.delete(t);return}const a=new Float64Array(e.pointCount*3),n=new Float32Array(e.pointCount*3),i=r.dimensions.Red&&r.dimensions.Green&&r.dimensions.Blue,o=r.dimensions.Intensity,h=2*Math.PI*6378137,c=Math.PI/180;for(let d=0;d<e.pointCount;d++){const f=["X","Y","Z"].map(r.getter),v=Jn(f,d),[y,_]=jr.inverse([v[0],v[1]]),m=y*c,M=_*c,P=.5+m/(2*Math.PI),b=Math.sin(M),E=(1+b)/(1-b),N=.5-Math.log(E)/(4*Math.PI),T=v[2]/h;switch(a[d*3]=P,a[d*3+1]=N,a[d*3+2]=T,Oa){case"rgb":if(i){const Q=["Red","Green","Blue"].map(r.getter),L=Jn(Q,d);n[d*3]=L[0]/65535,n[d*3+1]=L[1]/65535,n[d*3+2]=L[2]/65535}else n[d*3]=n[d*3+1]=n[d*3+2]=1;break;case"height":const B=(v[2]-xt.info.cube[2])/(xt.info.cube[5]-xt.info.cube[2]);n[d*3]=Math.min(1,Math.max(0,B*2)),n[d*3+1]=Math.min(1,Math.max(0,B>.5?2-B*2:B*2)),n[d*3+2]=Math.min(1,Math.max(0,1-B*2));break;case"intensity":if(o){const L=r.getter("Intensity")(d)/65535;n[d*3]=n[d*3+1]=n[d*3+2]=L}else n[d*3]=n[d*3+1]=n[d*3+2]=1;break;case"white":default:n[d*3]=n[d*3+1]=n[d*3+2]=1;break}}self.postMessage({type:"nodeLoaded",node:t,positions:a.buffer,colors:n.buffer,pointCount:e.pointCount},{transfer:[a.buffer,n.buffer]})}catch(e){self.postMessage({type:"error",message:`Error loading node ${t}: ${e instanceof Error?e.message:String(e)}`})}}let Kn=0;function Hf(t,e,r,a){if(!(Kn++<10)){if(Kn=0,!xt){self.postMessage({type:"error",message:"COPC not initialized"});return}try{const n=new ce(...jr.forward([t[0],t[1]]),t[2]),i=[];Object.entries(pi).forEach(([o,s])=>{const h=parseInt(o.split("-")[0]),c=new ce(...s),d=Math.max(.5,1-h*.1);kf(n,c,r,xt.info.spacing*Math.pow(.5,h),e,d)>a&&i.push(o)}),i.length===0&&i.push("0-0-0-0"),self.postMessage({type:"nodesToLoad",nodes:i,cameraPosition:t,sseThreshold:a})}catch(n){self.postMessage({type:"error",message:`Error updating points: ${n instanceof Error?n.message:String(n)}`})}}}self.onmessage=async t=>{const e=t.data;try{switch(e.type){case"init":Aa=e.url,e.options&&(Oa=e.options.colorMode||"rgb"),await jf(e.url);break;case"loadNode":await Gf(e.node);break;case"updatePoints":Hf(e.cameraPosition,e.mapHeight,e.fov,e.sseThreshold);break;case"cancelRequests":e.nodes.forEach(r=>{nr.add(r)});break;default:self.postMessage({type:"error",message:`Unknown message type: ${e.type}`})}}catch(r){self.postMessage({type:"error",message:`Error processing message: ${r instanceof Error?r.message:String(r)}`})}}});export default Wf();
